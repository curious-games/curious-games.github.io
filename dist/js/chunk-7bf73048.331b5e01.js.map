{"version":3,"sources":["webpack:///./node_modules/bodymovin/build/player/bodymovin.js","webpack:///./src/views/Json.vue?16ee","webpack:///src/views/Json.vue","webpack:///./src/views/Json.vue?3421","webpack:///./src/views/Json.vue?26f8","webpack:///./src/views/Json.vue?5997"],"names":["factory","root","window","svgNS","locationHref","subframeEnabled","expressionsPlugin","isSafari","test","navigator","userAgent","cachedColors","bm_rounder","Math","round","bm_rnd","bm_pow","pow","bm_sqrt","sqrt","bm_abs","abs","bm_floor","floor","bm_max","max","bm_min","min","blitter","BMMath","ProjectInterface","i","propertyNames","Object","getOwnPropertyNames","len","length","random","val","tOfVal","absArr","Array","apply","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","flag","roundTo2Decimals","roundTo3Decimals","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","styleUnselectableDiv","userSelect","MozUserSelect","webkitUserSelect","oUserSelect","BMEnterFrameEvent","n","c","t","d","this","type","currentTime","totalTime","direction","BMCompleteEvent","BMCompleteLoopEvent","currentLoop","totalLoops","BMSegmentStartEvent","f","firstFrame","totalFrames","BMDestroyEvent","target","_addEventListener","eventName","callback","_cbs","push","removeEventListener","bind","_removeEventListener","splice","_triggerEvent","args","randomString","chars","undefined","result","HSVtoRGB","h","s","v","r","g","b","p","q","arguments","RGBtoHSV","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","componentToHex","hex","toString","rgbToHex","colorMap","fillToRgba","alpha","exec","parseInt","fillColorToString","colorArr","join","RenderedFrame","tr","o","iterateDynamicProperties","num","dynamicProperties","getValue","reversePath","paths","newI","newO","newV","newPaths","init","cnt","Matrix","reset","props","rotate","angle","mCos","cos","mSin","sin","_t","rotateX","rotateY","rotateZ","shear","sx","sy","skew","ax","ay","tan","skewFromAxis","scale","sz","isNaN","setTransform","a","e","j","k","l","m","translate","tx","ty","tz","transform","a2","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_identityCalculated","a1","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","isIdentity","_identity","clone","matr","cloneFromProps","applyToPoint","x","y","z","applyToX","applyToY","applyToZ","inversePoint","pt","determinant","inversePoints","pts","retPts","applyToPointArray","dimensions","arr","point_pool","newPoint","applyToPointStringified","toArray","toCSS","cssParts","to2dCSS","pool","math","nodecrypto","global","width","chunks","digits","rngname","startdenom","significance","overflow","mask","seedrandom","seed","options","key","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","prng","int32","quick","double","S","pass","is_math_call","state","copy","keylen","me","count","slice","obj","depth","prop","typ","smear","stringseed","charCodeAt","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","Date","screen","String","fromCharCode","BezierFactory","ob","getBezierEasing","beziers","nm","str","replace","bezEasing","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","points","_p","_mSampleValues","_precomputed","get","prototype","mY1","mY2","_precompute","_getTForX","_calcSampleValues","mSampleValues","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","createElement","parent","child","params","instance","create","getType","call","constructor","_parent","extendPrototype","source","destination","attr","hasOwnProperty","bezFunction","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","getBezierLength","Segment","pt1","pt2","pt3","pt4","ptCoord","perc","ptDistance","curveSegments","addedLength","point","lastPoint","lengthData","segments","getSegmentsLength","shapeData","closed","pathV","pathO","pathI","_length","lengths","totalLength","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","keyData","to","ti","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","SegmentPoints","getPointInSegment","percent","t1","u1","ptX","ptY","getNewSegment","startPerc","endPerc","t0","u0","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","bez","dataFunctionManager","completeLayers","layers","comps","fontManager","layerData","jLen","kLen","completed","tt","td","hasMask","maskProps","masksProperties","convertPathsToAbsoluteValues","findCompLayers","refId","completeShapes","shapes","completeText","__used","JSON","parse","stringify","ks","it","path","checkVersion","minimum","animVersionString","animVersion","split","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","animationData","assets","checkChars","pathData","data","__converted","checkColors","iterateShapes","checkShapes","cl","completeData","__complete","singleShape","moduleOb","dataManager","FontManager","maxWaitingTime","setUpNode","font","family","parentNode","document","fontFamily","node","innerHTML","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","appendChild","body","offsetWidth","w","checkLoadedFonts","fonts","loadedCount","loaded","fOrigin","origin","Typekit","load","typekitLoaded","async","active","monoCase","sansCase","removeChild","now","initTime","createHelper","def","fontData","tHelper","createElementNS","fFamily","textContent","fClass","className","tCanvasHelper","getContext","addFonts","defs","list","fontArr","fPath","rel","href","sc","setAttribute","helper","addChars","found","ch","getCharData","char","measureText","fontName","size","getFontByName","name","fName","Font","PropertyFactory","initFrame","interpolateValue","frameNum","iterationIndex","previousValue","caching","newValue","offsetTime","nextKeyData","fnc","keyframes","ind","_lastBezierData","__fnct","segmentPerc","distanceInLine","lastFrame","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","initP","endP","value","getValueAtCurrentTime","elem","globalData","frameId","mdf","comp","renderedFrame","endTime","_caching","lastIndex","renderResult","pv","mult","lastPValue","getNoValue","ValueProperty","kf","vel","MultiDimensionalProperty","lastValue","map","KeyframedValueProperty","st","KeyframedMultidimensionalProperty","TransformProperty","positionGetter","ExpressionValue","px","py","pz","xPositionGetter","yPositionGetter","anchorGetter","orientationGetter","or","rotationGetter","rz","scaleGetter","opacityGetter","skewGetter","sk","skewAxisGetter","sa","applyToMatrix","mat","ry","rx","processKeys","v1","v2","autoOriented","getValueAtTime","frameRate","atan2","setInverted","inverted","iv","autoOrient","getProp","defineProperty","getGradientProp","forceRender","cmdf","omdf","gradientProp","cLength","DashProperty","dataProps","renderer","dasharray","dashoffset","getDashProp","TextSelectorProp","updateRange","newCharsFlag","totalChars","textProperty","currentData","divisor","_s","finalS","finalE","getMult","easer","ne","xe","tot","getTextSelectorProp","ShapePath","_maxLength","setPathData","setLength","doubleArrayLength","concat","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","ShapePropertyFactory","interpolateShape","isCurrentRender","keyPropS","keyPropE","isHold","vertexValue","hasModified","interpolateShapeCurrentTime","_lastIndex","localShapeCollection","getShapeValue","resetShape","ShapeProperty","__shapeObject","shape_pool","shapeCollection_pool","newShapeCollection","addShape","KeyframedShapeProperty","newShape","EllShapeProperty","cPoint","convertEllToPath","p0","s0","s1","StarShapeProperty","convertPolygonToPath","numPts","rad","roundness","os","perimSegment","currentAng","ox","oy","convertStarToPath","longFlag","longRad","shortRad","ir","longRound","shortRound","is","longPerimSegment","shortPerimSegment","convertToPath","RectShapeProperty","convertRectToPath","v0","getShapeProp","dataProp","keys","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","RoundCornersModifier","RepeaterModifier","ShapeCollection","initModifierProperties","addShapeToModifier","shape","sValue","eValue","oValue","calculateShapeEdges","shapeLength","totalModifierLength","segmentOb","shapeSegments","shapeS","shapeE","processShapes","shapePaths","pathsData","totalShapeLength","releaseShapes","edges","newShapesData","addShapes","lastShape","pop","addPaths","addSegment","shapePath","shapeSegment","currentLengthData","segmentCount","segment","rd","processPath","cloned_path","currentV","currentI","currentO","closerV","distance","newPosPerc","index","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","copies","ceil","group","reloadShapes","cont","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","items","itemsTransform","mProps","release","ImagePreloader","imagesLoadedCb","imageLoaded","loadedAssets","totalImages","getAssetsPath","assetData","assetsPath","imagePath","indexOf","u","loadImage","img","addEventListener","src","loadAssets","cb","totalAssets","setPath","setAssetsPath","featureSupport","maskType","filtersFactory","createFilter","filId","fil","createAlphaToLuminanceFilter","feColorMatrix","TextAnimatorProperty","textData","renderType","_firstFrame","_hasMaskedPath","_frameId","_dynamicProperties","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","LetterProps","sw","fc","TextProperty","keysIndex","ascent","boxWidth","fStyle","fWeight","justifyOffset","lh","lineWidths","ls","of","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","searchProperty","searchProperties","animatorData","animatorProps","fh","fs","fb","maskManager","getMaskProperty","getMeasures","xPos","yPos","animators","matrixHelper","mHelper","renderedLettersCount","letters","pathInfo","tLength","pi","currentPoint","prevPoint","currentLength","segmentInd","pointInd","tanAngle","animatorSelector","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","currentLine","letterM","letterP","defaultPropsArray","line","extra","an","animatorOffset","anIndexes","add","rot","atan","ps","update","updated","setCurrentData","textDocumentData","textKeys","completeTextData","newLineFlag","charData","styleName","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","styles","toLowerCase","trackingOffset","lastSpaceIndex","charAt","substr","currentChar","uncollapsedSpaces","letterData","based","indexes","rn","newInd","currentInd","updateDocumentData","newData","dData","pooling","releaseArray","shapePathsCollection","cloned","shapeCollection","originCollection","BaseRenderer","SVGRenderer","animationItem","config","renderConfig","preserveAspectRatio","progressiveLoad","hideOnTransparent","viewBoxOnly","pendingElements","destroyed","MaskElement","viewData","maskElement","rect","expansor","feMorph","properties","currentMasks","layerId","maskRef","mode","filterID","expan","lastPath","lastOperator","filterId","lastRadius","solidPath","createLayerSolidPath","op","invRect","drawPath","maskedElement","BaseElement","SVGBaseElement","parentContainer","placeholder","matteElement","transformedElement","isTransparent","_sizeChanged","IShapeElement","shapesData","stylesList","itemsData","prevViewData","shapeModifiers","processedElements","checkLayers","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createShape","createText","createCamera","createBase","Error","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","buildElementParenting","parentName","hierarchy","_isParent","setHierarchy","addPendingElement","layerElement","SVGTextElement","IImageElement","ICompElement","ISolidElement","configAnimation","animData","height","wrapper","getAssetData","compSize","fr","maskId","destroy","updateContainerSize","registerComposition","initExpressions","appendElementInPos","setMatte","checkParenting","renderFrame","currentFrame","prepareFrame","newElement","getBaseElement","nextElement","insertBefore","hide","show","searchExtraCompositions","floatingContainer","xt","finalMat","finalTransform","mProp","getMaskelement","pathNodes","pathString","checkMasks","isVisible","elemMdf","sr","currentFrameNum","globalToLocal","transforms","ptNew","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","createShapeInterface","textInterface","TextExpressionInterface","setBlendMode","blendModeValue","bm","baseElement","ef","effects","EffectsManager","hidden","lastNum","matMdf","opMdf","opacity","ao","createElements","addMasks","resetHierarchy","getHierarchy","getLayerSize","sourceRectAtTime","layerElementParent","masker","gg","maskGroup","maskGrouper","alphaRect","ln","cp","clipId","cpGroup","effectsManager","SVGEffects","parentTransform","hd","identityMatrix","lcEnum","ljEnum","searchProcessedElement","addProcessedElement","buildExpressionInterface","searchShapes","setGradientData","pathElement","gfill","gradientId","stop","stops","gf","cst","setGradientOpacity","styleOb","opFill","opacityId","ost","msElem","createStyleElement","level","elementData","ld","lvl","lc","lj","ml","pElem","createGroupElement","gr","createTransformElement","createShapeElement","ownTransformers","caches","transformers","lStr","addShapeToModifiers","ITextElement","textSpans","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMergeNode","feMerge","SVGFillFilter","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","feGaussianBlur","feOffset","feFlood","feComposite","originalNodeAdded","SVGMatte3Effect","filterElem","filters","supports3d","tm","setElementStyles","renderModifiers","container","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","parentMatrix","renderParent","renderShape","renderPath","renderFill","renderGradient","renderStroke","buildShapeString","shapeString","itemData","pathStringTransformed","redraw","lLen","iterations","styleData","styleElem","attr1","attr2","cValues","oValues","ang","textAnimator","buildNewText","createPathShape","shapeStr","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","textContainer","usesGlyphs","tSpan","tElement","justify","cachedSpansLength","setAttributeNS","time","renderLetters","textBox","getBBox","bbox","renderedLetter","textSpan","colorBlack","colorWhite","initialize","groupPath","elemChildren","children","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","feFunc","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","setElementAsMask","timeRemapped","setElements","elems","getElements","assetPath","innerElem","animationManager","registeredAnimations","idled","playingAnimationsNum","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","addPlayingCount","activate","loadAnimation","setParams","setSpeed","setDirection","play","moveFrame","resume","nowTime","elapsedTime","advanceTime","first","pause","goToAndStop","isFrame","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","start","isLoaded","currentRawFrame","frameMult","playSpeed","playDirection","playCount","prerenderFramesFlag","autoplay","loop","animationID","scaleMode","timeCompleted","segmentPos","pendingSegment","_idle","CanvasRenderer","clearCanvas","context","dpr","devicePixelRatio","contextData","saved","savedOp","cArrPos","cTr","cO","transformMat","HybridRenderer","threeDElements","camera","CVBaseElement","canvasContext","CVCompElement","compGlobalData","compHeight","compWidth","parentGlobalData","cv","canvas","CVImageElement","CVMaskElement","CVShapeElement","CVSolidElement","CVTextElement","stroke","fill","currentRender","values","sWidth","fValue","HBaseElement","HSolidElement","HCompElement","HShapeElement","currentBBox","self","animType","rendererSettings","prerender","autoloadSegments","xhr","XMLHttpRequest","lastIndexOf","fileName","open","send","onreadystatechange","readyState","status","responseText","response","err","wrapperAttributes","attributes","getNamedItem","tf","loadNextSegment","trigger","shift","segmentPath","loadSegments","_this","imagePreloader","updaFrameModifier","waitForFontsLoaded","checkLoaded","checkFontsLoaded","elementLoaded","gotoFrame","setSubframe","setCurrentRawFrameValue","frameModifier","goToAndPlay","adjustSegment","updateAnimation","setSegment","end","pendingFrame","playSegments","forceFlag","resetSegments","checkSegments","remove","onEnterFrame","onLoopComplete","onComplete","onSegmentStart","onDestroy","getPath","getAssets","triggerEvent","ctxTransform","trProps","ctxOpacity","globalAlpha","restore","save","actionFlag","popped","mozTransformOrigin","isDashed","transformCanvas","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","par","fillType","clearRect","beginPath","closePath","clip","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","HTextElement","HCameraElement","HImageElement","startPos","endPos","perspectiveElem","createThreeDContainer","webkitTransform","resizerElem","threeDContainerData","build3dContainers","lastThreeDContainerData","svg","setup","cWidth","cHeight","perspective","webkitPerspective","checkBlendMode","blendMode","globalCompositeOperation","maxScale","drawImage","widthCrop","heightCrop","ctx","imgW","imgH","imgRel","canvasRel","imageFailed","failed","Image","hasMasks","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","co","wi","da","do","nodes","trNodes","hasStrokes","hasFills","fl","ownArrays","isMain","groupTransform","groupMatrix","mtArr","strokeStyle","lineCap","lineJoin","miterLimit","fillStyle","coOp","setLineDash","lineDashOffset","p3","groupTransformMat","fillRect","hasFill","hasStroke","commands","pathArr","lastFill","lastStroke","lastStrokeW","getDomElement","divElement","compSvg","textPaths","isMasked","pe","_renderShapeFrame","shapesContainer","shapeCont","boundingBox","changed","compW","compH","innerElemStyle","strokeWidth","lineHeight","tParent","tCont","textPath","margin","imageElem","diffVector","mag","lookDir","lookLengthOnXZ","m_rotationX","m_rotationY","Expressions","getStaticValueAtTime","loopOut","duration","durationFlag","cycleDuration","firstKeyFrame","lastKeyFrame","ret","initV","endV","current","repeats","nextLastValue","loopIn","firstValue","nextFirstValue","_cachingAtTime","interpolationResult","getVelocityAtTime","velocity","delta","setGroupProperty","propertyGroup","searchExpressions","getPreValue","ExpressionManager","initiateExpression","getTransformValueAtTime","console","log","getTransformStaticValueAtTime","TextExpressionSelectorProp","getValueProxy","total","textIndex","textTotal","selectorValue","propertyGetProp","getShapeValueAtTime","_shapeValueAtTime","_lastIndexAtTime","_lastTimeAtTime","numKeys","isAdded","ix","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","vertices","inTangents","outTangents","isClosed","pointOnPath","_segmentsLength","segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","unitVector","tangentOnPath","normalOnPath","propertyGetShapeProp","trims","propertyGetTextProp","calculateExpression","getExpressionValue","duplicatePropertyValue","Number","shapesEqual","shape1","shape2","$bm_neg","tOfA","lenA","retArr","sum","tOfB","lenB","sub","mul","mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hslToRgb","hue2rgb","linear","tMin","tMax","value1","value2","rnd","rndm","createPath","property","needsVelocity","_needsRandom","elemType","content","effect","thisComp","thisProperty","frameDuration","inPoint","outPoint","loop_in","loop_out","toWorld","fromWorld","fromComp","fromCompToSurface","anchorPoint","thisLayer","valueAtTime","velocityAtTime","fn","Function","eval","bindedFn","wiggle","freq","amp","addedAmps","periods","loopInDuration","loopOutDuration","lookAt","elem1","elem2","fVec","pitch","yaw","easeOut","val1","val2","nearestKey","keyTime","framesToTime","frames","fps","timeToFrames","seedRandom","randSeed","hasParent","executeExpression","frameExpressionId","lock","createGroupInterface","createTrimInterface","createStrokeInterface","createTransformInterface","createEllipseInterface","createStarInterface","createRectInterface","createRoundedInterface","createRepatearInterface","createPathInterface","createFillInterface","view","shapeInterfaceFactory","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","transformInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","pathInterfaceFactory","iterateElements","interfaces","_interfaceFunction","_name","contentsInterfaceFactory","interfaceFunction","mn","propertyIndex","numProperties","cix","transformInterface","np","_propertyGroup","_dashPropertyGroup","dashOb","addPropertyToDashOb","rotation","skewAxis","outerRadius","outerRoundness","innerRoundness","innerRadius","radius","_prevValue","_sourceText","_thisLayerFunction","stringValue","toWorldMat","TransformExpressionInterface","_registerMaskInterface","MaskManagerInterface","_registerEffectsInterface","toComp","pixelAspect","_thisFunction","xPosition","yPosition","compositions","_thisProjectFunction","effectsData","createValueInterface","groupInterface","en","MaskInterface","_mask","_data","MaskManager","_masksInterfaces","maskFunction","elementProp","expressionValue","arrValue","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","eff","bodymovinjs","setLocationHref","setSubframeRendering","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","clearInterval","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","__getFactory","version","scripts","myScript","setInterval","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","component"],"mappings":"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","file":"js/chunk-7bf73048.331b5e01.js","sourcesContent":["(function(root, factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(function() {\r\n            return factory(root);\r\n        });\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory(root);\r\n    } else {\r\n        root.bodymovin = factory(root);\r\n    }\r\n}((window || {}), function(window) {\r\n    var svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\nvar locationHref = '';\r\n\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bm_rounder = Math.round;\r\nvar bm_rnd;\r\nvar bm_pow = Math.pow;\r\nvar bm_sqrt = Math.sqrt;\r\nvar bm_abs = Math.abs;\r\nvar bm_floor = Math.floor;\r\nvar bm_max = Math.max;\r\nvar bm_min = Math.min;\r\nvar blitter = 10;\r\n\r\nvar BMMath = {};\r\n(function(){\r\n    var propertyNames = Object.getOwnPropertyNames(Math);\r\n    var i, len = propertyNames.length;\r\n    for(i=0;i<len;i+=1){\r\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n}());\r\n\r\nfunction ProjectInterface(){return {}};\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function(val){\r\n    var tOfVal = typeof val;\r\n    if(tOfVal === 'object' && val.length){\r\n        var absArr = Array.apply(null,{length:val.length});\r\n        var i, len = val.length;\r\n        for(i=0;i<len;i+=1){\r\n            absArr[i] = Math.abs(val[i]);\r\n        }\r\n        return absArr;\r\n    }\r\n    return Math.abs(val);\r\n\r\n}\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI/180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag){\r\n    if(flag){\r\n        bm_rnd = Math.round;\r\n    }else{\r\n        bm_rnd = function(val){\r\n            return val;\r\n        };\r\n    }\r\n}\r\nroundValues(false);\r\n\r\nfunction roundTo2Decimals(val){\r\n    return Math.round(val*10000)/10000;\r\n}\r\n\r\nfunction roundTo3Decimals(val){\r\n    return Math.round(val*100)/100;\r\n}\r\n\r\nfunction styleDiv(element){\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility  = element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\r\n}\r\n\r\nfunction styleUnselectableDiv(element){\r\n    element.style.userSelect = 'none';\r\n    element.style.MozUserSelect = 'none';\r\n    element.style.webkitUserSelect = 'none';\r\n    element.style.oUserSelect = 'none';\r\n\r\n}\r\n\r\nfunction BMEnterFrameEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentTime = c;\r\n    this.totalTime = t;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteEvent(n,d){\r\n    this.type = n;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentLoop = c;\r\n    this.totalLoops = t;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(n,f,t){\r\n    this.type = n;\r\n    this.firstFrame = f;\r\n    this.totalFrames = t;\r\n}\r\n\r\nfunction BMDestroyEvent(n,t){\r\n    this.type = n;\r\n    this.target = t;\r\n}\r\n\r\nfunction _addEventListener(eventName, callback){\r\n\r\n    if (!this._cbs[eventName]){\r\n        this._cbs[eventName] = [];\r\n    }\r\n    this._cbs[eventName].push(callback);\r\n\r\n\treturn function() {\r\n\t\tthis.removeEventListener(eventName, callback);\r\n\t}.bind(this);\r\n}\r\n\r\nfunction _removeEventListener(eventName,callback){\r\n\r\n    if (!callback){\r\n        this._cbs[eventName] = null;\r\n    }else if(this._cbs[eventName]){\r\n        var i = 0, len = this._cbs[eventName].length;\r\n        while(i<len){\r\n            if(this._cbs[eventName][i] === callback){\r\n                this._cbs[eventName].splice(i,1);\r\n                i -=1;\r\n                len -= 1;\r\n            }\r\n            i += 1;\r\n        }\r\n        if(!this._cbs[eventName].length){\r\n            this._cbs[eventName] = null;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction _triggerEvent(eventName, args){\r\n    if (this._cbs[eventName]) {\r\n        var len = this._cbs[eventName].length;\r\n        for (var i = 0; i < len; i++){\r\n            this._cbs[eventName][i](args);\r\n        }\r\n    }\r\n}\r\n\r\nfunction randomString(length, chars){\r\n    if(chars === undefined){\r\n        chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';\r\n    }\r\n    var i;\r\n    var result = '';\r\n    for (i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n    return result;\r\n}\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    if (arguments.length === 1) {\r\n        s = h.s, v = h.v, h = h.h;\r\n    }\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0: r = v, g = t, b = p; break;\r\n        case 1: r = q, g = v, b = p; break;\r\n        case 2: r = p, g = v, b = t; break;\r\n        case 3: r = p, g = q, b = v; break;\r\n        case 4: r = t, g = p, b = v; break;\r\n        case 5: r = v, g = p, b = q; break;\r\n    }\r\n    return [ r,\r\n        g,\r\n         b ];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n    if (arguments.length === 1) {\r\n        g = r.g, b = r.b, r = r.r;\r\n    }\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b),\r\n        d = max - min,\r\n        h,\r\n        s = (max === 0 ? 0 : d / max),\r\n        v = max / 255;\r\n\r\n    switch (max) {\r\n        case min: h = 0; break;\r\n        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\r\n        case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n        case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    }\r\n\r\n    return [\r\n         h,\r\n         s,\r\n         v\r\n    ];\r\n}\r\n\r\nfunction addSaturationToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[1] += offset;\r\n    if (hsv[1] > 1) {\r\n        hsv[1] = 1;\r\n    }\r\n    else if (hsv[1] <= 0) {\r\n        hsv[1] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[2] += offset;\r\n    if (hsv[2] > 1) {\r\n        hsv[2] = 1;\r\n    }\r\n    else if (hsv[2] < 0) {\r\n        hsv[2] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color,offset) {\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[0] += offset/360;\r\n    if (hsv[0] > 1) {\r\n        hsv[0] -= 1;\r\n    }\r\n    else if (hsv[0] < 0) {\r\n        hsv[0] += 1;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction componentToHex(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? '0' + hex : hex;\r\n}\r\n\r\nvar rgbToHex = (function(){\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n    for(i=0;i<256;i+=1){\r\n        hex = i.toString(16);\r\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function(r, g, b) {\r\n        if(r<0){\r\n            r = 0;\r\n        }\r\n        if(g<0){\r\n            g = 0;\r\n        }\r\n        if(b<0){\r\n            b = 0;\r\n        }\r\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n}());\r\n\r\nfunction fillToRgba(hex,alpha){\r\n    if(!cachedColors[hex]){\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        cachedColors[hex] = parseInt(result[1], 16)+','+parseInt(result[2], 16)+','+parseInt(result[3], 16);\r\n    }\r\n    return 'rgba('+cachedColors[hex]+','+alpha+')';\r\n}\r\n\r\nvar fillColorToString = (function(){\r\n\r\n    var colorMap = [];\r\n    return function(colorArr,alpha){\r\n        if(alpha !== undefined){\r\n            colorArr[3] = alpha;\r\n        }\r\n        if(!colorMap[colorArr[0]]){\r\n            colorMap[colorArr[0]] = {};\r\n        }\r\n        if(!colorMap[colorArr[0]][colorArr[1]]){\r\n            colorMap[colorArr[0]][colorArr[1]] = {};\r\n        }\r\n        if(!colorMap[colorArr[0]][colorArr[1]][colorArr[2]]){\r\n            colorMap[colorArr[0]][colorArr[1]][colorArr[2]] = {};\r\n        }\r\n        if(!colorMap[colorArr[0]][colorArr[1]][colorArr[2]][colorArr[3]]){\r\n            colorMap[colorArr[0]][colorArr[1]][colorArr[2]][colorArr[3]] = 'rgba(' + colorArr.join(',')+')';\r\n        }\r\n        return colorMap[colorArr[0]][colorArr[1]][colorArr[2]][colorArr[3]];\r\n    };\r\n}());\r\n\r\nfunction RenderedFrame(tr,o) {\r\n    this.tr = tr;\r\n    this.o = o;\r\n}\r\n\r\nfunction iterateDynamicProperties(num){\r\n    var i, len = this.dynamicProperties;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue(num);\r\n    }\r\n}\r\n\r\nfunction reversePath(paths){\r\n    var newI = [], newO = [], newV = [];\r\n    var i, len, newPaths = {};\r\n    var init = 0;\r\n    if (paths.c) {\r\n        newI[0] = paths.o[0];\r\n        newO[0] = paths.i[0];\r\n        newV[0] = paths.v[0];\r\n        init = 1;\r\n    }\r\n    len = paths.i.length;\r\n    var cnt = len - 1;\r\n\r\n    for (i = init; i < len; i += 1) {\r\n        newI.push(paths.o[cnt]);\r\n        newO.push(paths.i[cnt]);\r\n        newV.push(paths.v[cnt]);\r\n        cnt -= 1;\r\n    }\r\n\r\n    newPaths.i = newI;\r\n    newPaths.o = newO;\r\n    newPaths.v = newV;\r\n\r\n    return newPaths;\r\n}\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function(){\r\n\r\n    function reset(){\r\n        this.props[0] = 1;\r\n        this.props[1] = 0;\r\n        this.props[2] = 0;\r\n        this.props[3] = 0;\r\n        this.props[4] = 0;\r\n        this.props[5] = 1;\r\n        this.props[6] = 0;\r\n        this.props[7] = 0;\r\n        this.props[8] = 0;\r\n        this.props[9] = 0;\r\n        this.props[10] = 1;\r\n        this.props[11] = 0;\r\n        this.props[12] = 0;\r\n        this.props[13] = 0;\r\n        this.props[14] = 0;\r\n        this.props[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = Math.cos(angle);\r\n        var mSin = Math.sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0\r\n            , mSin,  mCos, 0, 0\r\n            , 0,  0,  1, 0\r\n            , 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = Math.cos(angle);\r\n        var mSin = Math.sin(angle);\r\n        return this._t(1, 0, 0, 0\r\n            , 0, mCos, -mSin, 0\r\n            , 0, mSin,  mCos, 0\r\n            , 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = Math.cos(angle);\r\n        var mSin = Math.sin(angle);\r\n        return this._t(mCos,  0,  mSin, 0\r\n            , 0, 1, 0, 0\r\n            , -mSin,  0,  mCos, 0\r\n            , 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = Math.cos(angle);\r\n        var mSin = Math.sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0\r\n            , mSin,  mCos, 0, 0\r\n            , 0,  0,  1, 0\r\n            , 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx,sy){\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay){\r\n        return this.shear(Math.tan(ax), Math.tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle){\r\n        var mCos = Math.cos(angle);\r\n        var mSin = Math.sin(angle);\r\n        return this._t(mCos, mSin,  0, 0\r\n            , -mSin,  mCos, 0, 0\r\n            , 0,  0,  1, 0\r\n            , 0, 0, 0, 1)\r\n            ._t(1, 0,  0, 0\r\n            , Math.tan(ax),  1, 0, 0\r\n            , 0,  0,  1, 0\r\n            , 0, 0, 0, 1)\r\n            ._t(mCos, -mSin,  0, 0\r\n            , mSin,  mCos, 0, 0\r\n            , 0,  0,  1, 0\r\n            , 0, 0, 0, 1);\r\n        //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, Math.tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n        sz = isNaN(sz) ? 1 : sz;\r\n        if(sx == 1 && sy == 1 && sz == 1){\r\n            return this;\r\n        }\r\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n        this.props[0] = a;\r\n        this.props[1] = b;\r\n        this.props[2] = c;\r\n        this.props[3] = d;\r\n        this.props[4] = e;\r\n        this.props[5] = f;\r\n        this.props[6] = g;\r\n        this.props[7] = h;\r\n        this.props[8] = i;\r\n        this.props[9] = j;\r\n        this.props[10] = k;\r\n        this.props[11] = l;\r\n        this.props[12] = m;\r\n        this.props[13] = n;\r\n        this.props[14] = o;\r\n        this.props[15] = p;\r\n        return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n        tz = tz || 0;\r\n        if(tx !== 0 || ty !== 0 || tz !== 0){\r\n            return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n\r\n        if(a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0){\r\n            if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n\r\n                this.props[12] = this.props[12] * a2 + this.props[13] * e2 + this.props[14] * i2 + this.props[15] * m2 ;\r\n                this.props[13] = this.props[12] * b2 + this.props[13] * f2 + this.props[14] * j2 + this.props[15] * n2 ;\r\n                this.props[14] = this.props[12] * c2 + this.props[13] * g2 + this.props[14] * k2 + this.props[15] * o2 ;\r\n                this.props[15] = this.props[12] * d2 + this.props[13] * h2 + this.props[14] * l2 + this.props[15] * p2 ;\r\n            }\r\n            this._identityCalculated = false;\r\n            return this;\r\n        }\r\n\r\n        var a1 = this.props[0];\r\n        var b1 = this.props[1];\r\n        var c1 = this.props[2];\r\n        var d1 = this.props[3];\r\n        var e1 = this.props[4];\r\n        var f1 = this.props[5];\r\n        var g1 = this.props[6];\r\n        var h1 = this.props[7];\r\n        var i1 = this.props[8];\r\n        var j1 = this.props[9];\r\n        var k1 = this.props[10];\r\n        var l1 = this.props[11];\r\n        var m1 = this.props[12];\r\n        var n1 = this.props[13];\r\n        var o1 = this.props[14];\r\n        var p1 = this.props[15];\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        this.props[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n        this.props[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2 ;\r\n        this.props[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2 ;\r\n        this.props[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2 ;\r\n\r\n        this.props[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2 ;\r\n        this.props[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2 ;\r\n        this.props[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2 ;\r\n        this.props[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2 ;\r\n\r\n        this.props[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2 ;\r\n        this.props[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2 ;\r\n        this.props[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2 ;\r\n        this.props[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2 ;\r\n\r\n        this.props[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2 ;\r\n        this.props[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2 ;\r\n        this.props[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2 ;\r\n        this.props[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2 ;\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n        if(!this._identityCalculated){\r\n            this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0\r\n                || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0\r\n                || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0\r\n                || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n            this._identityCalculated = true;\r\n        }\r\n        return this._identity;\r\n    }\r\n\r\n    function clone(matr){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            matr.props[i] = this.props[i];\r\n        }\r\n    }\r\n\r\n    function cloneFromProps(props){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            this.props[i] = props[i];\r\n        }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n\r\n        return {\r\n            x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n            y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n            z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n        };\r\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\r\n    }\r\n    function applyToX(x, y, z) {\r\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n    function applyToY(x, y, z) {\r\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n    function applyToZ(x, y, z) {\r\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n        var a = this.props[5]/determinant;\r\n        var b = - this.props[1]/determinant;\r\n        var c = - this.props[4]/determinant;\r\n        var d = this.props[0]/determinant;\r\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12])/determinant;\r\n        var f = - (this.props[0] * this.props[13] - this.props[1] * this.props[12])/determinant;\r\n        return [pt[0] * a + pt[1] * c + e, pt[0] * b + pt[1] * d + f, 0];\r\n    }\r\n\r\n    function inversePoints(pts){\r\n        var i, len = pts.length, retPts = [];\r\n        for(i=0;i<len;i+=1){\r\n            retPts[i] = inversePoint(pts[i]);\r\n        }\r\n        return retPts;\r\n    }\r\n\r\n    function applyToPointArray(x,y,z,dimensions){\r\n        if(dimensions && dimensions === 2) {\r\n            var arr = point_pool.newPoint();\r\n            arr[0] = x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12]; \r\n            arr[1] = x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13]; \r\n            return arr;    \r\n        }\r\n        return [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n    }\r\n    function applyToPointStringified(x, y) {\r\n        if(this.isIdentity()) {\r\n            return x + ',' + y;\r\n        }\r\n        return (bm_rnd(x * this.props[0] + y * this.props[4] + this.props[12]))+','+(bm_rnd(x * this.props[1] + y * this.props[5] + this.props[13]));\r\n    }\r\n\r\n    function toArray() {\r\n        return [this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]];\r\n    }\r\n\r\n    function toCSS() {\r\n        if(isSafari){\r\n            return \"matrix3d(\" + roundTo2Decimals(this.props[0]) + ',' + roundTo2Decimals(this.props[1]) + ',' + roundTo2Decimals(this.props[2]) + ',' + roundTo2Decimals(this.props[3]) + ',' + roundTo2Decimals(this.props[4]) + ',' + roundTo2Decimals(this.props[5]) + ',' + roundTo2Decimals(this.props[6]) + ',' + roundTo2Decimals(this.props[7]) + ',' + roundTo2Decimals(this.props[8]) + ',' + roundTo2Decimals(this.props[9]) + ',' + roundTo2Decimals(this.props[10]) + ',' + roundTo2Decimals(this.props[11]) + ',' + roundTo2Decimals(this.props[12]) + ',' + roundTo2Decimals(this.props[13]) + ',' + roundTo2Decimals(this.props[14]) + ',' + roundTo2Decimals(this.props[15]) + ')';\r\n        } else {\r\n            this.cssParts[1] = this.props.join(',');\r\n            return this.cssParts.join('');\r\n        }\r\n    }\r\n\r\n    function to2dCSS() {\r\n        return \"matrix(\" + roundTo2Decimals(this.props[0]) + ',' + roundTo2Decimals(this.props[1]) + ',' + roundTo2Decimals(this.props[4]) + ',' + roundTo2Decimals(this.props[5]) + ',' + roundTo2Decimals(this.props[12]) + ',' + roundTo2Decimals(this.props[13]) + \")\";\r\n    }\r\n\r\n    function toString() {\r\n        return \"\" + this.toArray();\r\n    }\r\n\r\n    return function(){\r\n        this.reset = reset;\r\n        this.rotate = rotate;\r\n        this.rotateX = rotateX;\r\n        this.rotateY = rotateY;\r\n        this.rotateZ = rotateZ;\r\n        this.skew = skew;\r\n        this.skewFromAxis = skewFromAxis;\r\n        this.shear = shear;\r\n        this.scale = scale;\r\n        this.setTransform = setTransform;\r\n        this.translate = translate;\r\n        this.transform = transform;\r\n        this.applyToPoint = applyToPoint;\r\n        this.applyToX = applyToX;\r\n        this.applyToY = applyToY;\r\n        this.applyToZ = applyToZ;\r\n        this.applyToPointArray = applyToPointArray;\r\n        this.applyToPointStringified = applyToPointStringified;\r\n        this.toArray = toArray;\r\n        this.toCSS = toCSS;\r\n        this.to2dCSS = to2dCSS;\r\n        this.toString = toString;\r\n        this.clone = clone;\r\n        this.cloneFromProps = cloneFromProps;\r\n        this.inversePoints = inversePoints;\r\n        this.inversePoint = inversePoint;\r\n        this._t = this.transform;\r\n        this.isIdentity = isIdentity;\r\n        this._identity = true;\r\n        this._identityCalculated = false;\r\n\r\n        this.props = [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];\r\n\r\n        this.cssParts = ['matrix3d(','',')'];\r\n    }\r\n}());\r\n\r\nfunction Matrix() {\r\n\r\n\r\n}\r\n\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options == true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed == null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; }\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; }\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); }\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        (me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        })(width);\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    };\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date, global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\nvar BezierFactory = (function(){\r\n    /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n        var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a,b,c,d,nm){\r\n        var str = nm || ('bez_' + a+'_'+b+'_'+c+'_'+d).replace(/\\./g, 'p');\r\n        if(beziers[str]){\r\n            return beziers[str];\r\n        }\r\n        var bezEasing = new BezierEasing([a,b,c,d]);\r\n        beziers[str] = bezEasing;\r\n        return bezEasing;\r\n    }\r\n\r\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n    function C (aA1)      { return 3.0 * aA1; }\r\n\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n    function calcBezier (aT, aA1, aA2) {\r\n        return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n    }\r\n\r\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n    function getSlope (aT, aA1, aA2) {\r\n        return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n        var currentX, currentT, i = 0;\r\n        do {\r\n            currentT = aA + (aB - aA) / 2.0;\r\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n            if (currentX > 0.0) {\r\n                aB = currentT;\r\n            } else {\r\n                aA = currentT;\r\n            }\r\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n        return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n            var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n            if (currentSlope === 0.0) return aGuessT;\r\n            var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n            aGuessT -= currentX / currentSlope;\r\n        }\r\n        return aGuessT;\r\n    }\r\n\r\n    /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n    function BezierEasing (points) {\r\n        this._p = points;\r\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n        this._precomputed = false;\r\n\r\n        this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n\r\n        get: function (x) {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            if (!this._precomputed) this._precompute();\r\n            if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (x === 0) return 0;\r\n            if (x === 1) return 1;\r\n            return calcBezier(this._getTForX(x), mY1, mY2);\r\n        },\r\n\r\n        // Private part\r\n\r\n        _precompute: function () {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            this._precomputed = true;\r\n            if (mX1 !== mY1 || mX2 !== mY2)\r\n                this._calcSampleValues();\r\n        },\r\n\r\n        _calcSampleValues: function () {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2];\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n        _getTForX: function (aX) {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2],\r\n                mSampleValues = this._mSampleValues;\r\n\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n            } else if (initialSlope === 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n    };\r\n\r\n    return ob;\r\n\r\n}());\n(function () {\r\n    var lastTime = 0;\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n    if(!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function (callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function () {\r\n                    callback(currTime + timeToCall);\r\n                },\r\n                timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    if(!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function (id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\nfunction createElement(parent,child,params){\r\n    if(child){\r\n        child.prototype = Object.create(parent.prototype);\r\n        child.prototype.constructor = child;\r\n        child.prototype._parent = parent.prototype;\r\n    }else{\r\n        var instance = Object.create(parent.prototype,params);\r\n        var getType = {};\r\n        if(instance && getType.toString.call(instance.init) === '[object Function]'){\r\n            instance.init();\r\n        }\r\n        return instance;\r\n    }\r\n}\r\n\r\nfunction extendPrototype(source,destination){\r\n    for (var attr in source.prototype) {\r\n        if (source.prototype.hasOwnProperty(attr)) destination.prototype[attr] = source.prototype[attr];\r\n    }\r\n}\nfunction bezFunction(){\r\n\r\n    var easingFunctions = [];\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1,y1, x2,y2, x3,y3){\r\n        var det1 = (x1*y2) + (y1*x3) + (x2*y3) - (x3*y2) - (y3*x1) - (x2*y1);\r\n        return det1 > -0.0001 && det1 < 0.0001;\r\n    }\r\n\r\n    function pointOnLine3D(x1,y1,z1, x2,y2,z2, x3,y3,z3){\r\n        if(z1 === 0 && z2 === 0 && z3 === 0) {\r\n            return pointOnLine2D(x1,y1, x2,y2, x3,y3);\r\n        }\r\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\r\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\r\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\r\n        var diffDist;\r\n        if(dist1 > dist2){\r\n            if(dist1 > dist3){\r\n                diffDist = dist1 - dist2 - dist3;\r\n            } else {\r\n                diffDist = dist3 - dist2 - dist1;\r\n            }\r\n        } else if(dist3 > dist2){\r\n            diffDist = dist3 - dist2 - dist1;\r\n        } else {\r\n            diffDist = dist2 - dist1 - dist3;\r\n        }\r\n        return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    /*function getEasingCurve(aa,bb,cc,dd,encodedFuncName) {\r\n        if(!encodedFuncName){\r\n            encodedFuncName = ('bez_' + aa+'_'+bb+'_'+cc+'_'+dd).replace(/\\./g, 'p');\r\n        }\r\n        if(easingFunctions[encodedFuncName]){\r\n            return easingFunctions[encodedFuncName];\r\n        }\r\n        var A0, B0, C0;\r\n        var A1, B1, C1;\r\n        easingFunctions[encodedFuncName] = function(tt) {\r\n            var x = tt;\r\n            var i = 0, z;\r\n            while (++i < 20) {\r\n                C0 = 3 * aa;\r\n                B0 = 3 * (cc - aa) - C0;\r\n                A0 = 1 - C0 - B0;\r\n                z = (x * (C0 + x * (B0 + x * A0))) - tt;\r\n                if (bm_abs(z) < 1e-3) break;\r\n                x -= z / (C0 + x * (2 * B0 + 3 * A0 * x));\r\n            }\r\n            C1 = 3 * bb;\r\n            B1 = 3 * (dd - bb) - C1;\r\n            A1 = 1 - C1 - B1;\r\n            var polyB = x * (C1 + x * (B1 + x * A1));\r\n            //return c * polyB + b;\r\n            return polyB;\r\n        };\r\n        return easingFunctions[encodedFuncName];\r\n    }*/\r\n    var getBezierLength = (function(){\r\n\r\n        function Segment(l,p){\r\n            this.l = l;\r\n            this.p = p;\r\n        }\r\n\r\n        return function(pt1,pt2,pt3,pt4){\r\n            var curveSegments = defaultCurveSegments;\r\n            var k;\r\n            var i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point = [],lastPoint = [];\r\n            var lengthData = {\r\n                addedLength: 0,\r\n                segments: []\r\n            };\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint[i] !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                    lastPoint[i] = point[i];\r\n                }\r\n                if(ptDistance){\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                }\r\n                lengthData.segments.push(new Segment(addedLength,perc));\r\n            }\r\n            lengthData.addedLength = addedLength;\r\n            return lengthData;\r\n        };\r\n    }());\r\n\r\n    function getSegmentsLength(shapeData) {\r\n        var closed = shapeData.c;\r\n        var pathV = shapeData.v;\r\n        var pathO = shapeData.o;\r\n        var pathI = shapeData.i;\r\n        var i, len = shapeData._length;\r\n        var lengths = [];\r\n        var totalLength = 0;\r\n        for(i=0;i<len-1;i+=1){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        if(closed){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        return {lengths:lengths,totalLength:totalLength};\r\n    }\r\n\r\n    function BezierData(length){\r\n        this.segmentLength = 0;\r\n        this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial,point){\r\n        this.partialLength = partial;\r\n        this.point = point;\r\n    }\r\n\r\n    var buildBezierData = (function(){\r\n\r\n        var storedData = {};\r\n\r\n        return function (keyData){\r\n            var pt1 = keyData.s;\r\n            var pt2 = keyData.e;\r\n            var pt3 = keyData.to;\r\n            var pt4 = keyData.ti;\r\n            var bezierName = (pt1.join('_')+'_'+pt2.join('_')+'_'+pt3.join('_')+'_'+pt4.join('_')).replace(/\\./g, 'p');\r\n            if(storedData[bezierName]){\r\n                keyData.bezierData = storedData[bezierName];\r\n                return;\r\n            }\r\n        var curveSegments = defaultCurveSegments;\r\n        var k, i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point,lastPoint = null;\r\n            if(pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){\r\n                curveSegments = 2;\r\n            }\r\n            var bezierData = new BezierData(curveSegments);\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n            point = new Array(len);\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i] + pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i] + pt4[i])+bm_pow(perc,3)*pt2[i];\r\n                point[i] = ptCoord;\r\n                    if(lastPoint !== null){\r\n                    ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                }\r\n            ptDistance = bm_sqrt(ptDistance);\r\n                addedLength += ptDistance;\r\n                bezierData.points[k] = new PointData(ptDistance,point);\r\n                lastPoint = point;\r\n            }\r\n            bezierData.segmentLength = addedLength;\r\n            keyData.bezierData = bezierData;\r\n            storedData[bezierName] = bezierData;\r\n\r\n        }\r\n    }());\r\n\r\n    function getDistancePerc(perc,bezierData){\r\n        var segments = bezierData.segments;\r\n        var len = segments.length;\r\n        var initPos = bm_floor((len-1)*perc);\r\n        var lengthPos = perc*bezierData.addedLength;\r\n        var lPerc = 0;\r\n        if(lengthPos == segments[initPos].l){\r\n            return segments[initPos].p;\r\n        }else{\r\n            var dir = segments[initPos].l > lengthPos ? -1 : 1;\r\n            var flag = true;\r\n            while(flag){\r\n                if(segments[initPos].l <= lengthPos && segments[initPos+1].l > lengthPos){\r\n                    lPerc = (lengthPos - segments[initPos].l)/(segments[initPos+1].l-segments[initPos].l);\r\n                    flag = false;\r\n                }else{\r\n                    initPos += dir;\r\n                }\r\n                if(initPos < 0 || initPos >= len - 1){\r\n                    flag = false;\r\n                }\r\n            }\r\n            return segments[initPos].p + (segments[initPos+1].p - segments[initPos].p)*lPerc;\r\n        }\r\n    }\r\n\r\n    function SegmentPoints(){\r\n        this.pt1 = new Array(2);\r\n        this.pt2 = new Array(2);\r\n        this.pt3 = new Array(2);\r\n        this.pt4 = new Array(2);\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n        var t1 = getDistancePerc(percent,bezierData);\r\n        var u0 = 1;\r\n        var u1 = 1 - t1;\r\n        var ptX = Math.round((u1*u1*u1* pt1[0] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[0] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[0] + t1*t1*t1* pt2[0])* 1000) / 1000;\r\n        var ptY = Math.round((u1*u1*u1* pt1[1] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[1] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[1] + t1*t1*t1* pt2[1])* 1000) / 1000;\r\n        return [ptX, ptY];\r\n    }\r\n\r\n    function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc, bezierData){\r\n\r\n        var pts = new SegmentPoints();\r\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\r\n        var t0 = getDistancePerc(startPerc,bezierData);\r\n        endPerc = endPerc > 1 ? 1 : endPerc;\r\n        var t1 = getDistancePerc(endPerc,bezierData);\r\n        var i, len = pt1.length;\r\n        var u0 = 1 - t0;\r\n        var u1 = 1 - t1;\r\n        //Math.round(num * 100) / 100\r\n        for(i=0;i<len;i+=1){\r\n            pts.pt1[i] =  Math.round((u0*u0*u0* pt1[i] + (t0*u0*u0 + u0*t0*u0 + u0*u0*t0) * pt3[i] + (t0*t0*u0 + u0*t0*t0 + t0*u0*t0)* pt4[i] + t0*t0*t0* pt2[i])* 1000) / 1000;\r\n            pts.pt3[i] = Math.round((u0*u0*u1*pt1[i] + (t0*u0*u1 + u0*t0*u1 + u0*u0*t1)* pt3[i] + (t0*t0*u1 + u0*t0*t1 + t0*u0*t1)* pt4[i] + t0*t0*t1* pt2[i])* 1000) / 1000;\r\n            pts.pt4[i] = Math.round((u0*u1*u1* pt1[i] + (t0*u1*u1 + u0*t1*u1 + u0*u1*t1)* pt3[i] + (t0*t1*u1 + u0*t1*t1 + t0*u1*t1)* pt4[i] + t0*t1*t1* pt2[i])* 1000) / 1000;\r\n            pts.pt2[i] = Math.round((u1*u1*u1* pt1[i] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[i] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[i] + t1*t1*t1* pt2[i])* 1000) / 1000;\r\n        }\r\n        return pts;\r\n    }\r\n\r\n    return {\r\n        //getEasingCurve : getEasingCurve,\r\n        getBezierLength : getBezierLength,\r\n        getSegmentsLength : getSegmentsLength,\r\n        getNewSegment : getNewSegment,\r\n        getPointInSegment : getPointInSegment,\r\n        buildBezierData : buildBezierData,\r\n        pointOnLine2D : pointOnLine2D,\r\n        pointOnLine3D : pointOnLine3D\r\n    };\r\n}\r\n\r\nvar bez = bezFunction();\nfunction dataFunctionManager(){\r\n\r\n    //var tCanvasHelper = document.createElement('canvas').getContext('2d');\r\n\r\n    function completeLayers(layers, comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData) || layerData.completed){\r\n                continue;\r\n            }\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.layers = findCompLayers(layerData.refId, comps);\r\n                completeLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                completeShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                completeText(layerData, fontManager);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCompLayers(id,comps){\r\n        var i = 0, len = comps.length;\r\n        while(i<len){\r\n            if(comps[i].id === id){\r\n                if(!comps[i].layers.__used) {\r\n                    comps[i].layers.__used = true;\r\n                    return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function completeShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                completeShapes(arr[i].it);\r\n            }\r\n        }\r\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\r\n    }\r\n\r\n    function convertPathsToAbsoluteValues(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] += path.v[i][0];\r\n            path.i[i][1] += path.v[i][1];\r\n            path.o[i][0] += path.v[i][0];\r\n            path.o[i][1] += path.v[i][1];\r\n        }\r\n    }\r\n\r\n    function checkVersion(minimum,animVersionString){\r\n        var animVersion = animVersionString ? animVersionString.split('.') : [100,100,100];\r\n        if(minimum[0]>animVersion[0]){\r\n            return true;\r\n        } else if(animVersion[0] > minimum[0]){\r\n            return false;\r\n        }\r\n        if(minimum[1]>animVersion[1]){\r\n            return true;\r\n        } else if(animVersion[1] > minimum[1]){\r\n            return false;\r\n        }\r\n        if(minimum[2]>animVersion[2]){\r\n            return true;\r\n        } else if(animVersion[2] > minimum[2]){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkText = (function(){\r\n        var minimumVersion = [4,4,14];\r\n\r\n        function updateTextLayer(textLayer){\r\n            var documentData = textLayer.t.d;\r\n            textLayer.t.d = {\r\n                k: [\r\n                    {\r\n                        s:documentData,\r\n                        t:0\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 5){\r\n                    updateTextLayer(layers[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }())\r\n\r\n    var checkChars = (function() {\r\n        var minimumVersion = [4,7,99];\r\n        return function (animationData){\r\n            if(animationData.chars && !checkVersion(minimumVersion,animationData.v)){\r\n                var i, len = animationData.chars.length, j, jLen, k, kLen;\r\n                var pathData, paths;\r\n                for(i = 0; i < len; i += 1) {\r\n                    if(animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                        paths = animationData.chars[i].data.shapes[0].it;\r\n                        jLen = paths.length;\r\n\r\n                        for(j = 0; j < jLen; j += 1) {\r\n                            pathData = paths[j].ks.k;\r\n                            if(!pathData.__converted) {\r\n                                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                                pathData.__converted = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }())\r\n\r\n    var checkColors = (function(){\r\n        var minimumVersion = [4,1,9];\r\n\r\n        function iterateShapes(shapes){\r\n            var i, len = shapes.length;\r\n            var j, jLen;\r\n            for(i=0;i<len;i+=1){\r\n                if(shapes[i].ty === 'gr'){\r\n                    iterateShapes(shapes[i].it);\r\n                }else if(shapes[i].ty === 'fl' || shapes[i].ty === 'st'){\r\n                    if(shapes[i].c.k && shapes[i].c.k[0].i){\r\n                        jLen = shapes[i].c.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(shapes[i].c.k[j].s){\r\n                                shapes[i].c.k[j].s[0] /= 255;\r\n                                shapes[i].c.k[j].s[1] /= 255;\r\n                                shapes[i].c.k[j].s[2] /= 255;\r\n                                shapes[i].c.k[j].s[3] /= 255;\r\n                            }\r\n                            if(shapes[i].c.k[j].e){\r\n                                shapes[i].c.k[j].e[0] /= 255;\r\n                                shapes[i].c.k[j].e[1] /= 255;\r\n                                shapes[i].c.k[j].e[2] /= 255;\r\n                                shapes[i].c.k[j].e[3] /= 255;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        shapes[i].c.k[0] /= 255;\r\n                        shapes[i].c.k[1] /= 255;\r\n                        shapes[i].c.k[2] /= 255;\r\n                        shapes[i].c.k[3] /= 255;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 4){\r\n                    iterateShapes(layers[i].shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }());\r\n\r\n    var checkShapes = (function(){\r\n        var minimumVersion = [4,4,18];\r\n\r\n\r\n\r\n        function completeShapes(arr){\r\n            var i, len = arr.length;\r\n            var j, jLen;\r\n            var hasPaths = false;\r\n            for(i=len-1;i>=0;i-=1){\r\n                if(arr[i].ty == 'sh'){\r\n                    if(arr[i].ks.k.i){\r\n                        arr[i].ks.k.c = arr[i].closed;\r\n                    }else{\r\n                        jLen = arr[i].ks.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(arr[i].ks.k[j].s){\r\n                                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                            }\r\n                            if(arr[i].ks.k[j].e){\r\n                                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                            }\r\n                        }\r\n                    }\r\n                    hasPaths = true;\r\n                }else if(arr[i].ty == 'gr'){\r\n                    completeShapes(arr[i].it);\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var layerData;\r\n            var i, len = layers.length;\r\n            var j, jLen, k, kLen;\r\n            for(i=0;i<len;i+=1){\r\n                layerData = layers[i];\r\n                if(layerData.hasMask){\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(maskProps[j].pt.k.i){\r\n                            maskProps[j].pt.k.c = maskProps[j].cl;\r\n                        }else{\r\n                            kLen = maskProps[j].pt.k.length;\r\n                            for(k=0;k<kLen;k+=1){\r\n                                if(maskProps[j].pt.k[k].s){\r\n                                    maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                                }\r\n                                if(maskProps[j].pt.k[k].e){\r\n                                    maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if(layerData.ty === 4){\r\n                    completeShapes(layerData.shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }());\r\n\r\n    /*function blitPaths(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] /= blitter;\r\n            path.i[i][1] /= blitter;\r\n            path.o[i][0] /= blitter;\r\n            path.o[i][1] /= blitter;\r\n            path.v[i][0] /= blitter;\r\n            path.v[i][1] /= blitter;\r\n        }\r\n    }\r\n\r\n    function blitShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    blitPaths(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            blitPaths(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            blitPaths(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                blitShapes(arr[i].it);\r\n            }else if(arr[i].ty == 'rc'){\r\n                blitProperty(arr[i].p);\r\n                blitProperty(arr[i].s);\r\n            }else if(arr[i].ty == 'st'){\r\n                blitProperty(arr[i].w);\r\n            }else if(arr[i].ty == 'tr'){\r\n                blitProperty(arr[i].p);\r\n                blitProperty(arr[i].sk);\r\n                blitProperty(arr[i].a);\r\n            }else if(arr[i].ty == 'el'){\r\n                blitProperty(arr[i].p);\r\n                blitProperty(arr[i].s);\r\n            }else if(arr[i].ty == 'rd'){\r\n                blitProperty(arr[i].r);\r\n            }else{\r\n\r\n                //console.log(arr[i].ty );\r\n            }\r\n        }\r\n    }\r\n\r\n    function blitText(data, fontManager){\r\n\r\n    }\r\n\r\n    function blitValue(val){\r\n        if(typeof(val) === 'number'){\r\n            val /= blitter;\r\n        } else {\r\n            var i = val.length-1;\r\n            while(i>=0){\r\n                val[i] /= blitter;\r\n                i-=1;\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    function blitProperty(data){\r\n        if(!data.k.length){\r\n            data.k = blitValue(data.k);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            data.k = blitValue(data.k);\r\n        } else {\r\n            var i, len = data.k.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(data.k[i].s){\r\n                    //console.log('pre S: ', data.k[i].s);\r\n                    data.k[i].s = blitValue(data.k[i].s);\r\n                    //console.log('post S: ', data.k[i].s);\r\n                }\r\n                if(data.k[i].e){\r\n                    //console.log('pre E: ', data.k[i].e);\r\n                    data.k[i].e = blitValue(data.k[i].e);\r\n                    //console.log('post E: ', data.k[i].e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function blitLayers(layers,comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData)){\r\n                continue;\r\n            }\r\n            blitProperty(layerData.ks.a);\r\n            blitProperty(layerData.ks.p);\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        blitPaths(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                blitPaths(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                blitPaths(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.w = Math.round(layerData.w/blitter);\r\n                layerData.h = Math.round(layerData.h/blitter);\r\n                blitLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                blitShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                blitText(layerData, fontManager);\r\n            }else if(layerData.ty == 1){\r\n                layerData.sh /= blitter;\r\n                layerData.sw /= blitter;\r\n            } else {\r\n            }\r\n        }\r\n    }\r\n\r\n    function blitAnimation(animationData,comps, fontManager){\r\n        blitLayers(animationData.layers,comps, fontManager);\r\n    }*/\r\n\r\n    function completeData(animationData, fontManager){\r\n        if(animationData.__complete){\r\n            return;\r\n        }\r\n        checkColors(animationData);\r\n        checkText(animationData);\r\n        checkChars(animationData);\r\n        checkShapes(animationData);\r\n        completeLayers(animationData.layers, animationData.assets, fontManager);\r\n        animationData.__complete = true;\r\n        //blitAnimation(animationData, animationData.assets, fontManager);\r\n    }\r\n\r\n    function completeText(data, fontManager){\r\n        if(data.t.a.length === 0 && !('m' in data.t.p)){\r\n            data.singleShape = true;\r\n        }\r\n    }\r\n\r\n    var moduleOb = {};\r\n    moduleOb.completeData = completeData;\r\n\r\n    return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\nvar FontManager = (function(){\r\n\r\n    var maxWaitingTime = 5000;\r\n\r\n    function setUpNode(font, family){\r\n        var parentNode = document.createElement('span');\r\n        parentNode.style.fontFamily    = family;\r\n        var node = document.createElement('span');\r\n        // Characters that vary significantly among different fonts\r\n        node.innerHTML = 'giItT1WQy@!-/#';\r\n        // Visible - so we can measure it - but not on the screen\r\n        parentNode.style.position      = 'absolute';\r\n        parentNode.style.left          = '-10000px';\r\n        parentNode.style.top           = '-10000px';\r\n        // Large font size makes even subtle changes obvious\r\n        parentNode.style.fontSize      = '300px';\r\n        // Reset any font properties\r\n        parentNode.style.fontVariant   = 'normal';\r\n        parentNode.style.fontStyle     = 'normal';\r\n        parentNode.style.fontWeight    = 'normal';\r\n        parentNode.style.letterSpacing = '0';\r\n        parentNode.appendChild(node);\r\n        document.body.appendChild(parentNode);\r\n\r\n        // Remember width with no applied web font\r\n        var width = node.offsetWidth;\r\n        node.style.fontFamily = font + ', '+family;\r\n        return {node:node, w:width, parent:parentNode};\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n        var i, len = this.fonts.length;\r\n        var node, w;\r\n        var loadedCount = len;\r\n        for(i=0;i<len; i+= 1){\r\n            if(this.fonts[i].loaded){\r\n                loadedCount -= 1;\r\n                continue;\r\n            }\r\n            if(this.fonts[i].fOrigin === 't' || this.fonts[i].origin === 2){\r\n                if(window.Typekit && window.Typekit.load && this.typekitLoaded === 0){\r\n                    this.typekitLoaded = 1;\r\n                    try{window.Typekit.load({\r\n                        async: true,\r\n                        active: function() {\r\n                            this.typekitLoaded = 2;\r\n                        }.bind(this)\r\n                    });}catch(e){}\r\n                }\r\n                if(this.typekitLoaded === 2) {\r\n                    this.fonts[i].loaded = true;\r\n                }\r\n            } else if(this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0){\r\n                this.fonts[i].loaded = true;\r\n            } else{\r\n                node = this.fonts[i].monoCase.node;\r\n                w = this.fonts[i].monoCase.w;\r\n                if(node.offsetWidth !== w){\r\n                    loadedCount -= 1;\r\n                    this.fonts[i].loaded = true;\r\n                }else{\r\n                    node = this.fonts[i].sansCase.node;\r\n                    w = this.fonts[i].sansCase.w;\r\n                    if(node.offsetWidth !== w){\r\n                        loadedCount -= 1;\r\n                        this.fonts[i].loaded = true;\r\n                    }\r\n                }\r\n                if(this.fonts[i].loaded){\r\n                    this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n                    this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime){\r\n            setTimeout(checkLoadedFonts.bind(this),20);\r\n        }else{\r\n            setTimeout(function(){this.loaded = true;}.bind(this),0);\r\n\r\n        }\r\n    };\r\n\r\n    function createHelper(def, fontData){\r\n        var tHelper = document.createElementNS(svgNS,'text');\r\n        tHelper.style.fontSize = '100px';\r\n        tHelper.style.fontFamily = fontData.fFamily;\r\n        tHelper.textContent = '1';\r\n        if(fontData.fClass){\r\n            tHelper.style.fontFamily = 'inherit';\r\n            tHelper.className = fontData.fClass;\r\n        } else {\r\n            tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n        def.appendChild(tHelper);\r\n        var tCanvasHelper = document.createElement('canvas').getContext('2d');\r\n        tCanvasHelper.font = '100px '+ fontData.fFamily;\r\n        return tCanvasHelper;\r\n    }\r\n\r\n    function addFonts(fontData, defs){\r\n        if(!fontData){\r\n            this.loaded = true;\r\n            return;\r\n        }\r\n        if(this.chars){\r\n            this.loaded = true;\r\n            this.fonts = fontData.list;\r\n            return;\r\n        }\r\n\r\n        var fontArr = fontData.list;\r\n        var i, len = fontArr.length;\r\n        for(i=0; i<len; i+= 1){\r\n            fontArr[i].loaded = false;\r\n            fontArr[i].monoCase = setUpNode(fontArr[i].fFamily,'monospace');\r\n            fontArr[i].sansCase = setUpNode(fontArr[i].fFamily,'sans-serif');\r\n            if(!fontArr[i].fPath) {\r\n                fontArr[i].loaded = true;\r\n            }else if(fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3){\r\n                var s = document.createElement('style');\r\n                s.type = \"text/css\";\r\n                s.innerHTML = \"@font-face {\" + \"font-family: \"+fontArr[i].fFamily+\"; font-style: normal; src: url('\"+fontArr[i].fPath+\"');}\";\r\n                defs.appendChild(s);\r\n            } else if(fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1){\r\n                //<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>\r\n                var l = document.createElement('link');\r\n                l.type = \"text/css\";\r\n                l.rel = \"stylesheet\";\r\n                l.href = fontArr[i].fPath;\r\n                defs.appendChild(l);\r\n            } else if(fontArr[i].fOrigin === 't' || fontArr[i].origin === 2){\r\n                //<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>\r\n                var sc = document.createElement('script');\r\n                sc.setAttribute('src',fontArr[i].fPath);\r\n                defs.appendChild(sc);\r\n            }\r\n            fontArr[i].helper = createHelper(defs,fontArr[i]);\r\n            this.fonts.push(fontArr[i]);\r\n        }\r\n        checkLoadedFonts.bind(this)();\r\n    }\r\n\r\n    function addChars(chars){\r\n        if(!chars){\r\n            return;\r\n        }\r\n        if(!this.chars){\r\n            this.chars = [];\r\n        }\r\n        var i, len = chars.length;\r\n        var j, jLen = this.chars.length, found;\r\n        for(i=0;i<len;i+=1){\r\n            j = 0;\r\n            found = false;\r\n            while(j<jLen){\r\n                if(this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch){\r\n                    found = true;\r\n                }\r\n                j += 1;\r\n            }\r\n            if(!found){\r\n                this.chars.push(chars[i]);\r\n                jLen += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getCharData(char, style, font){\r\n        var i = 0, len = this.chars.length;\r\n        while( i < len) {\r\n            if(this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font){\r\n                return this.chars[i];\r\n            }\r\n            i+= 1;\r\n        }\r\n    }\r\n\r\n    function measureText(char, fontName, size){\r\n        var fontData = this.getFontByName(fontName);\r\n        var tHelper = fontData.helper;\r\n        //tHelper.textContent = char;\r\n        return tHelper.measureText(char).width*size/100;\r\n        //return tHelper.getComputedTextLength()*size/100;\r\n    }\r\n\r\n    function getFontByName(name){\r\n        var i = 0, len = this.fonts.length;\r\n        while(i<len){\r\n            if(this.fonts[i].fName === name) {\r\n                return this.fonts[i];\r\n            }\r\n            i += 1;\r\n        }\r\n        return 'sans-serif';\r\n    }\r\n\r\n    var Font = function(){\r\n        this.fonts = [];\r\n        this.chars = null;\r\n        this.typekitLoaded = 0;\r\n        this.loaded = false;\r\n        this.initTime = Date.now();\r\n    };\r\n    Font.prototype.addChars = addChars;\r\n    Font.prototype.addFonts = addFonts;\r\n    Font.prototype.getCharData = getCharData;\r\n    Font.prototype.getFontByName = getFontByName;\r\n    Font.prototype.measureText = measureText;\r\n\r\n    return Font;\r\n\r\n}());\nvar PropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateValue(frameNum, iterationIndex, previousValue, caching){\r\n        var offsetTime = this.offsetTime;\r\n        var newValue;\r\n        if(previousValue.constructor === Array) {\r\n            newValue = Array.apply(null,{length:previousValue.length})\r\n        }\r\n        var i = iterationIndex;\r\n        var len = this.keyframes.length- 1,flag = true;\r\n        var keyData, nextKeyData;\r\n\r\n        while(flag){\r\n            keyData = this.keyframes[i];\r\n            nextKeyData = this.keyframes[i+1];\r\n            if(i == len-1 && frameNum >= nextKeyData.t - offsetTime){\r\n                if(keyData.h){\r\n                    keyData = nextKeyData;\r\n                }\r\n                iterationIndex = 0;\r\n                break;\r\n            }\r\n            if((nextKeyData.t - offsetTime) > frameNum){\r\n                iterationIndex = i;\r\n                break;\r\n            }\r\n            if(i < len - 1){\r\n                i += 1;\r\n            }else{\r\n                iterationIndex = 0;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        var k, kLen,perc,jLen, j, fnc;\r\n        if(keyData.to){\r\n\r\n            if(!keyData.bezierData){\r\n                bez.buildBezierData(keyData);\r\n            }\r\n            var bezierData = keyData.bezierData;\r\n            if(frameNum >= nextKeyData.t-offsetTime || frameNum < keyData.t-offsetTime){\r\n                var ind = frameNum >= nextKeyData.t-offsetTime ? bezierData.points.length - 1 : 0;\r\n                kLen = bezierData.points[ind].point.length;\r\n                for(k = 0; k < kLen; k += 1){\r\n                    newValue[k] = bezierData.points[ind].point[k];\r\n                }\r\n                caching._lastBezierData = null;\r\n            }else{\r\n                if(keyData.__fnct){\r\n                    fnc = keyData.__fnct;\r\n                }else{\r\n                    fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y,keyData.n).get;\r\n                    keyData.__fnct = fnc;\r\n                }\r\n                perc = fnc((frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime)));\r\n                var distanceInLine = bezierData.segmentLength*perc;\r\n\r\n                var segmentPerc;\r\n                var addedLength =  (caching.lastFrame < frameNum && caching._lastBezierData === bezierData) ? caching._lastAddedLength : 0;\r\n                j =  (caching.lastFrame < frameNum && caching._lastBezierData === bezierData) ? caching._lastPoint : 0;\r\n                flag = true;\r\n                jLen = bezierData.points.length;\r\n                while(flag){\r\n                    addedLength +=bezierData.points[j].partialLength;\r\n                    if(distanceInLine === 0 || perc === 0 || j == bezierData.points.length - 1){\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            newValue[k] = bezierData.points[j].point[k];\r\n                        }\r\n                        break;\r\n                    }else if(distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j+1].partialLength){\r\n                        segmentPerc = (distanceInLine-addedLength)/(bezierData.points[j+1].partialLength);\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j+1].point[k] - bezierData.points[j].point[k])*segmentPerc;\r\n                        }\r\n                        break;\r\n                    }\r\n                    if(j < jLen - 1){\r\n                        j += 1;\r\n                    }else{\r\n                        flag = false;\r\n                    }\r\n                }\r\n                caching._lastPoint = j;\r\n                caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n                caching._lastBezierData = bezierData;\r\n            }\r\n        }else{\r\n            var outX,outY,inX,inY, keyValue;\r\n            len = keyData.s.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(keyData.h !== 1){\r\n                    if(frameNum >= nextKeyData.t-offsetTime){\r\n                        perc = 1;\r\n                    }else if(frameNum < keyData.t-offsetTime){\r\n                        perc = 0;\r\n                    }else{\r\n                        if(keyData.o.x.constructor === Array){\r\n                            if(!keyData.__fnct){\r\n                                keyData.__fnct = [];\r\n                            }\r\n                            if (!keyData.__fnct[i]) {\r\n                                outX = keyData.o.x[i] || keyData.o.x[0];\r\n                                outY = keyData.o.y[i] || keyData.o.y[0];\r\n                                inX = keyData.i.x[i] || keyData.i.x[0];\r\n                                inY = keyData.i.y[i] || keyData.i.y[0];\r\n                                fnc = BezierFactory.getBezierEasing(outX,outY,inX,inY).get;\r\n                                keyData.__fnct[i] = fnc;\r\n                            } else {\r\n                                fnc = keyData.__fnct[i];\r\n                            }\r\n                        } else {\r\n                            if (!keyData.__fnct) {\r\n                                outX = keyData.o.x;\r\n                                outY = keyData.o.y;\r\n                                inX = keyData.i.x;\r\n                                inY = keyData.i.y;\r\n                                fnc = BezierFactory.getBezierEasing(outX,outY,inX,inY).get;\r\n                                keyData.__fnct = fnc;\r\n                            } else{\r\n                                fnc = keyData.__fnct;\r\n                            }\r\n                        }\r\n                        perc = fnc((frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime)));\r\n                    }\r\n                }\r\n                if(this.sh && keyData.h !== 1){\r\n                    var initP = keyData.s[i];\r\n                    var endP = keyData.e[i];\r\n                    if(initP-endP < -180){\r\n                        initP += 360;\r\n                    } else if(initP-endP > 180){\r\n                        initP -= 360;\r\n                    }\r\n                    keyValue = initP+(endP-initP)*perc;\r\n                } else {\r\n                    keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i]+(keyData.e[i]-keyData.s[i])*perc;\r\n                }\r\n                if(len === 1){\r\n                    newValue = keyValue;\r\n                }else{\r\n                    newValue[i] = keyValue;\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            value: newValue,\r\n            iterationIndex: iterationIndex\r\n        }\r\n    }\r\n\r\n    function getValueAtCurrentTime(){\r\n        if(this.elem.globalData.frameId === this.frameId){\r\n            return;\r\n        }\r\n        this.mdf = false;\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t-this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length- 1].t-this.offsetTime;\r\n        if(!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))){\r\n            var i = this._caching.lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            var renderResult = this.interpolateValue(frameNum, i, this.pv, this._caching);\r\n            this._caching.lastIndex = renderResult.iterationIndex;\r\n            if(this.pv.constructor === Array){\r\n                i = 0;\r\n                while(i<this.v.length){\r\n                    this.pv[i] = renderResult.value[i];\r\n                    this.v[i] = this.mult ? this.pv[i] * this.mult : this.pv[i];\r\n                    if(this.lastPValue[i] !== this.pv[i]) {\r\n                        this.mdf = true;\r\n                        this.lastPValue[i] = this.pv[i];\r\n                    }\r\n                    i += 1;\r\n                }\r\n            } else {\r\n                this.pv = renderResult.value;\r\n                this.v = this.mult ? this.pv*this.mult : this.pv;\r\n                if(this.lastPValue != this.pv){\r\n                    this.mdf = true;\r\n                    this.lastPValue = this.pv;\r\n                }\r\n            }\r\n            \r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function getNoValue(){}\r\n\r\n    function ValueProperty(elem,data, mult){\r\n        this.mult = mult;\r\n        this.v = mult ? data.k * mult : data.k;\r\n        this.pv = data.k;\r\n        this.mdf = false;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.vel = 0;\r\n        this.getValue = getNoValue;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem,data, mult){\r\n        this.mult = mult;\r\n        this.data = data;\r\n        this.mdf = false;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.frameId = -1;\r\n        this.v = Array.apply(null, {length:data.k.length});\r\n        this.pv = Array.apply(null, {length:data.k.length});\r\n        this.lastValue = Array.apply(null, {length:data.k.length});\r\n        var arr = Array.apply(null, {length:data.k.length});\r\n        this.vel = arr.map(function () { return 0 });\r\n        var i, len = data.k.length;\r\n        for(i = 0;i<len;i+=1){\r\n            this.v[i] = mult ? data.k[i] * mult : data.k[i];\r\n            this.pv[i] = data.k[i];\r\n        }\r\n        this.getValue = getNoValue;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult){\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.lastValue = -99999;\r\n        this.lastPValue = -99999;\r\n        this.frameId = -1;\r\n        this._caching={lastFrame:initFrame,lastIndex:0};\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.data = data;\r\n        this.mult = mult;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.v = mult ? data.k[0].s[0]*mult : data.k[0].s[0];\r\n        this.pv = data.k[0].s[0];\r\n        this.getValue = getValueAtCurrentTime;\r\n        this.interpolateValue = interpolateValue;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult){\r\n        var i, len = data.k.length;\r\n        var s, e,to,ti;\r\n        for(i=0;i<len-1;i+=1){\r\n            if(data.k[i].to && data.k[i].s && data.k[i].e){\r\n                s = data.k[i].s;\r\n                e = data.k[i].e;\r\n                to = data.k[i].to;\r\n                ti = data.k[i].ti;\r\n                if((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0] + to[0],s[1] + to[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0] + ti[0],e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0] + to[0],s[1] + to[1],s[2] + to[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0] + ti[0],e[1] + ti[1],e[2] + ti[2]))){\r\n                    data.k[i].to = null;\r\n                    data.k[i].ti = null;\r\n                }\r\n            }\r\n        }\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.mult = mult;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this._caching={lastFrame:initFrame,lastIndex:0};\r\n        this.getValue = getValueAtCurrentTime;\r\n        this.interpolateValue = interpolateValue;\r\n        this.frameId = -1;\r\n        this.v = Array.apply(null, {length:data.k[0].s.length});\r\n        this.pv = Array.apply(null, {length:data.k[0].s.length});\r\n        this.lastValue = Array.apply(null, {length:data.k[0].s.length});\r\n        this.lastPValue = Array.apply(null, {length:data.k[0].s.length});\r\n    }\r\n\r\n    var TransformProperty = (function() {\r\n        function positionGetter() {\r\n            if(this.p) {\r\n                return ExpressionValue(this.p);\r\n            } else {\r\n                return [this.px.v, this.py.v, this.pz ? this.pz.v : 0];\r\n            }\r\n        }\r\n        function xPositionGetter() {\r\n            return ExpressionValue(this.px);\r\n        }\r\n        function yPositionGetter() {\r\n            return ExpressionValue(this.py);\r\n        }\r\n        function zPositionGetter() {\r\n            return ExpressionValue(this.pz);\r\n        }\r\n        function anchorGetter() {\r\n            return ExpressionValue(this.a);\r\n        }\r\n        function orientationGetter() {\r\n            return ExpressionValue(this.or);\r\n        }\r\n        function rotationGetter() {\r\n            if(this.r) {\r\n                return ExpressionValue(this.r, 1/degToRads);\r\n            } else {\r\n                return ExpressionValue(this.rz, 1/degToRads);\r\n            }\r\n        }\r\n        function scaleGetter() {\r\n            return ExpressionValue(this.s, 100);\r\n        }\r\n        function opacityGetter() {\r\n            return ExpressionValue(this.o, 100);\r\n        }\r\n        function skewGetter() {\r\n            return ExpressionValue(this.sk);\r\n        }\r\n        function skewAxisGetter() {\r\n            return ExpressionValue(this.sa);\r\n        }\r\n        function applyToMatrix(mat) {\r\n            var i, len = this.dynamicProperties.length;\r\n            for(i = 0; i < len; i += 1) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i].mdf) {\r\n                    this.mdf = true;\r\n                }\r\n            }\r\n            if (this.a) {\r\n                mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            }\r\n            if (this.s) {\r\n                mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            }\r\n            if (this.r) {\r\n                mat.rotate(-this.r.v);\r\n            } else {\r\n                mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            }\r\n            if (this.data.p.s) {\r\n                if (this.data.p.z) {\r\n                    mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n                } else {\r\n                    mat.translate(this.px.v, this.py.v, 0);\r\n                }\r\n            } else {\r\n                mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n            }\r\n        }\r\n        function processKeys(){\r\n            if (this.elem.globalData.frameId === this.frameId) {\r\n                return;\r\n            }\r\n\r\n            this.mdf = false;\r\n            var i, len = this.dynamicProperties.length;\r\n\r\n            for(i = 0; i < len; i += 1) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i].mdf) {\r\n                    this.mdf = true;\r\n                }\r\n            }\r\n            if (this.mdf) {\r\n                this.v.reset();\r\n                if (this.a) {\r\n                    this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n                }\r\n                if(this.s) {\r\n                    this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n                }\r\n                if (this.sk) {\r\n                    this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n                }\r\n                if (this.r) {\r\n                    this.v.rotate(-this.r.v);\r\n                } else {\r\n                    this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n                }\r\n                if (this.autoOriented && this.p.keyframes && this.p.getValueAtTime) {\r\n                    var v1,v2;\r\n                    if (this.p._caching.lastFrame+this.p.offsetTime <= this.p.keyframes[0].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / this.elem.globalData.frameRate,0);\r\n                        v2 = this.p.getValueAtTime(this.p.keyframes[0].t / this.elem.globalData.frameRate, 0);\r\n                    } else if(this.p._caching.lastFrame+this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / this.elem.globalData.frameRate), 0);\r\n                        v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.01) / this.elem.globalData.frameRate, 0);\r\n                    } else {\r\n                        v1 = this.p.pv;\r\n                        v2 = this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime - 0.01) / this.elem.globalData.frameRate, this.p.offsetTime);\r\n                    }\r\n                    this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n                }\r\n                if(this.data.p.s){\r\n                    if(this.data.p.z) {\r\n                        this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                    } else {\r\n                        this.v.translate(this.px.v, this.py.v, 0);\r\n                    }\r\n                }else{\r\n                    this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n                }\r\n            }\r\n            this.frameId = this.elem.globalData.frameId;\r\n        }\r\n\r\n        function setInverted(){\r\n            this.inverted = true;\r\n            this.iv = new Matrix();\r\n            if(!this.k){\r\n                if(this.data.p.s){\r\n                    this.iv.translate(this.px.v,this.py.v,-this.pz.v);\r\n                }else{\r\n                    this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n                }\r\n                if(this.r){\r\n                    this.iv.rotate(-this.r.v);\r\n                }else{\r\n                    this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n                }\r\n                if(this.s){\r\n                    this.iv.scale(this.s.v[0],this.s.v[1],1);\r\n                }\r\n                if(this.a){\r\n                    this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);\r\n                }\r\n            }\r\n        }\r\n\r\n        function autoOrient(){\r\n            //\r\n            //var prevP = this.getValueAtTime();\r\n        }\r\n\r\n        return function TransformProperty(elem,data,arr){\r\n            this.elem = elem;\r\n            this.frameId = -1;\r\n            this.type = 'transform';\r\n            this.dynamicProperties = [];\r\n            this.mdf = false;\r\n            this.data = data;\r\n            this.getValue = processKeys;\r\n            this.applyToMatrix = applyToMatrix;\r\n            this.setInverted = setInverted;\r\n            this.autoOrient = autoOrient;\r\n            this.v = new Matrix();\r\n            if(data.p.s){\r\n                this.px = PropertyFactory.getProp(elem,data.p.x,0,0,this.dynamicProperties);\r\n                this.py = PropertyFactory.getProp(elem,data.p.y,0,0,this.dynamicProperties);\r\n                if(data.p.z){\r\n                    this.pz = PropertyFactory.getProp(elem,data.p.z,0,0,this.dynamicProperties);\r\n                }\r\n            }else{\r\n                this.p = PropertyFactory.getProp(elem,data.p,1,0,this.dynamicProperties);\r\n            }\r\n            if(data.r) {\r\n                this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this.dynamicProperties);\r\n            } else if(data.rx) {\r\n                this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this.dynamicProperties);\r\n                this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this.dynamicProperties);\r\n                this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this.dynamicProperties);\r\n                this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this.dynamicProperties);\r\n                //sh Indicates it needs to be capped between -180 and 180\r\n                this.or.sh = true;\r\n            }\r\n            if(data.sk){\r\n                this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this.dynamicProperties);\r\n                this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this.dynamicProperties);\r\n            }\r\n            if(data.a) {\r\n                this.a = PropertyFactory.getProp(elem,data.a,1,0,this.dynamicProperties);\r\n            }\r\n            if(data.s) {\r\n                this.s = PropertyFactory.getProp(elem,data.s,1,0.01,this.dynamicProperties);\r\n            }\r\n            if(data.o){\r\n                this.o = PropertyFactory.getProp(elem,data.o,0,0.01,this.dynamicProperties);\r\n            } else {\r\n                this.o = {mdf:false,v:1};\r\n            }\r\n            if(this.dynamicProperties.length){\r\n                arr.push(this);\r\n            }else{\r\n                if(this.a){\r\n                    this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);\r\n                }\r\n                if(this.s){\r\n                    this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]);\r\n                }\r\n                if(this.sk){\r\n                    this.v.skewFromAxis(-this.sk.v,this.sa.v);\r\n                }\r\n                if(this.r){\r\n                    this.v.rotate(-this.r.v);\r\n                }else{\r\n                    this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n                }\r\n                if(this.data.p.s){\r\n                    if(data.p.z) {\r\n                        this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                    } else {\r\n                        this.v.translate(this.px.v, this.py.v, 0);\r\n                    }\r\n                }else{\r\n                    this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n                }\r\n            }\r\n            Object.defineProperty(this, \"position\", { get: positionGetter});\r\n            Object.defineProperty(this, \"xPosition\", { get: xPositionGetter});\r\n            Object.defineProperty(this, \"yPosition\", { get: yPositionGetter});\r\n            Object.defineProperty(this, \"orientation\", { get: orientationGetter});\r\n            Object.defineProperty(this, \"anchorPoint\", { get: anchorGetter});\r\n            Object.defineProperty(this, \"rotation\", { get: rotationGetter});\r\n            Object.defineProperty(this, \"scale\", { get: scaleGetter});\r\n            Object.defineProperty(this, \"opacity\", { get: opacityGetter});\r\n            Object.defineProperty(this, \"skew\", { get: skewGetter});\r\n            Object.defineProperty(this, \"skewAxis\", { get: skewAxisGetter});\r\n        }\r\n    }());\r\n\r\n    function getProp(elem,data,type, mult, arr) {\r\n        var p;\r\n        if(type === 2){\r\n            p = new TransformProperty(elem, data, arr);\r\n        } else if(data.a === 0){\r\n            if(type === 0) {\r\n                p = new ValueProperty(elem,data,mult);\r\n            } else {\r\n                p = new MultiDimensionalProperty(elem,data, mult);\r\n            }\r\n        } else if(data.a === 1){\r\n            if(type === 0) {\r\n                p = new KeyframedValueProperty(elem,data,mult);\r\n            } else {\r\n                p = new KeyframedMultidimensionalProperty(elem,data, mult);\r\n            }\r\n        } else if(!data.k.length){\r\n            p = new ValueProperty(elem,data, mult);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            p = new MultiDimensionalProperty(elem,data, mult);\r\n        }else{\r\n            switch(type){\r\n                case 0:\r\n                    p = new KeyframedValueProperty(elem,data,mult);\r\n                    break;\r\n                case 1:\r\n                    p = new KeyframedMultidimensionalProperty(elem,data,mult);\r\n                    break;\r\n            }\r\n        }\r\n        if(p.k){\r\n            arr.push(p);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    var getGradientProp = (function(){\r\n\r\n        function getValue(forceRender){\r\n            this.prop.getValue();\r\n            this.cmdf = false;\r\n            this.omdf = false;\r\n            if(this.prop.mdf || forceRender){\r\n                var i, len = this.data.p*4;\r\n                var mult, val;\r\n                for(i=0;i<len;i+=1){\r\n                    mult = i%4 === 0 ? 100 : 255;\r\n                    val = Math.round(this.prop.v[i]*mult);\r\n                    if(this.c[i] !== val){\r\n                        this.c[i] = val;\r\n                        this.cmdf = true;\r\n                    }\r\n                }\r\n                if(this.o.length){\r\n                    len = this.prop.v.length;\r\n                    for(i=this.data.p*4;i<len;i+=1){\r\n                        mult = i%2 === 0 ? 100 : 1;\r\n                        val = i%2 === 0 ?  Math.round(this.prop.v[i]*100):this.prop.v[i];\r\n                        if(this.o[i-this.data.p*4] !== val){\r\n                            this.o[i-this.data.p*4] = val;\r\n                            this.omdf = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        function gradientProp(elem,data,arr){\r\n            this.prop = getProp(elem,data.k,1,null,[]);\r\n            this.data = data;\r\n            this.k = this.prop.k;\r\n            this.c = Array.apply(null,{length:data.p*4});\r\n            var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p*4) : data.k.k.length - data.p*4;\r\n            this.o = Array.apply(null,{length:cLength});\r\n            this.cmdf = false;\r\n            this.omdf = false;\r\n            this.getValue = getValue;\r\n            if(this.prop.k){\r\n                arr.push(this);\r\n            }\r\n            this.getValue(true);\r\n        }\r\n\r\n        return function getGradientProp(elem,data,arr){\r\n            return new gradientProp(elem,data,arr);\r\n        }\r\n    }());\r\n\r\n\r\n\r\n\r\n    var DashProperty = (function(){\r\n\r\n        function processKeys(forceRender){\r\n            var i = 0, len = this.dataProps.length;\r\n\r\n            if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n                return;\r\n            }\r\n            this.mdf = false;\r\n            this.frameId = this.elem.globalData.frameId;\r\n            while(i<len){\r\n                if(this.dataProps[i].p.mdf){\r\n                    this.mdf = true;\r\n                    break;\r\n                }\r\n                i+=1;\r\n            }\r\n            if(this.mdf || forceRender){\r\n                if(this.renderer === 'svg') {\r\n                    this.dasharray = '';\r\n                }\r\n                for(i=0;i<len;i+=1){\r\n                    if(this.dataProps[i].n != 'o'){\r\n                        if(this.renderer === 'svg') {\r\n                            this.dasharray += ' ' + this.dataProps[i].p.v;\r\n                        }else{\r\n                            this.dasharray[i] = this.dataProps[i].p.v;\r\n                        }\r\n                    }else{\r\n                        this.dashoffset = this.dataProps[i].p.v;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return function(elem, data,renderer, dynamicProperties){\r\n            this.elem = elem;\r\n            this.frameId = -1;\r\n            this.dataProps = new Array(data.length);\r\n            this.renderer = renderer;\r\n            this.mdf = false;\r\n            this.k = false;\r\n            if(this.renderer === 'svg'){\r\n                this.dasharray = '';\r\n            }else{\r\n\r\n                this.dasharray = new Array(data.length - 1);\r\n            }\r\n            this.dashoffset = 0;\r\n            var i, len = data.length, prop;\r\n            for(i=0;i<len;i+=1){\r\n                prop = PropertyFactory.getProp(elem,data[i].v,0, 0, dynamicProperties);\r\n                this.k = prop.k ? true : this.k;\r\n                this.dataProps[i] = {n:data[i].n,p:prop};\r\n            }\r\n            this.getValue = processKeys;\r\n            if(this.k){\r\n                dynamicProperties.push(this);\r\n            }else{\r\n                this.getValue(true);\r\n            }\r\n\r\n        }\r\n    }());\r\n\r\n    function getDashProp(elem, data,renderer, dynamicProperties) {\r\n        return new DashProperty(elem, data,renderer, dynamicProperties);\r\n    };\r\n\r\n    var TextSelectorProp = (function(){\r\n        var max = Math.max;\r\n        var min = Math.min;\r\n        var floor = Math.floor;\r\n        function updateRange(newCharsFlag){\r\n            this.mdf = newCharsFlag || false;\r\n            if(this.dynamicProperties.length){\r\n                var i, len = this.dynamicProperties.length;\r\n                for(i=0;i<len;i+=1){\r\n                    this.dynamicProperties[i].getValue();\r\n                    if(this.dynamicProperties[i].mdf){\r\n                        this.mdf = true;\r\n                    }\r\n                }\r\n            }\r\n            var totalChars = this.elem.textProperty.currentData ? this.elem.textProperty.currentData.l.length : 0;\r\n            if(newCharsFlag && this.data.r === 2) {\r\n                this.e.v = totalChars;\r\n            }\r\n            var divisor = this.data.r === 2 ? 1 : 100 / totalChars;\r\n            var o = this.o.v/divisor;\r\n            var s = this.s.v/divisor + o;\r\n            var e = (this.e.v/divisor) + o;\r\n            if(s>e){\r\n                var _s = s;\r\n                s = e;\r\n                e = _s;\r\n            }\r\n            this.finalS = s;\r\n            this.finalE = e;\r\n        }\r\n\r\n        function getMult(ind){\r\n            //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n            var easer = BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;\r\n            var mult = 0;\r\n            var s = this.finalS;\r\n            var e = this.finalE;\r\n            var type = this.data.sh;\r\n            if(type == 2){\r\n                if(e === s){\r\n                    mult = ind >= e ? 1 : 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 3){\r\n                if(e === s){\r\n                    mult = ind >= e ? 0 : 1;\r\n                }else{\r\n                    mult = 1 - max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n\r\n                mult = easer(mult);\r\n            }else if(type == 4){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                    if(mult<.5){\r\n                        mult *= 2;\r\n                    }else{\r\n                        mult = 1 - 2*(mult-0.5);\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 5){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    var tot = e - s;\r\n                    /*ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    var x = -tot/2+ind;\r\n                    var a = tot/2;\r\n                    mult = Math.sqrt(1 - (x*x)/(a*a));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 6){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind)/(e-s)))))/2;\r\n                    /*\r\n                     ind = Math.min(Math.max(s,ind),e-1);\r\n                     mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind-s)/(e-1-s)))))/2;\r\n                     mult = Math.max(mult,(1/(e-1-s))/(e-1-s));*/\r\n                }\r\n                mult = easer(mult);\r\n            }else {\r\n                if(ind >= floor(s)){\r\n                    if(ind-s < 0){\r\n                        mult = 1 - (s - ind);\r\n                    }else{\r\n                        mult = max(0,min(e-ind,1));\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }\r\n            return mult*this.a.v;\r\n        }\r\n\r\n        return function TextSelectorProp(elem,data, arr){\r\n            this.mdf = false;\r\n            this.k = false;\r\n            this.data = data;\r\n            this.dynamicProperties = [];\r\n            this.getValue = updateRange;\r\n            this.getMult = getMult;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.finalS = 0;\r\n            this.finalE = 0;\r\n            this.s = PropertyFactory.getProp(elem,data.s || {k:0},0,0,this.dynamicProperties);\r\n            if('e' in data){\r\n                this.e = PropertyFactory.getProp(elem,data.e,0,0,this.dynamicProperties);\r\n            }else{\r\n                this.e = {v:100};\r\n            }\r\n            this.o = PropertyFactory.getProp(elem,data.o || {k:0},0,0,this.dynamicProperties);\r\n            this.xe = PropertyFactory.getProp(elem,data.xe || {k:0},0,0,this.dynamicProperties);\r\n            this.ne = PropertyFactory.getProp(elem,data.ne || {k:0},0,0,this.dynamicProperties);\r\n            this.a = PropertyFactory.getProp(elem,data.a,0,0.01,this.dynamicProperties);\r\n            if(this.dynamicProperties.length){\r\n                arr.push(this);\r\n            }else{\r\n                this.getValue();\r\n            }\r\n        }\r\n    }());\r\n\r\n    function getTextSelectorProp(elem, data,arr) {\r\n        return new TextSelectorProp(elem, data, arr);\r\n    };\r\n\r\n    var ob = {\r\n        getProp: getProp,\r\n        getDashProp: getDashProp,\r\n        getTextSelectorProp: getTextSelectorProp,\r\n        getGradientProp: getGradientProp\r\n    };\r\n    return ob;\r\n}());\nfunction ShapePath(){\r\n\tthis.c = false;\r\n\tthis._length = 0;\r\n\tthis._maxLength = 8;\r\n\tthis.v = Array.apply(null,{length:this._maxLength});\r\n\tthis.o = Array.apply(null,{length:this._maxLength});\r\n\tthis.i = Array.apply(null,{length:this._maxLength});\r\n};\r\n\r\nShapePath.prototype.setPathData = function(closed, len) {\r\n\tthis.c = closed;\r\n\tthis.setLength(len);\r\n\tvar i = 0;\r\n\twhile(i < len){\r\n\t\tthis.v[i] = point_pool.newPoint();\r\n\t\tthis.o[i] = point_pool.newPoint();\r\n\t\tthis.i[i] = point_pool.newPoint();\r\n\t\ti += 1;\r\n\t}\r\n};\r\n\r\nShapePath.prototype.setLength = function(len) {\r\n\twhile(this._maxLength < len) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tthis._length = len;\r\n}\r\n\r\nShapePath.prototype.doubleArrayLength = function() {\r\n\tthis.v = this.v.concat(Array.apply(null,{length:this._maxLength}))\r\n\tthis.i = this.i.concat(Array.apply(null,{length:this._maxLength}))\r\n\tthis.o = this.o.concat(Array.apply(null,{length:this._maxLength}))\r\n\tthis._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function(x, y, type, pos, replace) {\r\n\tvar arr;\r\n\tthis._length = Math.max(this._length, pos + 1);\r\n\tif(this._length >= this._maxLength) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tswitch(type){\r\n\t\tcase 'v':\r\n\t\t\tarr = this.v;\r\n\t\t\tbreak;\r\n\t\tcase 'i':\r\n\t\t\tarr = this.i;\r\n\t\t\tbreak;\r\n\t\tcase 'o':\r\n\t\t\tarr = this.o;\r\n\t\t\tbreak;\r\n\t}\r\n\tif(!arr[pos] || (arr[pos] && !replace)){\r\n\t\tarr[pos] = point_pool.newPoint();\r\n\t}\r\n\tarr[pos][0] = x;\r\n\tarr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function(vX,vY,oX,oY,iX,iY,pos, replace) {\r\n\tthis.setXYAt(vX,vY,'v',pos, replace);\r\n\tthis.setXYAt(oX,oY,'o',pos, replace);\r\n\tthis.setXYAt(iX,iY,'i',pos, replace);\r\n};\nvar ShapePropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, iterationIndex, previousValue, isCurrentRender) {\r\n        var keyPropS,keyPropE,isHold;\r\n        if(frameNum < this.keyframes[0].t-this.offsetTime){\r\n            keyPropS = this.keyframes[0].s[0];\r\n            isHold = true;\r\n            iterationIndex = 0;\r\n        }else if(frameNum >= this.keyframes[this.keyframes.length - 1].t-this.offsetTime){\r\n            if(this.keyframes[this.keyframes.length - 2].h === 1){\r\n                keyPropS = this.keyframes[this.keyframes.length - 1].s[0];\r\n            }else{\r\n                keyPropS = this.keyframes[this.keyframes.length - 2].e[0];\r\n            }\r\n            isHold = true;\r\n        }else{\r\n            var i = iterationIndex;\r\n            var len = this.keyframes.length- 1,flag = true,keyData,nextKeyData, j, jLen, k, kLen;\r\n            while(flag){\r\n                keyData = this.keyframes[i];\r\n                nextKeyData = this.keyframes[i+1];\r\n                if((nextKeyData.t - this.offsetTime) > frameNum){\r\n                    break;\r\n                }\r\n                if(i < len - 1){\r\n                    i += 1;\r\n                }else{\r\n                    flag = false;\r\n                }\r\n            }\r\n            isHold = keyData.h === 1;\r\n            iterationIndex = i;\r\n\r\n            var perc;\r\n            if(!isHold){\r\n                if(frameNum >= nextKeyData.t-this.offsetTime){\r\n                    perc = 1;\r\n                }else if(frameNum < keyData.t-this.offsetTime){\r\n                    perc = 0;\r\n                }else{\r\n                    var fnc;\r\n                    if(keyData.__fnct){\r\n                        fnc = keyData.__fnct;\r\n                    }else{\r\n                        fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;\r\n                        keyData.__fnct = fnc;\r\n                    }\r\n                    perc = fnc((frameNum-(keyData.t-this.offsetTime))/((nextKeyData.t-this.offsetTime)-(keyData.t-this.offsetTime)));\r\n                }\r\n                keyPropE = keyData.e[0];\r\n            }\r\n            keyPropS = keyData.s[0];\r\n        }\r\n        jLen = previousValue._length;\r\n        kLen = keyPropS.i[0].length;\r\n        var hasModified = false;\r\n        var vertexValue;\r\n        for(j=0;j<jLen;j+=1){\r\n            for(k=0;k<kLen;k+=1){\r\n                if(isHold){\r\n                    vertexValue = keyPropS.i[j][k];\r\n                    if(previousValue.i[j][k] !== vertexValue){\r\n                        previousValue.i[j][k] = vertexValue;\r\n                        if(isCurrentRender) {\r\n                            this.pv.i[j][k] = vertexValue;\r\n                        }\r\n                        hasModified = true;\r\n                    }\r\n                    vertexValue = keyPropS.o[j][k];\r\n                    if(previousValue.o[j][k] !== vertexValue){\r\n                        previousValue.o[j][k] = vertexValue;\r\n                        if(isCurrentRender) {\r\n                            this.pv.o[j][k] = vertexValue;\r\n                        }\r\n                        hasModified = true;\r\n                    }\r\n                    vertexValue = keyPropS.v[j][k];\r\n                    if(previousValue.v[j][k] !== vertexValue){\r\n                        previousValue.v[j][k] = vertexValue;\r\n                        if(isCurrentRender) {\r\n                            this.pv.v[j][k] = vertexValue;\r\n                        }\r\n                        hasModified = true;\r\n                    }\r\n                }else{\r\n                    vertexValue = keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;\r\n                    if(previousValue.i[j][k] !== vertexValue){\r\n                        previousValue.i[j][k] = vertexValue;\r\n                        if(isCurrentRender) {\r\n                            this.pv.i[j][k] = vertexValue;\r\n                        }\r\n                        hasModified = true;\r\n                    }\r\n                    vertexValue = keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;\r\n                    if(previousValue.o[j][k] !== vertexValue){\r\n                        previousValue.o[j][k] = vertexValue;\r\n                        if(isCurrentRender) {\r\n                            this.pv.o[j][k] = vertexValue;\r\n                        }\r\n                        hasModified = true;\r\n                    }\r\n                    vertexValue = keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;\r\n                    if(previousValue.v[j][k] !== vertexValue){\r\n                        previousValue.v[j][k] = vertexValue;\r\n                        if(isCurrentRender) {\r\n                            this.pv.v[j][k] = vertexValue;\r\n                        }\r\n                        hasModified = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(hasModified) {\r\n            previousValue.c = keyPropS.c;\r\n        }\r\n        return {\r\n            iterationIndex: iterationIndex,\r\n            hasModified: hasModified\r\n        }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime(){\r\n        if(this.elem.globalData.frameId === this.frameId){\r\n            return;\r\n        }\r\n        this.mdf = false;\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n        if(!(this.lastFrame !== initFrame && ((this.lastFrame < initTime && frameNum < initTime) || (this.lastFrame > endTime && frameNum > endTime)))){\r\n            ////\r\n            var i = this.lastFrame < frameNum ? this._lastIndex : 0;\r\n            var renderResult = this.interpolateShape(frameNum, i, this.v, true);\r\n            ////\r\n            this._lastIndex = renderResult.iterationIndex;\r\n            this.mdf = renderResult.hasModified;\r\n            if(renderResult.hasModified) {\r\n                this.paths = this.localShapeCollection;\r\n            }\r\n        }\r\n        this.lastFrame = frameNum;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function getShapeValue(){\r\n        return this.v;\r\n    }\r\n\r\n    function resetShape(){\r\n        this.paths = this.localShapeCollection;\r\n        if(!this.k){\r\n            this.mdf = false;\r\n        }\r\n    }\r\n\r\n    function ShapeProperty(elem, data, type){\r\n        this.__shapeObject = 1;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.mdf = false;\r\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n        this.v = shape_pool.clone(pathData);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.reset = resetShape;\r\n    }\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = getShapeValue;\r\n\r\n    function KeyframedShapeProperty(elem,data,type){\r\n        this.__shapeObject = 1;\r\n        this.comp = elem.comp;\r\n        this.elem = elem;\r\n        this.offsetTime = elem.data.st;\r\n        this._lastIndex = 0;\r\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n        this.k = true;\r\n        this.kf = true;\r\n        var i, len = this.keyframes[0].s[0].i.length;\r\n        var jLen = this.keyframes[0].s[0].i[0].length;\r\n        this.v = shape_pool.newShape();\r\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.lastFrame = initFrame;\r\n        this.reset = resetShape;\r\n    }\r\n    KeyframedShapeProperty.prototype.getValue = interpolateShapeCurrentTime;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n\r\n    var EllShapeProperty = (function(){\r\n\r\n        var cPoint = roundCorner;\r\n\r\n        function convertEllToPath(){\r\n            var p0 = this.p.v[0], p1 = this.p.v[1], s0 = this.s.v[0]/2, s1 = this.s.v[1]/2;\r\n            if(this.d !== 3){\r\n                this.v.v[0][0] = p0;\r\n                this.v.v[0][1] = p1-s1;\r\n                this.v.v[1][0] = p0 + s0;\r\n                this.v.v[1][1] = p1;\r\n                this.v.v[2][0] = p0;\r\n                this.v.v[2][1] = p1+s1;\r\n                this.v.v[3][0] = p0 - s0;\r\n                this.v.v[3][1] = p1;\r\n                this.v.i[0][0] = p0 - s0*cPoint;\r\n                this.v.i[0][1] = p1 - s1;\r\n                this.v.i[1][0] = p0 + s0;\r\n                this.v.i[1][1] = p1 - s1*cPoint;\r\n                this.v.i[2][0] = p0 + s0*cPoint;\r\n                this.v.i[2][1] = p1 + s1;\r\n                this.v.i[3][0] = p0 - s0;\r\n                this.v.i[3][1] = p1 + s1*cPoint;\r\n                this.v.o[0][0] = p0 + s0*cPoint;\r\n                this.v.o[0][1] = p1 - s1;\r\n                this.v.o[1][0] = p0 + s0;\r\n                this.v.o[1][1] = p1 + s1*cPoint;\r\n                this.v.o[2][0] = p0 - s0*cPoint;\r\n                this.v.o[2][1] = p1 + s1;\r\n                this.v.o[3][0] = p0 - s0;\r\n                this.v.o[3][1] = p1 - s1*cPoint;\r\n            }else{\r\n                this.v.v[0][0] = p0;\r\n                this.v.v[0][1] = p1-s1;\r\n                this.v.v[1][0] = p0 - s0;\r\n                this.v.v[1][1] = p1;\r\n                this.v.v[2][0] = p0;\r\n                this.v.v[2][1] = p1+s1;\r\n                this.v.v[3][0] = p0 + s0;\r\n                this.v.v[3][1] = p1;\r\n                this.v.i[0][0] = p0 + s0*cPoint;\r\n                this.v.i[0][1] = p1 - s1;\r\n                this.v.i[1][0] = p0 - s0;\r\n                this.v.i[1][1] = p1 - s1*cPoint;\r\n                this.v.i[2][0] = p0 - s0*cPoint;\r\n                this.v.i[2][1] = p1 + s1;\r\n                this.v.i[3][0] = p0 + s0;\r\n                this.v.i[3][1] = p1 + s1*cPoint;\r\n                this.v.o[0][0] = p0 - s0*cPoint;\r\n                this.v.o[0][1] = p1 - s1;\r\n                this.v.o[1][0] = p0 - s0;\r\n                this.v.o[1][1] = p1 + s1*cPoint;\r\n                this.v.o[2][0] = p0 + s0*cPoint;\r\n                this.v.o[2][1] = p1 + s1;\r\n                this.v.o[3][0] = p0 + s0;\r\n                this.v.o[3][1] = p1 - s1*cPoint;\r\n            }\r\n        }\r\n\r\n        function processKeys(frameNum){\r\n            var i, len = this.dynamicProperties.length;\r\n            if(this.elem.globalData.frameId === this.frameId){\r\n                return;\r\n            }\r\n            this.mdf = false;\r\n            this.frameId = this.elem.globalData.frameId;\r\n\r\n            for(i=0;i<len;i+=1){\r\n                this.dynamicProperties[i].getValue(frameNum);\r\n                if(this.dynamicProperties[i].mdf){\r\n                    this.mdf = true;\r\n                }\r\n            }\r\n            if(this.mdf){\r\n                this.convertEllToPath();\r\n            }\r\n        }\r\n\r\n        return function EllShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: Array.apply(null,{length:4}),\r\n                i: Array.apply(null,{length:4}),\r\n                o: Array.apply(null,{length:4}),\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newShape();\r\n            this.v.setPathData(true, 4);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.paths = this.localShapeCollection;\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.d = data.d;\r\n            this.dynamicProperties = [];\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.mdf = false;\r\n            this.getValue = processKeys;\r\n            this.convertEllToPath = convertEllToPath;\r\n            this.reset = resetShape;\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this.dynamicProperties);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this.dynamicProperties);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.convertEllToPath();\r\n            }\r\n        }\r\n    }());\r\n\r\n    var StarShapeProperty = (function() {\r\n\r\n        function convertPolygonToPath(){\r\n            var numPts = Math.floor(this.pt.v);\r\n            var angle = Math.PI*2/numPts;\r\n            /*this.v.v.length = numPts;\r\n            this.v.i.length = numPts;\r\n            this.v.o.length = numPts;*/\r\n            var rad = this.or.v;\r\n            var roundness = this.os.v;\r\n            var perimSegment = 2*Math.PI*rad/(numPts*4);\r\n            var i, currentAng = -Math.PI/ 2;\r\n            var dir = this.data.d === 3 ? -1 : 1;\r\n            currentAng += this.r.v;\r\n            this.v._length = 0;\r\n            for(i=0;i<numPts;i+=1){\r\n                var x = rad * Math.cos(currentAng);\r\n                var y = rad * Math.sin(currentAng);\r\n                var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                x +=  + this.p.v[0];\r\n                y +=  + this.p.v[1];\r\n                this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n                /*this.v.v[i] = [x,y];\r\n                this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];*/\r\n                currentAng += angle*dir;\r\n            }\r\n            this.paths.length = 0;\r\n            this.paths[0] = this.v;\r\n        }\r\n\r\n        function convertStarToPath() {\r\n            var numPts = Math.floor(this.pt.v)*2;\r\n            var angle = Math.PI*2/numPts;\r\n            /*this.v.v.length = numPts;\r\n            this.v.i.length = numPts;\r\n            this.v.o.length = numPts;*/\r\n            var longFlag = true;\r\n            var longRad = this.or.v;\r\n            var shortRad = this.ir.v;\r\n            var longRound = this.os.v;\r\n            var shortRound = this.is.v;\r\n            var longPerimSegment = 2*Math.PI*longRad/(numPts*2);\r\n            var shortPerimSegment = 2*Math.PI*shortRad/(numPts*2);\r\n            var i, rad,roundness,perimSegment, currentAng = -Math.PI/ 2;\r\n            currentAng += this.r.v;\r\n            var dir = this.data.d === 3 ? -1 : 1;\r\n            this.v._length = 0;\r\n            for(i=0;i<numPts;i+=1){\r\n                rad = longFlag ? longRad : shortRad;\r\n                roundness = longFlag ? longRound : shortRound;\r\n                perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n                var x = rad * Math.cos(currentAng);\r\n                var y = rad * Math.sin(currentAng);\r\n                var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                x +=  + this.p.v[0];\r\n                y +=  + this.p.v[1];\r\n                this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n\r\n                /*this.v.v[i] = [x,y];\r\n                this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                this.v._length = numPts;*/\r\n                longFlag = !longFlag;\r\n                currentAng += angle*dir;\r\n            }\r\n        }\r\n\r\n        function processKeys() {\r\n            if(this.elem.globalData.frameId === this.frameId){\r\n                return;\r\n            }\r\n            this.mdf = false;\r\n            this.frameId = this.elem.globalData.frameId;\r\n            var i, len = this.dynamicProperties.length;\r\n\r\n            for(i=0;i<len;i+=1){\r\n                this.dynamicProperties[i].getValue();\r\n                if(this.dynamicProperties[i].mdf){\r\n                    this.mdf = true;\r\n                }\r\n            }\r\n            if(this.mdf){\r\n                this.convertToPath();\r\n            }\r\n        }\r\n\r\n        return function StarShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: [],\r\n                i: [],\r\n                o: [],\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newShape();\r\n            this.v.setPathData(true, 0);\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.data = data;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.dynamicProperties = [];\r\n            this.mdf = false;\r\n            this.getValue = processKeys;\r\n            this.reset = resetShape;\r\n            if(data.sy === 1){\r\n                this.ir = PropertyFactory.getProp(elem,data.ir,0,0,this.dynamicProperties);\r\n                this.is = PropertyFactory.getProp(elem,data.is,0,0.01,this.dynamicProperties);\r\n                this.convertToPath = convertStarToPath;\r\n            } else {\r\n                this.convertToPath = convertPolygonToPath;\r\n            }\r\n            this.pt = PropertyFactory.getProp(elem,data.pt,0,0,this.dynamicProperties);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this.dynamicProperties);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,degToRads,this.dynamicProperties);\r\n            this.or = PropertyFactory.getProp(elem,data.or,0,0,this.dynamicProperties);\r\n            this.os = PropertyFactory.getProp(elem,data.os,0,0.01,this.dynamicProperties);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.convertToPath();\r\n            }\r\n        }\r\n    }());\r\n\r\n    var RectShapeProperty = (function() {\r\n        function processKeys(frameNum){\r\n            if(this.elem.globalData.frameId === this.frameId){\r\n                return;\r\n            }\r\n            this.mdf = false;\r\n            this.frameId = this.elem.globalData.frameId;\r\n            var i, len = this.dynamicProperties.length;\r\n\r\n            for(i=0;i<len;i+=1){\r\n                this.dynamicProperties[i].getValue(frameNum);\r\n                if(this.dynamicProperties[i].mdf){\r\n                    this.mdf = true;\r\n                }\r\n            }\r\n            if(this.mdf){\r\n                this.convertRectToPath();\r\n            }\r\n\r\n        }\r\n\r\n        function convertRectToPath(){\r\n            var p0 = this.p.v[0], p1 = this.p.v[1], v0 = this.s.v[0]/2, v1 = this.s.v[1]/2;\r\n            var round = bm_min(v0,v1,this.r.v);\r\n            var cPoint = round*(1-roundCorner);\r\n            this.v._length = 0;\r\n\r\n            if(this.d === 2 || this.d === 1) {\r\n                this.v.setTripleAt(p0+v0, p1-v1+round,p0+v0, p1-v1+round,p0+v0,p1-v1+cPoint,0, true);\r\n                this.v.setTripleAt(p0+v0, p1+v1-round,p0+v0, p1+v1-cPoint,p0+v0, p1+v1-round,1, true);\r\n                if(round!== 0){\r\n                    this.v.setTripleAt(p0+v0-round, p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2, true);\r\n                    this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3, true);\r\n                    this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4, true);\r\n                    this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5, true);\r\n                    this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6, true);\r\n                    this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7, true);\r\n                } else {\r\n                    this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);\r\n                    this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3);\r\n                }\r\n            }else{\r\n                this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0, true);\r\n                if(round!== 0){\r\n                    this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1, true);\r\n                    this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2, true);\r\n                    this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3, true);\r\n                    this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4, true);\r\n                    this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5, true);\r\n                    this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6, true);\r\n                    this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7, true);\r\n                } else {\r\n                    this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1, true);\r\n                    this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2, true);\r\n                    this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3, true);\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        return function RectShapeProperty(elem,data) {\r\n            this.v = shape_pool.newShape();\r\n            this.v.c = true;\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.dynamicProperties = [];\r\n            this.mdf = false;\r\n            this.getValue = processKeys;\r\n            this.convertRectToPath = convertRectToPath;\r\n            this.reset = resetShape;\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this.dynamicProperties);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this.dynamicProperties);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,0,this.dynamicProperties);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.convertRectToPath();\r\n            }\r\n        }\r\n    }());\r\n\r\n    function getShapeProp(elem,data,type, arr){\r\n        var prop;\r\n        if(type === 3 || type === 4){\r\n            var dataProp = type === 3 ? data.pt : data.ks;\r\n            var keys = dataProp.k;\r\n            if(dataProp.a === 1 || keys.length){\r\n                prop = new KeyframedShapeProperty(elem, data, type);\r\n            }else{\r\n                prop = new ShapeProperty(elem, data, type);\r\n            }\r\n        }else if(type === 5){\r\n            prop = new RectShapeProperty(elem, data);\r\n        }else if(type === 6){\r\n            prop = new EllShapeProperty(elem, data);\r\n        }else if(type === 7){\r\n            prop = new StarShapeProperty(elem, data);\r\n        }\r\n        if(prop.k){\r\n            arr.push(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n        return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n        return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n}());\nvar ShapeModifiers = (function(){\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm,factory){\r\n        if(!modifiers[nm]){\r\n            modifiers[nm] = factory;\r\n        }\r\n    }\r\n\r\n    function getModifier(nm,elem, data, dynamicProperties){\r\n        return new modifiers[nm](elem, data, dynamicProperties);\r\n    }\r\n\r\n    return ob;\r\n}());\r\n\r\nfunction ShapeModifier(){}\r\nShapeModifier.prototype.initModifierProperties = function(){};\r\nShapeModifier.prototype.addShapeToModifier = function(){};\r\nShapeModifier.prototype.addShape = function(data){\r\n    if(!this.closed){\r\n        this.shapes.push({shape:data.sh, data: data, localShapeCollection:shapeCollection_pool.newShapeCollection()});\r\n        this.addShapeToModifier(data.sh);\r\n    }\r\n}\r\nShapeModifier.prototype.init = function(elem,data,dynamicProperties){\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.shapes = [];\r\n    this.dynamicProperties = [];\r\n    this.mdf = false;\r\n    this.closed = false;\r\n    this.k = false;\r\n    this.comp = elem.comp;\r\n    this.initModifierProperties(elem,data);\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n        dynamicProperties.push(this);\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n}\nfunction TrimModifier(){};\r\nextendPrototype(ShapeModifier,TrimModifier);\r\nTrimModifier.prototype.processKeys = function(forceRender){\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.mdf = forceRender ? true : false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n    var i, len = this.dynamicProperties.length;\r\n\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n        if(this.dynamicProperties[i].mdf){\r\n            this.mdf = true;\r\n        }\r\n    }\r\n    if(this.mdf || forceRender){\r\n        var o = (this.o.v%360)/360;\r\n        if(o < 0){\r\n            o += 1;\r\n        }\r\n        var s = this.s.v + o;\r\n        var e = this.e.v + o;\r\n        if(s == e){\r\n\r\n        }\r\n        if(s>e){\r\n            var _s = s;\r\n            s = e;\r\n            e = _s;\r\n        }\r\n        this.sValue = s;\r\n        this.eValue = e;\r\n        this.oValue = o;\r\n    }\r\n}\r\nTrimModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.oValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.s = PropertyFactory.getProp(elem,data.s,0,0.01,this.dynamicProperties);\r\n    this.e = PropertyFactory.getProp(elem,data.e,0,0.01,this.dynamicProperties);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,0,this.dynamicProperties);\r\n    this.m = data.m;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function(s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = []\r\n    if(e <= 1){\r\n        segments.push({\r\n            s: s,\r\n            e: e\r\n        })\r\n    }else if(s >= 1){\r\n        segments.push({\r\n            s: s - 1,\r\n            e: e - 1\r\n        })\r\n    }else{\r\n        segments.push({\r\n            s: s,\r\n            e: 1\r\n        })\r\n        segments.push({\r\n            s: 0,\r\n            e: e - 1\r\n        })\r\n    }\r\n    var shapeSegments = [];\r\n    var i, len = segments.length, segmentOb;\r\n    for(i = 0; i < len; i += 1) {\r\n        segmentOb = segments[i];\r\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) {\r\n            \r\n        } else {\r\n            var shapeS, shapeE;\r\n            if(segmentOb.s * totalModifierLength <= addedLength) {\r\n                shapeS = 0;\r\n            } else {\r\n                shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n            }\r\n            if(segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n                shapeE = 1;\r\n            } else {\r\n                shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n            }\r\n            shapeSegments.push([shapeS, shapeE]);\r\n        }\r\n    }\r\n    if(!shapeSegments.length){\r\n        shapeSegments.push([0,0]);\r\n    }\r\n    return shapeSegments;\r\n}\r\n\r\nTrimModifier.prototype.processShapes = function(firstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var s = this.sValue;\r\n    var e = this.eValue;\r\n    var pathsData,pathData, totalShapeLength, totalModifierLength = 0;\r\n\r\n    if(e === s){\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].localShapeCollection.releaseShapes();\r\n            this.shapes[i].shape.mdf = true;\r\n            this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n        }\r\n    } else if(!((e === 1 && s === 0) || (e===0 && s === 1))){\r\n        var segments = [], shapeData, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            if(!shapeData.shape.mdf && !this.mdf && !firstFrame && this.m !== 2){\r\n                shapeData.shape.paths = shapeData.localShapeCollection;\r\n            } else {\r\n                shapePaths = shapeData.shape.paths;\r\n                jLen = shapePaths._length;\r\n                totalShapeLength = 0;\r\n                if(!shapeData.shape.mdf && shapeData.pathsData){\r\n                    totalShapeLength = shapeData.totalShapeLength;\r\n                } else {\r\n                    pathsData = [];\r\n                    for(j=0;j<jLen;j+=1){\r\n                        pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n                        pathsData.push(pathData);\r\n                        totalShapeLength += pathData.totalLength;\r\n                    }\r\n                    shapeData.totalShapeLength = totalShapeLength;\r\n                    shapeData.pathsData = pathsData;\r\n                }\r\n\r\n                totalModifierLength += totalShapeLength;\r\n                shapeData.shape.mdf = true;\r\n            }\r\n        }\r\n        var shapeS = s, shapeE = e, addedLength = 0;\r\n        var j, jLen;\r\n        for(i = len - 1; i >= 0; i -= 1){\r\n            shapeData = this.shapes[i];\r\n            if (shapeData.shape.mdf) {\r\n                localShapeCollection = shapeData.localShapeCollection;\r\n                localShapeCollection.releaseShapes();\r\n                if(this.m === 2 && len > 1) {\r\n                    var edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n                    addedLength += shapeData.totalShapeLength;\r\n                } else {\r\n                    edges = [[shapeS, shapeE]]\r\n                }\r\n                jLen = edges.length;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    shapeS = edges[j][0];\r\n                    shapeE = edges[j][1];\r\n                    segments.length = 0;\r\n                    if(shapeE <= 1){\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength * shapeE\r\n                        })\r\n                    }else if(shapeS >= 1){\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * (shapeS - 1),\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        })\r\n                    }else{\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength\r\n                        })\r\n                        segments.push({\r\n                            s:0,\r\n                            e:shapeData.totalShapeLength*(shapeE - 1)\r\n                        })\r\n                    }\r\n                    var newShapesData = this.addShapes(shapeData,segments[0]);\r\n                    if (segments[0].s !== segments[0].e) {\r\n                        var lastPos;\r\n                        if(segments.length > 1){\r\n                            if(shapeData.shape.v.c){\r\n                                var lastShape = newShapesData.pop();\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData,segments[1], lastShape);\r\n                            } else {\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData,segments[1]);\r\n                            }\r\n                        } \r\n                        this.addPaths(newShapesData, localShapeCollection);\r\n                    }\r\n                    \r\n                }\r\n                shapeData.shape.paths = localShapeCollection;\r\n            }\r\n        }\r\n    } else if(this.mdf){\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].shape.mdf = true;\r\n        }\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this.mdf = false;\r\n    }\r\n}\r\n\r\nTrimModifier.prototype.addPaths = function(newPaths, localShapeCollection) {\r\n    var i, len = newPaths.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        localShapeCollection.addShape(newPaths[i])\r\n    }\r\n}\r\n\r\nTrimModifier.prototype.addSegment = function(pt1,pt2,pt3,pt4,shapePath,pos, newShape) {\r\n    /*console.log(pt1, 'vertex: v, at: ', pos);\r\n    console.log(pt2, 'vertex: o, at: ', pos);\r\n    console.log(pt3, 'vertex: i, at: ', pos + 1);\r\n    console.log(pt4, 'vertex: v, at: ', pos + 1);\r\n    console.log('newShape: ', newShape);*/\r\n    shapePath.setXYAt(pt2[0],pt2[1],'o',pos);\r\n    shapePath.setXYAt(pt3[0],pt3[1],'i',pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(pt1[0],pt1[1],'v',pos);\r\n    }\r\n    shapePath.setXYAt(pt4[0],pt4[1],'v',pos + 1);\r\n}\r\n\r\nTrimModifier.prototype.addShapes = function(shapeData, shapeSegment, shapePath){\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i, len = shapeData.shape.paths._length, j, jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData,segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n    if(!shapePath){\r\n        shapePath = shape_pool.newShape();\r\n        segmentCount = 0;\r\n        initPos = 0;\r\n    } else {\r\n        segmentCount = shapePath._length;\r\n        initPos = shapePath._length;\r\n    }\r\n    shapes.push(shapePath);\r\n    for(i=0;i<len;i+=1){\r\n        lengths = pathsData[i].lengths;\r\n        shapePath.c = shapePaths[i].c;\r\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n        for(j=1;j<jLen;j+=1){\r\n            currentLengthData = lengths[j-1];\r\n            if(addedLength + currentLengthData.addedLength < shapeSegment.s){\r\n                addedLength += currentLengthData.addedLength;\r\n                shapePath.c = false;\r\n            } else if(addedLength > shapeSegment.e){\r\n                shapePath.c = false;\r\n                break;\r\n            } else {\r\n                if(shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength){\r\n                    this.addSegment(shapePaths[i].v[j-1],shapePaths[i].o[j-1],shapePaths[i].i[j],shapePaths[i].v[j],shapePath,segmentCount,newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j-1],shapePaths[i].v[j],shapePaths[i].o[j-1],shapePaths[i].i[j], (shapeSegment.s - addedLength)/currentLengthData.addedLength,(shapeSegment.e - addedLength)/currentLengthData.addedLength, lengths[j-1]);\r\n                    this.addSegment(segment.pt1,segment.pt3,segment.pt4,segment.pt2,shapePath,segmentCount,newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n                addedLength += currentLengthData.addedLength;\r\n                segmentCount += 1;\r\n            }\r\n        }\r\n        if(shapePaths[i].c){\r\n            currentLengthData = lengths[j-1];\r\n            if(addedLength <= shapeSegment.e){\r\n                var segmentLength = lengths[j-1].addedLength;\r\n                if(shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength){\r\n                    this.addSegment(shapePaths[i].v[j-1],shapePaths[i].o[j-1],shapePaths[i].i[0],shapePaths[i].v[0],shapePath,segmentCount,newShape);\r\n                    newShape = false;\r\n                }else{\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j-1],shapePaths[i].v[0],shapePaths[i].o[j-1],shapePaths[i].i[0], (shapeSegment.s - addedLength)/segmentLength,(shapeSegment.e - addedLength)/segmentLength, lengths[j-1]);\r\n                    this.addSegment(segment.pt1,segment.pt3,segment.pt4,segment.pt2,shapePath,segmentCount,newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n            } else {\r\n                shapePath.c = false;\r\n            }\r\n            addedLength += currentLengthData.addedLength;\r\n            segmentCount += 1;\r\n        }\r\n        if(shapePath._length){\r\n            shapePath.setXYAt(shapePath.v[initPos][0],shapePath.v[initPos][1],'i',initPos);\r\n            shapePath.setXYAt(shapePath.v[shapePath._length - 1][0],shapePath.v[shapePath._length - 1][1],'o',shapePath._length - 1);\r\n        }\r\n        if(addedLength > shapeSegment.e){\r\n            break;\r\n        }\r\n        if(i<len-1){\r\n            shapePath = shape_pool.newShape();\r\n            newShape = true;\r\n            shapes.push(shapePath);\r\n            segmentCount = 0;\r\n        }\r\n    }\r\n    return shapes;\r\n\r\n}\r\n\r\n\r\nShapeModifiers.registerModifier('tm',TrimModifier);\nfunction RoundCornersModifier(){};\r\nextendPrototype(ShapeModifier,RoundCornersModifier);\r\nRoundCornersModifier.prototype.processKeys = function(forceRender){\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.mdf = forceRender ? true : false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n    var i, len = this.dynamicProperties.length;\r\n\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n        if(this.dynamicProperties[i].mdf){\r\n            this.mdf = true;\r\n        }\r\n    }\r\n}\r\nRoundCornersModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem,data.r,0,null,this.dynamicProperties);\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function(path, round){\r\n    var cloned_path = shape_pool.newShape();\r\n    cloned_path.c = path.c;\r\n    var i, len = path._length;\r\n    var currentV,currentI,currentO,closerV, newV,newO,newI,distance,newPosPerc,index = 0;\r\n    var vX,vY,oX,oY,iX,iY;\r\n    for(i=0;i<len;i+=1){\r\n        currentV = path.v[i];\r\n        currentO = path.o[i];\r\n        currentI = path.i[i];\r\n        if(currentV[0]===currentO[0] && currentV[1]===currentO[1] && currentV[0]===currentI[0] && currentV[1]===currentI[1]){\r\n            if((i===0 || i === len - 1) && !path.c){\r\n                cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);\r\n                /*cloned_path.v[index] = currentV;\r\n                cloned_path.o[index] = currentO;\r\n                cloned_path.i[index] = currentI;*/\r\n                index += 1;\r\n            } else {\r\n                if(i===0){\r\n                    closerV = path.v[len-1];\r\n                } else {\r\n                    closerV = path.v[i-1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = iX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = iY = currentV[1]-(currentV[1]-closerV[1])*newPosPerc;\r\n                oX = vX-(vX-currentV[0])*roundCorner;\r\n                oY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n\r\n                if(i === len - 1){\r\n                    closerV = path.v[0];\r\n                } else {\r\n                    closerV = path.v[i+1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = oX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = oY = currentV[1]+(closerV[1]-currentV[1])*newPosPerc;\r\n                iX = vX-(vX-currentV[0])*roundCorner;\r\n                iY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n            }\r\n        } else {\r\n            cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);\r\n            index += 1;\r\n        }\r\n    }\r\n    return cloned_path;\r\n}\r\n\r\nRoundCornersModifier.prototype.processShapes = function(firstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if(rd !== 0){\r\n        var shapeData, newPaths, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            newPaths = shapeData.shape.paths;\r\n            localShapeCollection = shapeData.localShapeCollection;\r\n            if(!(!shapeData.shape.mdf && !this.mdf && !firstFrame)){\r\n                localShapeCollection.releaseShapes();\r\n                shapeData.shape.mdf = true;\r\n                shapePaths = shapeData.shape.paths.shapes;\r\n                jLen = shapeData.shape.paths._length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    localShapeCollection.addShape(this.processPath(shapePaths[j],rd));\r\n                }\r\n            }\r\n            shapeData.shape.paths = shapeData.localShapeCollection;\r\n        }\r\n\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this.mdf = false;\r\n    }\r\n}\r\n\r\n\r\nShapeModifiers.registerModifier('rd',RoundCornersModifier);\nfunction RepeaterModifier(){};\r\nRepeaterModifier.prototype.processKeys = function(forceRender){\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.mdf = forceRender ? true : false;\r\n    var i, len = this.dynamicProperties.length;\r\n\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n        if(this.dynamicProperties[i].mdf){\r\n            this.mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem,data.c,0,null,this.dynamicProperties);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,null,this.dynamicProperties);\r\n    this.tr = PropertyFactory.getProp(elem,data.tr,2,null,this.dynamicProperties);\r\n    this.data = data;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function(pMatrix, rMatrix, sMatrix, transform, perc, inv){\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1/scaleX : scaleX, inv ? 1/scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n}\r\n\r\nRepeaterModifier.prototype.init = function(elem, arr, pos, elemsData, dynamicProperties) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.dynamicProperties = [];\r\n    this.frameId = -1;\r\n    this.initModifierProperties(elem,arr[pos]);\r\n    var cont = 0;\r\n    while(pos>0){\r\n        pos -= 1;\r\n        //this._elements.unshift(arr.splice(pos,1)[0]);\r\n        this._elements.unshift(arr[pos]);\r\n        cont += 1;\r\n    }\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n        dynamicProperties.push(this);\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n}\r\n\r\nRepeaterModifier.prototype.resetElements = function(elements){\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._processed = false;\r\n        if(elements[i].ty === 'gr'){\r\n            this.resetElements(elements[i].it);\r\n        }\r\n    }\r\n}\r\n\r\nRepeaterModifier.prototype.cloneElements = function(elements){\r\n    var i, len = elements.length;\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n}\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function(elements, renderFlag) {\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len ; i += 1) {\r\n        elements[i]._render = renderFlag;\r\n        if(elements[i].ty === 'gr') {\r\n            this.changeGroupRender(elements[i].it, renderFlag);\r\n        }\r\n    }\r\n}\r\n\r\nRepeaterModifier.prototype.processShapes = function(firstFrame){\r\n\r\n    if(this.elem.globalData.frameId === this.frameId){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    if(!this.dynamicProperties.length && !firstFrame){\r\n        this.mdf = false;\r\n    }\r\n    if(this.mdf){\r\n        var copies = Math.ceil(this.c.v);\r\n        if(this._groups.length < copies){\r\n            while(this._groups.length < copies){\r\n                var group = {\r\n                    it:this.cloneElements(this._elements),\r\n                    ty:'gr'\r\n                }\r\n                group.it.push({\"a\":{\"a\":0,\"ix\":1,\"k\":[0,0]},\"nm\":\"Transform\",\"o\":{\"a\":0,\"ix\":7,\"k\":100},\"p\":{\"a\":0,\"ix\":2,\"k\":[0,0]},\"r\":{\"a\":0,\"ix\":6,\"k\":0},\"s\":{\"a\":0,\"ix\":3,\"k\":[100,100]},\"sa\":{\"a\":0,\"ix\":5,\"k\":0},\"sk\":{\"a\":0,\"ix\":4,\"k\":0},\"ty\":\"tr\"});\r\n                \r\n                this.arr.splice(0,0,group);\r\n                this._groups.splice(0,0,group);\r\n                this._currentCopies += 1;\r\n            }\r\n            this.elem.reloadShapes();\r\n        }\r\n        var i, cont = 0, renderFlag;\r\n        for(i = 0; i  <= this._groups.length - 1; i += 1){\r\n            renderFlag = cont < copies;\r\n            this._groups[i]._render = renderFlag;\r\n            this.changeGroupRender(this._groups[i].it, renderFlag);\r\n            cont += 1;\r\n        }\r\n        \r\n        this._currentCopies = copies;\r\n        this.elem.firstFrame = true;\r\n        ////\r\n\r\n        var offset = this.o.v;\r\n        var offsetModulo = offset%1;\r\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n        var k;\r\n        var tMat = this.tr.v.props;\r\n        var pProps = this.pMatrix.props;\r\n        var rProps = this.rMatrix.props;\r\n        var sProps = this.sMatrix.props;\r\n        this.pMatrix.reset();\r\n        this.rMatrix.reset();\r\n        this.sMatrix.reset();\r\n        this.tMatrix.reset();\r\n        this.matrix.reset();\r\n        var iteration = 0;\r\n\r\n        if(offset > 0) {\r\n            while(iteration<roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                iteration += 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n                iteration += offsetModulo;\r\n            }\r\n        } else if(offset < 0) {\r\n            while(iteration>roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n                iteration -= 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, - offsetModulo, true);\r\n                iteration -= offsetModulo;\r\n            }\r\n        }\r\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n        var dir = this.data.m === 1 ? 1 : -1;\r\n        cont = this._currentCopies;\r\n        while(cont){\r\n            if(iteration !== 0){\r\n                if((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)){\r\n                    this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                }\r\n                this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);\r\n                this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);\r\n                this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);\r\n                var items = this.elemsData[i].it;\r\n                var itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n                var j, jLen = itemsTransform.length;\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n                this.matrix.reset();\r\n            } else {\r\n                this.matrix.reset();\r\n                var items = this.elemsData[i].it;\r\n                var itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n                var j, jLen = itemsTransform.length;\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n            }\r\n            iteration += 1;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    }\r\n}\r\n\r\nRepeaterModifier.prototype.addShape = function(){}\r\n\r\nShapeModifiers.registerModifier('rp',RepeaterModifier);\nfunction ShapeCollection(){\r\n\tthis._length = 0;\r\n\tthis._maxLength = 4;\r\n\tthis.shapes = Array.apply(null,{length:this._maxLength});\r\n};\r\n\r\nShapeCollection.prototype.addShape = function(shapeData){\r\n\tif(this._length === this._maxLength){\r\n\t\tthis.shapes = this.shapes.concat(Array.apply(null,{length:this._maxLength}));\r\n\t\tthis._maxLength *= 2;\r\n\t}\r\n\tthis.shapes[this._length] = shapeData;\r\n\tthis._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function(){\r\n\tvar i;\r\n\tfor(i = 0; i < this._length; i += 1) {\r\n\t\tshape_pool.release(this.shapes[i]);\r\n\t}\r\n\tthis._length = 0;\r\n};\nvar ImagePreloader = (function(){\r\n\r\n    var imagesLoadedCb;\r\n\r\n    function imageLoaded(){\r\n        this.loadedAssets += 1;\r\n        if(this.loadedAssets === this.totalImages){\r\n            if(imagesLoadedCb) {\r\n                imagesLoadedCb(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getAssetsPath(assetData){\r\n        var path = '';\r\n        if(this.assetsPath){\r\n            var imagePath = assetData.p;\r\n            if(imagePath.indexOf('images/') !== -1){\r\n                imagePath = imagePath.split('/')[1];\r\n            }\r\n            path = this.assetsPath + imagePath;\r\n        } else {\r\n            path = this.path;\r\n            path += assetData.u ? assetData.u : '';\r\n            path += assetData.p;\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function loadImage(path){\r\n        var img = document.createElement('img');\r\n        img.addEventListener('load', imageLoaded.bind(this), false);\r\n        img.addEventListener('error', imageLoaded.bind(this), false);\r\n        img.src = path;\r\n    }\r\n    function loadAssets(assets, cb){\r\n        imagesLoadedCb = cb;\r\n        this.totalAssets = assets.length;\r\n        var i;\r\n        for(i=0;i<this.totalAssets;i+=1){\r\n            if(!assets[i].layers){\r\n                loadImage.bind(this)(getAssetsPath.bind(this)(assets[i]));\r\n                this.totalImages += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPath(path){\r\n        this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path){\r\n        this.assetsPath = path || '';\r\n    }\r\n\r\n    return function ImagePreloader(){\r\n        this.loadAssets = loadAssets;\r\n        this.setAssetsPath = setAssetsPath;\r\n        this.setPath = setPath;\r\n        this.assetsPath = '';\r\n        this.path = '';\r\n        this.totalAssets = 0;\r\n        this.totalImages = 0;\r\n        this.loadedAssets = 0;\r\n    }\r\n}());\nvar featureSupport = (function(){\r\n\tvar ob = {\r\n\t\tmaskType: true\r\n\t}\r\n\tif (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n\t   ob.maskType = false;\r\n\t}\r\n\treturn ob;\r\n}());\nvar filtersFactory = (function(){\r\n\tvar ob = {};\r\n\tob.createFilter = createFilter;\r\n\tob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n\tfunction createFilter(filId){\r\n        \tvar fil = document.createElementNS(svgNS,'filter');\r\n        \tfil.setAttribute('id',filId);\r\n                fil.setAttribute('filterUnits','objectBoundingBox');\r\n                fil.setAttribute('x','0%');\r\n                fil.setAttribute('y','0%');\r\n                fil.setAttribute('width','100%');\r\n                fil.setAttribute('height','100%');\r\n                return fil;\r\n\t}\r\n\r\n\tfunction createAlphaToLuminanceFilter(){\r\n                var feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n                feColorMatrix.setAttribute('type','matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n                feColorMatrix.setAttribute('values','0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n                return feColorMatrix;\r\n\t}\r\n\r\n\treturn ob;\r\n}())\nfunction TextAnimatorProperty(textData, renderType, elem){\r\n    this.mdf = false;\r\n    this._firstFrame = true;\r\n\tthis._hasMaskedPath = false;\r\n\tthis._frameId = -1;\r\n\tthis._dynamicProperties = [];\r\n\tthis._textData = textData;\r\n\tthis._renderType = renderType;\r\n\tthis._elem = elem;\r\n\tthis._animatorsData = Array.apply(null,{length:this._textData.a.length});\r\n\tthis._pathData = {}\r\n\tthis._moreOptions = {\r\n\t\talignment: {}\r\n\t};\r\n\tthis.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function(dynamicProperties){\r\n    var i, len = this._textData.a.length, animatorData, animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n    for(i=0;i<len;i+=1){\r\n        animatorProps = this._textData.a[i];\r\n        animatorData = {\r\n            a: {},\r\n            s: {}\r\n        };\r\n        if('r' in animatorProps.a) {\r\n            animatorData.a.r = getProp(this._elem,animatorProps.a.r,0,degToRads,this._dynamicProperties);\r\n        }\r\n        if('rx' in animatorProps.a) {\r\n            animatorData.a.rx = getProp(this._elem,animatorProps.a.rx,0,degToRads,this._dynamicProperties);\r\n        }\r\n        if('ry' in animatorProps.a) {\r\n            animatorData.a.ry = getProp(this._elem,animatorProps.a.ry,0,degToRads,this._dynamicProperties);\r\n        }\r\n        if('sk' in animatorProps.a) {\r\n            animatorData.a.sk = getProp(this._elem,animatorProps.a.sk,0,degToRads,this._dynamicProperties);\r\n        }\r\n        if('sa' in animatorProps.a) {\r\n            animatorData.a.sa = getProp(this._elem,animatorProps.a.sa,0,degToRads,this._dynamicProperties);\r\n        }\r\n        if('s' in animatorProps.a) {\r\n            animatorData.a.s = getProp(this._elem,animatorProps.a.s,1,0.01,this._dynamicProperties);\r\n        }\r\n        if('a' in animatorProps.a) {\r\n            animatorData.a.a = getProp(this._elem,animatorProps.a.a,1,0,this._dynamicProperties);\r\n        }\r\n        if('o' in animatorProps.a) {\r\n            animatorData.a.o = getProp(this._elem,animatorProps.a.o,0,0.01,this._dynamicProperties);\r\n        }\r\n        if('p' in animatorProps.a) {\r\n            animatorData.a.p = getProp(this._elem,animatorProps.a.p,1,0,this._dynamicProperties);\r\n        }\r\n        if('sw' in animatorProps.a) {\r\n            animatorData.a.sw = getProp(this._elem,animatorProps.a.sw,0,0,this._dynamicProperties);\r\n        }\r\n        if('sc' in animatorProps.a) {\r\n            animatorData.a.sc = getProp(this._elem,animatorProps.a.sc,1,0,this._dynamicProperties);\r\n        }\r\n        if('fc' in animatorProps.a) {\r\n            animatorData.a.fc = getProp(this._elem,animatorProps.a.fc,1,0,this._dynamicProperties);\r\n        }\r\n        if('fh' in animatorProps.a) {\r\n            animatorData.a.fh = getProp(this._elem,animatorProps.a.fh,0,0,this._dynamicProperties);\r\n        }\r\n        if('fs' in animatorProps.a) {\r\n            animatorData.a.fs = getProp(this._elem,animatorProps.a.fs,0,0.01,this._dynamicProperties);\r\n        }\r\n        if('fb' in animatorProps.a) {\r\n            animatorData.a.fb = getProp(this._elem,animatorProps.a.fb,0,0.01,this._dynamicProperties);\r\n        }\r\n        if('t' in animatorProps.a) {\r\n            animatorData.a.t = getProp(this._elem,animatorProps.a.t,0,0,this._dynamicProperties);\r\n        }\r\n        animatorData.s = PropertyFactory.getTextSelectorProp(this._elem,animatorProps.s,this._dynamicProperties);\r\n        animatorData.s.t = animatorProps.s.t;\r\n        this._animatorsData[i] = animatorData;\r\n    }\r\n    if(this._textData.p && 'm' in this._textData.p){\r\n        this._pathData = {\r\n            f: getProp(this._elem,this._textData.p.f,0,0,this._dynamicProperties),\r\n            l: getProp(this._elem,this._textData.p.l,0,0,this._dynamicProperties),\r\n            r: this._textData.p.r,\r\n            m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n        };\r\n        this._hasMaskedPath = true;\r\n    } else {\r\n        this._hasMaskedPath = false;\r\n    }\r\n    this._moreOptions.alignment = getProp(this._elem,this._textData.m.a,1,0,this._dynamicProperties);\r\n    if(this._dynamicProperties.length) {\r\n    \tdynamicProperties.push(this);\r\n    }\r\n}\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function(documentData, lettersChangedFlag){\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n    if(!this.mdf && !this._firstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m.mdf)) {\r\n        return;\r\n    }\r\n    this._firstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var data = this.data;\r\n    var xPos,yPos;\r\n    var i, len;\r\n    var letters = documentData.l;\r\n    if(this._hasMaskedPath) {\r\n        var mask = this._pathData.m;\r\n        if(!this._pathData.n || this._pathData.mdf){\r\n            var paths = mask.v;\r\n            if(this._pathData.r){\r\n                paths = reversePath(paths);\r\n            }\r\n            var pathInfo = {\r\n                tLength: 0,\r\n                segments: []\r\n            };\r\n            len = paths._length - 1;\r\n            var pathData;\r\n            var totalLength = 0;\r\n            for (i = 0; i < len; i += 1) {\r\n                pathData = {\r\n                    s: paths.v[i],\r\n                    e: paths.v[i + 1],\r\n                    to: [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n                    ti: [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]\r\n                };\r\n                bez.buildBezierData(pathData);\r\n                pathInfo.tLength += pathData.bezierData.segmentLength;\r\n                pathInfo.segments.push(pathData);\r\n                totalLength += pathData.bezierData.segmentLength;\r\n            }\r\n            i = len;\r\n            if (mask.v.c) {\r\n                pathData = {\r\n                    s: paths.v[i],\r\n                    e: paths.v[0],\r\n                    to: [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n                    ti: [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]\r\n                };\r\n                bez.buildBezierData(pathData);\r\n                pathInfo.tLength += pathData.bezierData.segmentLength;\r\n                pathInfo.segments.push(pathData);\r\n                totalLength += pathData.bezierData.segmentLength;\r\n            }\r\n            this._pathData.pi = pathInfo;\r\n        }\r\n        var pathInfo = this._pathData.pi;\r\n\r\n        var currentLength = this._pathData.f.v, segmentInd = 0, pointInd = 1, currentPoint, prevPoint, points;\r\n        var segmentLength = 0, flag = true;\r\n        var segments = pathInfo.segments;\r\n        if (currentLength < 0 && mask.v.c) {\r\n            if (pathInfo.tLength < Math.abs(currentLength)) {\r\n                currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n            }\r\n            segmentInd = segments.length - 1;\r\n            points = segments[segmentInd].bezierData.points;\r\n            pointInd = points.length - 1;\r\n            while (currentLength < 0) {\r\n                currentLength += points[pointInd].partialLength;\r\n                pointInd -= 1;\r\n                if (pointInd < 0) {\r\n                    segmentInd -= 1;\r\n                    points = segments[segmentInd].bezierData.points;\r\n                    pointInd = points.length - 1;\r\n                }\r\n            }\r\n\r\n        }\r\n        points = segments[segmentInd].bezierData.points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        var partialLength = currentPoint.partialLength;\r\n        var perc, tanAngle;\r\n    }\r\n\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.s*1.2*.714;\r\n    var firstLine = true;\r\n    var animatorProps, animatorSelector;\r\n    var j, jLen;\r\n    var letterValue;\r\n\r\n    jLen = animators.length;\r\n    if (lettersChangedFlag) {\r\n        for (j = 0; j < jLen; j += 1) {\r\n            animatorSelector = animators[j].s;\r\n            animatorSelector.getValue(true);\r\n        }\r\n    }\r\n    var lastLetter;\r\n\r\n    var mult, ind = -1, offf, xPathPos, yPathPos;\r\n    var initPathPos = currentLength,initSegmentInd = segmentInd, initPointInd = pointInd, currentLine = -1;\r\n    var elemOpacity;\r\n    var sc,sw,fc,k;\r\n    var lineLength = 0;\r\n    var letterSw,letterSc,letterFc,letterM = '',letterP = this.defaultPropsArray,letterO;\r\n    for( i = 0; i < len; i += 1) {\r\n        matrixHelper.reset();\r\n        elemOpacity = 1;\r\n        if(letters[i].n) {\r\n            xPos = 0;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            currentLength = initPathPos ;\r\n            firstLine = false;\r\n            lineLength = 0;\r\n            if(this._hasMaskedPath) {\r\n                segmentInd = initSegmentInd;\r\n                pointInd = initPointInd;\r\n                points = segments[segmentInd].bezierData.points;\r\n                prevPoint = points[pointInd - 1];\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n                segmentLength = 0;\r\n            }\r\n            letterO = letterSw = letterFc = letterM = '';\r\n            letterP = this.defaultPropsArray;\r\n        }else{\r\n            if(this._hasMaskedPath) {\r\n                if(currentLine !== letters[i].line){\r\n                    switch(documentData.j){\r\n                        case 1:\r\n                            currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                            break;\r\n                        case 2:\r\n                            currentLength += (totalLength - documentData.lineWidths[letters[i].line])/2;\r\n                            break;\r\n                    }\r\n                    currentLine = letters[i].line;\r\n                }\r\n                if (ind !== letters[i].ind) {\r\n                    if (letters[ind]) {\r\n                        currentLength += letters[ind].extra;\r\n                    }\r\n                    currentLength += letters[i].an / 2;\r\n                    ind = letters[i].ind;\r\n                }\r\n                currentLength += alignment[0] * letters[i].an / 200;\r\n                var animatorOffset = 0;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if ('p' in animatorProps) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.p.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.p.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                    if ('a' in animatorProps) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.a.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.a.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                flag = true;\r\n                while (flag) {\r\n                    if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n                        perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n                        xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n                        yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n                        matrixHelper.translate(-alignment[0]*letters[i].an/200, -(alignment[1] * yOff / 100));\r\n                        flag = false;\r\n                    } else if (points) {\r\n                        segmentLength += currentPoint.partialLength;\r\n                        pointInd += 1;\r\n                        if (pointInd >= points.length) {\r\n                            pointInd = 0;\r\n                            segmentInd += 1;\r\n                            if (!segments[segmentInd]) {\r\n                                if (mask.v.c) {\r\n                                    pointInd = 0;\r\n                                    segmentInd = 0;\r\n                                    points = segments[segmentInd].bezierData.points;\r\n                                } else {\r\n                                    segmentLength -= currentPoint.partialLength;\r\n                                    points = null;\r\n                                }\r\n                            } else {\r\n                                points = segments[segmentInd].bezierData.points;\r\n                            }\r\n                        }\r\n                        if (points) {\r\n                            prevPoint = currentPoint;\r\n                            currentPoint = points[pointInd];\r\n                            partialLength = currentPoint.partialLength;\r\n                        }\r\n                    }\r\n                }\r\n                offf = letters[i].an / 2 - letters[i].add;\r\n                matrixHelper.translate(-offf, 0, 0);\r\n            } else {\r\n                offf = letters[i].an/2 - letters[i].add;\r\n                matrixHelper.translate(-offf,0,0);\r\n\r\n                // Grouping alignment\r\n                matrixHelper.translate(-alignment[0]*letters[i].an/200, -alignment[1]*yOff/100, 0);\r\n            }\r\n\r\n            lineLength += letters[i].l/2;\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if ('t' in animatorProps) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            currentLength += animatorProps.t*mult[0];\r\n                        } else {\r\n                            currentLength += animatorProps.t*mult;\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            xPos += animatorProps.t.v*mult[0];\r\n                        } else {\r\n                            xPos += animatorProps.t.v*mult;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            lineLength += letters[i].l/2;\r\n            if(documentData.strokeWidthAnim) {\r\n                sw = documentData.sw || 0;\r\n            }\r\n            if(documentData.strokeColorAnim) {\r\n                if(documentData.sc){\r\n                    sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n                }else{\r\n                    sc = [0,0,0];\r\n                }\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc) {\r\n                fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if ('a' in animatorProps) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n\r\n                    if(mult.length){\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult[0], -animatorProps.a.v[1]*mult[1], animatorProps.a.v[2]*mult[2]);\r\n                    } else {\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult, -animatorProps.a.v[1]*mult, animatorProps.a.v[2]*mult);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if ('s' in animatorProps) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(mult.length){\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult[0]),1+((animatorProps.s.v[1]-1)*mult[1]),1);\r\n                    } else {\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult),1+((animatorProps.s.v[1]-1)*mult),1);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1) {\r\n                animatorProps = animators[j].a;\r\n                animatorSelector = animators[j].s;\r\n                mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                if ('sk' in animatorProps) {\r\n                    if(mult.length) {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n                    } else {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n                    }\r\n                }\r\n                if ('r' in animatorProps) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n                    } else {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n                    }\r\n                }\r\n                if ('ry' in animatorProps) {\r\n\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult[1]);\r\n                    }else{\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult);\r\n                    }\r\n                }\r\n                if ('rx' in animatorProps) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult[0]);\r\n                    } else {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult);\r\n                    }\r\n                }\r\n                if ('o' in animatorProps) {\r\n                    if(mult.length) {\r\n                        elemOpacity += ((animatorProps.o.v)*mult[0] - elemOpacity)*mult[0];\r\n                    } else {\r\n                        elemOpacity += ((animatorProps.o.v)*mult - elemOpacity)*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeWidthAnim && 'sw' in animatorProps) {\r\n                    if(mult.length) {\r\n                        sw += animatorProps.sw.v*mult[0];\r\n                    } else {\r\n                        sw += animatorProps.sw.v*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeColorAnim && 'sc' in animatorProps) {\r\n                    for(k=0;k<3;k+=1){\r\n                        if(mult.length) {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult[0]\r\n                        } else {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult;\r\n                        }\r\n                    }\r\n                }\r\n                if (documentData.fillColorAnim && documentData.fc) {\r\n                    if('fc' in animatorProps){\r\n                        for(k=0;k<3;k+=1){\r\n                            if(mult.length) {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult[0];\r\n                            } else {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                    if('fh' in animatorProps){\r\n                        if(mult.length) {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult[0]);\r\n                        } else {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult);\r\n                        }\r\n                    }\r\n                    if('fs' in animatorProps){\r\n                        if(mult.length) {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult[0]);\r\n                        } else {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult);\r\n                        }\r\n                    }\r\n                    if('fb' in animatorProps){\r\n                        if(mult.length) {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]);\r\n                        } else {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n\r\n                if ('p' in animatorProps) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n                        } else {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n                        } else {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(documentData.strokeWidthAnim){\r\n                letterSw = sw < 0 ? 0 : sw;\r\n            }\r\n            if(documentData.strokeColorAnim){\r\n                letterSc = 'rgb('+Math.round(sc[0]*255)+','+Math.round(sc[1]*255)+','+Math.round(sc[2]*255)+')';\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc){\r\n                letterFc = 'rgb('+Math.round(fc[0]*255)+','+Math.round(fc[1]*255)+','+Math.round(fc[2]*255)+')';\r\n            }\r\n\r\n            if(this._hasMaskedPath) {\r\n                matrixHelper.translate(0,-documentData.ls);\r\n\r\n                matrixHelper.translate(0, alignment[1]*yOff/100 + yPos,0);\r\n                if (textData.p.p) {\r\n                    tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n                    var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n                    if (currentPoint.point[0] < prevPoint.point[0]) {\r\n                        rot += 180;\r\n                    }\r\n                    matrixHelper.rotate(-rot * Math.PI / 180);\r\n                }\r\n                matrixHelper.translate(xPathPos, yPathPos, 0);\r\n                currentLength -= alignment[0]*letters[i].an/200;\r\n                if(letters[i+1] && ind !== letters[i+1].ind){\r\n                    currentLength += letters[i].an / 2;\r\n                    currentLength += documentData.tr/1000*documentData.s;\r\n                }\r\n            }else{\r\n\r\n                matrixHelper.translate(xPos,yPos,0);\r\n\r\n                if(documentData.ps){\r\n                    //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n                    matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n                }\r\n                switch(documentData.j){\r\n                    case 1:\r\n                        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]),0,0);\r\n                        break;\r\n                    case 2:\r\n                        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line])/2,0,0);\r\n                        break;\r\n                }\r\n                matrixHelper.translate(0,-documentData.ls);\r\n                matrixHelper.translate(offf,0,0);\r\n                matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);\r\n                xPos += letters[i].l + documentData.tr/1000*documentData.s;\r\n            }\r\n            if(renderType === 'html'){\r\n                letterM = matrixHelper.toCSS();\r\n            }else if(renderType === 'svg'){\r\n                letterM = matrixHelper.to2dCSS();\r\n            }else{\r\n                letterP = [matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]];\r\n            }\r\n            letterO = elemOpacity;\r\n        }\r\n\r\n        if(renderedLettersCount <= i) {\r\n            letterValue = new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);\r\n            this.renderedLetters.push(letterValue);\r\n            renderedLettersCount += 1;\r\n            this.lettersChangedFlag = true;\r\n        } else {\r\n            letterValue = this.renderedLetters[i];\r\n            this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n        }\r\n    }\r\n}\r\n\r\nTextAnimatorProperty.prototype.getValue = function(){\r\n\tif(this._elem.globalData.frameId === this._frameId){\r\n        return;\r\n    }\r\n    this._frameId = this._elem.globalData.frameId;\r\n\tvar i, len = this._dynamicProperties.length;\r\n    this.mdf = false;\r\n\tfor(i = 0; i < len; i += 1) {\r\n\t\tthis._dynamicProperties[i].getValue();\r\n        this.mdf = this._dynamicProperties[i].mdf || this.mdf;\r\n\t}\r\n}\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\nfunction LetterProps(o, sw, sc, fc, m, p){\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this.mdf = {\r\n    \to: true,\r\n    \tsw: !!sw,\r\n    \tsc: !!sc,\r\n    \tfc: !!fc,\r\n    \tm: true,\r\n    \tp: true\r\n    };\r\n}\r\n\r\nLetterProps.prototype.update = function(o, sw, sc, fc, m, p) {\r\n\tthis.mdf.o = false;\r\n\tthis.mdf.sw = false;\r\n\tthis.mdf.sc = false;\r\n\tthis.mdf.fc = false;\r\n\tthis.mdf.m = false;\r\n\tthis.mdf.p = false;\r\n\tvar updated = false;\r\n\r\n\tif(this.o !== o) {\r\n\t\tthis.o = o;\r\n\t\tthis.mdf.o = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sw !== sw) {\r\n\t\tthis.sw = sw;\r\n\t\tthis.mdf.sw = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sc !== sc) {\r\n\t\tthis.sc = sc;\r\n\t\tthis.mdf.sc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.fc !== fc) {\r\n\t\tthis.fc = fc;\r\n\t\tthis.mdf.fc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.m !== m) {\r\n\t\tthis.m = m;\r\n\t\tthis.mdf.m = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n\t\tthis.p = p;\r\n\t\tthis.mdf.p = true;\r\n\t\tupdated = true;\r\n\t}\r\n\treturn updated;\r\n}\nfunction TextProperty(elem, data, dynamicProperties){\r\n\tthis._frameId = -99999;\r\n\tthis.pv = '';\r\n\tthis.v = '';\r\n\tthis.kf = false;\r\n\tthis.firstFrame = true;\r\n\tthis.mdf = true;\r\n\tthis.data = data;\r\n\tthis.elem = elem;\r\n\tthis.keysIndex = -1;\r\n\tthis.currentData = {\r\n\t\tascent: 0,\r\n        boxWidth: [0,0],\r\n        f: '',\r\n        fStyle: '',\r\n        fWeight: '',\r\n        fc: '',\r\n        j: '',\r\n        justifyOffset: '',\r\n        l: [],\r\n        lh: 0,\r\n        lineWidths: [],\r\n        ls: '',\r\n        of: '',\r\n        s: '',\r\n        sc: '',\r\n        sw: 0,\r\n        t: 0,\r\n        tr: 0,\r\n        fillColorAnim: false,\r\n        strokeColorAnim: false,\r\n        strokeWidthAnim: false,\r\n        yOffset: 0,\r\n        __complete: false\r\n\r\n\t}\r\n\tif(this.searchProperty()) {\r\n\t\tdynamicProperties.push(this);\r\n\t} else {\r\n\t\tthis.getValue(true);\r\n\t}\r\n}\r\n\r\nTextProperty.prototype.setCurrentData = function(data){\r\n\t\tvar currentData = this.currentData;\r\n        currentData.ascent = data.ascent;\r\n        currentData.boxWidth = data.boxWidth ? data.boxWidth : currentData.boxWidth;\r\n        currentData.f = data.f;\r\n        currentData.fStyle = data.fStyle;\r\n        currentData.fWeight = data.fWeight;\r\n        currentData.fc = data.fc;\r\n        currentData.j = data.j;\r\n        currentData.justifyOffset = data.justifyOffset;\r\n        currentData.l = data.l;\r\n        currentData.lh = data.lh;\r\n        currentData.lineWidths = data.lineWidths;\r\n        currentData.ls = data.ls;\r\n        currentData.of = data.of;\r\n        currentData.s = data.s;\r\n        currentData.sc = data.sc;\r\n        currentData.sw = data.sw;\r\n        currentData.t = data.t;\r\n        currentData.tr = data.tr;\r\n        currentData.fillColorAnim = data.fillColorAnim || currentData.fillColorAnim;\r\n        currentData.strokeColorAnim = data.strokeColorAnim || currentData.strokeColorAnim;\r\n        currentData.strokeWidthAnim = data.strokeWidthAnim || currentData.strokeWidthAnim;\r\n        currentData.yOffset = data.yOffset;\r\n        currentData.__complete = false;\r\n}\r\n\r\nTextProperty.prototype.searchProperty = function() {\r\n\tthis.kf = this.data.d.k.length > 1;\r\n\treturn this.kf;\r\n}\r\n\r\nTextProperty.prototype.getValue = function() {\r\n\tthis.mdf = false;\r\n\tvar frameId = this.elem.globalData.frameId;\r\n\tif((frameId === this._frameId || !this.kf) && !this.firstFrame) {\r\n\t\treturn;\r\n\t}\r\n\tvar textKeys = this.data.d.k, textDocumentData;\r\n    var i = 0, len = textKeys.length;\r\n    while(i <= len - 1) {\r\n        textDocumentData = textKeys[i].s;\r\n        if(i === len - 1 || textKeys[i+1].t > frameId){\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    if(this.keysIndex !== i) {\r\n    \tif(!textDocumentData.__complete) {\r\n            this.completeTextData(textDocumentData);\r\n        }\r\n        this.setCurrentData(textDocumentData);\r\n        this.mdf = this.firstFrame ? false : true;\r\n        this.pv = this.v = this.currentData.t;\r\n        this.keysIndex = i;\r\n    }\r\n\tthis._frameId = frameId;\r\n}\r\n\r\nTextProperty.prototype.completeTextData = function(documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i, len;\r\n    var newLineFlag, index = 0, val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0, currentPos = 0, currentLine = 0, lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j, jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData, cLength = 0;\r\n    var styles = fontData.fStyle.split(' ');\r\n\r\n    var fWeight = 'normal', fStyle = 'normal';\r\n    len = styles.length;\r\n    var styleName;\r\n    for(i=0;i<len;i+=1){\r\n        styleName = styles[i].toLowerCase();\r\n        switch(styleName) {\r\n            case 'italic':\r\n            fStyle = 'italic';\r\n            break;\r\n            case 'bold':\r\n            fWeight = '700';\r\n            break;\r\n            case 'black':\r\n            fWeight = '900';\r\n            break;\r\n            case 'medium':\r\n            fWeight = '500';\r\n            break;\r\n            case 'regular':\r\n            case 'normal':\r\n            fWeight = '400';\r\n            case 'light':\r\n            case 'thin':\r\n            fWeight = '200';\r\n            break;\r\n        }\r\n    }\r\n    documentData.fWeight = fWeight;\r\n    documentData.fStyle = fStyle;\r\n    len = documentData.t.length;\r\n    var trackingOffset = documentData.tr/1000*documentData.s;\r\n    if(documentData.sz){\r\n        var boxWidth = documentData.sz[0];\r\n        var lastSpaceIndex = -1;\r\n        for(i=0;i<len;i+=1){\r\n            newLineFlag = false;\r\n            if(documentData.t.charAt(i) === ' '){\r\n                lastSpaceIndex = i;\r\n            }else if(documentData.t.charCodeAt(i) === 13){\r\n                lineWidth = 0;\r\n                newLineFlag = true;\r\n            }\r\n            if(fontManager.chars){\r\n                charData = fontManager.getCharData(documentData.t.charAt(i), fontData.fStyle, fontData.fFamily);\r\n                cLength = newLineFlag ? 0 : charData.w*documentData.s/100;\r\n            }else{\r\n                //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n                cLength = fontManager.measureText(documentData.t.charAt(i), documentData.f, documentData.s);\r\n            }\r\n            if(lineWidth + cLength > boxWidth && documentData.t.charAt(i) !== ' '){\r\n                if(lastSpaceIndex === -1){\r\n                    len += 1;\r\n                } else {\r\n                    i = lastSpaceIndex;\r\n                }\r\n                documentData.t = documentData.t.substr(0,i) + \"\\r\" + documentData.t.substr(i === lastSpaceIndex ? i + 1 : i);\r\n                lastSpaceIndex = -1;\r\n                lineWidth = 0;\r\n            }else {\r\n                lineWidth += cLength;\r\n                lineWidth += trackingOffset;\r\n            }\r\n        }\r\n        len = documentData.t.length;\r\n    }\r\n    lineWidth = - trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n    for (i = 0;i < len ;i += 1) {\r\n        newLineFlag = false;\r\n        currentChar = documentData.t.charAt(i);\r\n        if(currentChar === ' '){\r\n            val = '\\u00A0';\r\n        }else if(currentChar.charCodeAt(0) === 13){\r\n            uncollapsedSpaces = 0;\r\n            lineWidths.push(lineWidth);\r\n            maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n            lineWidth = - 2 * trackingOffset;\r\n            val = '';\r\n            newLineFlag = true;\r\n            currentLine += 1;\r\n        }else{\r\n            val = documentData.t.charAt(i);\r\n        }\r\n        if(fontManager.chars){\r\n            charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w*documentData.s/100;\r\n        }else{\r\n            //var charWidth = fontManager.measureText(val, documentData.f, documentData.s);\r\n            //tCanvasHelper.font = documentData.s + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n            cLength = fontManager.measureText(val, documentData.f, documentData.s);\r\n        }\r\n\r\n        //\r\n        if(currentChar === ' '){\r\n            uncollapsedSpaces += cLength + trackingOffset;\r\n        } else {\r\n            lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n            uncollapsedSpaces = 0;\r\n        }\r\n        letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag, anIndexes:[], val: val, line: currentLine});\r\n        if(anchorGrouping == 2){\r\n            currentSize += cLength;\r\n            if(val == '' || val == '\\u00A0' || i == len - 1){\r\n                if(val == '' || val == '\\u00A0'){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                index += 1;\r\n                currentSize = 0;\r\n            }\r\n        }else if(anchorGrouping == 3){\r\n            currentSize += cLength;\r\n            if(val == '' || i == len - 1){\r\n                if(val == ''){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                currentSize = 0;\r\n                index += 1;\r\n            }\r\n        }else{\r\n            letters[index].ind = index;\r\n            letters[index].extra = 0;\r\n            index += 1;\r\n        }\r\n    }\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n    if(documentData.sz){\r\n        documentData.boxWidth = documentData.sz[0];\r\n        documentData.justifyOffset = 0;\r\n    }else{\r\n        documentData.boxWidth = maxLineWidth;\r\n        switch(documentData.j){\r\n            case 1:\r\n                documentData.justifyOffset = - documentData.boxWidth;\r\n                break;\r\n            case 2:\r\n                documentData.justifyOffset = - documentData.boxWidth/2;\r\n                break;\r\n            default:\r\n                documentData.justifyOffset = 0;\r\n        }\r\n    }\r\n    documentData.lineWidths = lineWidths;\r\n\r\n    var animators = data.a, animatorData, letterData;\r\n    jLen = animators.length;\r\n    var based, ind, indexes = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        animatorData = animators[j];\r\n        if(animatorData.a.sc){\r\n            documentData.strokeColorAnim = true;\r\n        }\r\n        if(animatorData.a.sw){\r\n            documentData.strokeWidthAnim = true;\r\n        }\r\n        if(animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb){\r\n            documentData.fillColorAnim = true;\r\n        }\r\n        ind = 0;\r\n        based = animatorData.s.b;\r\n        for(i=0;i<len;i+=1){\r\n            letterData = letters[i];\r\n            letterData.anIndexes[j] = ind;\r\n            if((based == 1 && letterData.val != '') || (based == 2 && letterData.val != '' && letterData.val != '\\u00A0') || (based == 3 && (letterData.n || letterData.val == '\\u00A0' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))){\r\n                if(animatorData.s.rn === 1){\r\n                    indexes.push(ind);\r\n                }\r\n                ind += 1;\r\n            }\r\n        }\r\n        data.a[j].s.totalChars = ind;\r\n        var currentInd = -1, newInd;\r\n        if(animatorData.s.rn === 1){\r\n            for(i = 0; i < len; i += 1){\r\n                letterData = letters[i];\r\n                if(currentInd != letterData.anIndexes[j]){\r\n                    currentInd = letterData.anIndexes[j];\r\n                    newInd = indexes.splice(Math.floor(Math.random()*indexes.length),1)[0];\r\n                }\r\n                letterData.anIndexes[j] = newInd;\r\n            }\r\n        }\r\n    }\r\n    documentData.yOffset = documentData.lh || documentData.s*1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent*documentData.s/100;\r\n}\r\n\r\nTextProperty.prototype.updateDocumentData = function(newData, index) {\r\n\tindex = index === undefined ? this.keysIndex : index;\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    dData.t = newData.t;\r\n    this.keysIndex = -1;\r\n    this.firstFrame = true;\r\n    this.getValue();\r\n}\r\n\nvar pooling = (function(){\r\n\r\n\tfunction double(arr){\r\n\t\treturn arr.concat(Array.apply(null,{length:arr.length}))\r\n\t}\r\n\r\n\treturn {\r\n\t\tdouble: double\r\n\t}\r\n}());\nvar point_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewPoint: newPoint,\r\n\t\trelease: release\r\n\t}\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 8;\r\n\tvar pool = Array.apply(null,{length:_maxLength});\r\n\r\n\tfunction newPoint(){\r\n\t\tvar point;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tpoint = pool[_length];\r\n\t\t} else {\r\n\t\t\tpoint = [0.1,0.1];\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\tfunction release(point) {\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = point;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\r\n\treturn ob;\r\n}());\nvar shape_pool = (function(){\r\n\tvar ob = {\r\n\t\tclone: clone,\r\n\t\tnewShape: newShape,\r\n\t\trelease: release,\r\n\t\treleaseArray: releaseArray\r\n\t}\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = Array.apply(null,{length:_maxLength});\r\n\r\n\tfunction newShape(){\r\n\t\tvar shapePath;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapePath = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapePath = new ShapePath();\r\n\t\t}\r\n\t\treturn shapePath;\r\n\t}\r\n\r\n\tfunction release(shapePath) {\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tvar len = shapePath._length, i;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tpoint_pool.release(shapePath.v[i]);\r\n\t\t\tpoint_pool.release(shapePath.i[i]);\r\n\t\t\tpoint_pool.release(shapePath.o[i]);\r\n\t\t\tshapePath.v[i] = null;\r\n\t\t\tshapePath.i[i] = null;\r\n\t\t\tshapePath.o[i] = null;\r\n\t\t}\r\n\t\tshapePath._length = 0;\r\n\t\tshapePath.c = false;\r\n\t\tpool[_length] = shapePath;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\tfunction releaseArray(shapePathsCollection, length) {\r\n\t\twhile(length--) {\r\n\t\t\trelease(shapePathsCollection[length]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clone(shape, transform) {\r\n\t\tvar i, len = shape._length === undefined ? shape.v.length : shape._length;\r\n\t\tvar cloned = newShape();\r\n\t\tcloned.setLength(len);\r\n\t\tcloned.c = shape.c;\r\n\r\n\t\tvar pt;\r\n\t\t\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tif(transform){\r\n\t\t\t\tpt = transform.applyToPointArray(shape.v[i][0],shape.v[i][1],0,2);\r\n\t\t\t\tcloned.setXYAt(pt[0],pt[1],'v',i);\r\n\t\t\t\tpoint_pool.release(pt);\r\n\t\t\t\tpt = transform.applyToPointArray(shape.o[i][0],shape.o[i][1],0,2);\r\n\t\t\t\tcloned.setXYAt(pt[0],pt[1],'o',i);\r\n\t\t\t\tpoint_pool.release(pt);\r\n\t\t\t\tpt = transform.applyToPointArray(shape.i[i][0],shape.i[i][1],0,2);\r\n\t\t\t\tcloned.setXYAt(pt[0],pt[1],'i',i);\r\n\t\t\t\tpoint_pool.release(pt);\r\n\t\t\t}else{\r\n\t\t\t\tcloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1], i);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cloned\r\n\t}\r\n\r\n\r\n\treturn ob;\r\n}());\nvar shapeCollection_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewShapeCollection: newShapeCollection,\r\n\t\trelease: release,\r\n\t\tclone: clone\r\n\t}\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = Array.apply(null,{length:_maxLength});\r\n\r\n\tvar cont = 0;\r\n\r\n\tfunction newShapeCollection(){\r\n\t\tvar shapeCollection;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapeCollection = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapeCollection = new ShapeCollection();\r\n\t\t}\r\n\t\treturn shapeCollection;\r\n\t}\r\n\r\n\tfunction release(shapeCollection) {\r\n\t\tvar i, len = shapeCollection._length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tshape_pool.release(shapeCollection.shapes[i]);\r\n\t\t}\r\n\t\tshapeCollection._length = 0;\r\n\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\tfunction clone(shapeCollection, originCollection) {\r\n\t\trelease(shapeCollection);\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\r\n\treturn ob;\r\n}());\nfunction BaseRenderer(){}\r\nBaseRenderer.prototype.checkLayers = function(num){\r\n    var i, len = this.layers.length, data;\r\n    this.completeLayers = true;\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if (!this.elements[i]) {\r\n            data = this.layers[i];\r\n            if(data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st))\r\n            {\r\n                this.buildItem(i);\r\n            }\r\n        }\r\n        this.completeLayers = this.elements[i] ? this.completeLayers:false;\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function(layer){\r\n    switch(layer.ty){\r\n        case 2:\r\n            return this.createImage(layer);\r\n        case 0:\r\n            return this.createComp(layer);\r\n        case 1:\r\n            return this.createSolid(layer);\r\n        case 4:\r\n            return this.createShape(layer);\r\n        case 5:\r\n            return this.createText(layer);\r\n        case 13:\r\n            return this.createCamera(layer);\r\n        case 99:\r\n            return null;\r\n    }\r\n    return this.createBase(layer);\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function(){\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n}\r\n\r\nBaseRenderer.prototype.buildAllItems = function(){\r\n    var i, len = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.buildItem(i);\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function(newLayers){\r\n    this.completeLayers = false;\r\n    var i, len = newLayers.length;\r\n    var j, jLen = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        j = 0;\r\n        while(j<jLen){\r\n            if(this.layers[j].id == newLayers[i].id){\r\n                this.layers[j] = newLayers[i];\r\n                break;\r\n            }\r\n            j += 1;\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function(pInterface){\r\n    this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function(){\r\n    if(!this.globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function(element, parentName, hierarchy){\r\n    hierarchy = hierarchy || [];\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i=0, len = layers.length;\r\n    while(i<len){\r\n        if(layers[i].ind == parentName){\r\n            if(!elements[i] || elements[i] === true){\r\n                this.buildItem(i);\r\n                this.addPendingElement(element);\r\n            } else if(layers[i].parent !== undefined){\r\n                hierarchy.push(elements[i]);\r\n                elements[i]._isParent = true;\r\n                this.buildElementParenting(element,layers[i].parent, hierarchy);\r\n            } else {\r\n                hierarchy.push(elements[i]);\r\n                elements[i]._isParent = true;\r\n                element.setHierarchy(hierarchy);\r\n            }\r\n\r\n\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function(element){\r\n    this.pendingElements.push(element);\r\n};\nfunction SVGRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1\r\n    };\r\n    this.renderConfig = {\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true,\r\n        viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.globalData.renderConfig = this.renderConfig;\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n\r\n}\r\n\r\nextendPrototype(BaseRenderer,SVGRenderer);\r\n\r\nSVGRenderer.prototype.createBase = function (data) {\r\n    return new SVGBaseElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n    return new IShapeElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n    return new SVGTextElement(data, this.layerElement,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n    return new IImageElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n    return new ICompElement(data, this.layerElement,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function(animData){\r\n    this.layerElement = document.createElementNS(svgNS,'svg');\r\n    this.layerElement.setAttribute('xmlns','http://www.w3.org/2000/svg');\r\n    this.layerElement.setAttribute('viewBox','0 0 '+animData.w+' '+animData.h);\r\n    if(!this.renderConfig.viewBoxOnly) {\r\n        this.layerElement.setAttribute('width',animData.w);\r\n        this.layerElement.setAttribute('height',animData.h);\r\n        this.layerElement.style.width = '100%';\r\n        this.layerElement.style.height = '100%';\r\n    }\r\n    if(this.renderConfig.className) {\r\n        this.layerElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    this.layerElement.setAttribute('preserveAspectRatio',this.renderConfig.preserveAspectRatio);\r\n    //this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n    this.animationItem.wrapper.appendChild(this.layerElement);\r\n    //Mask animation\r\n    var defs = document.createElementNS(svgNS, 'defs');\r\n    this.globalData.defs = defs;\r\n    this.layerElement.appendChild(defs);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    };\r\n    this.data = animData;\r\n    this.globalData.frameRate = animData.fr;\r\n    var maskElement = document.createElementNS(svgNS, 'clipPath');\r\n    var rect = document.createElementNS(svgNS,'rect');\r\n    rect.setAttribute('width',animData.w);\r\n    rect.setAttribute('height',animData.h);\r\n    rect.setAttribute('x',0);\r\n    rect.setAttribute('y',0);\r\n    var maskId = 'animationMask_'+randomString(10);\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    var maskedElement = document.createElementNS(svgNS,'g');\r\n    maskedElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\"+maskId+\")\");\r\n    this.layerElement.appendChild(maskedElement);\r\n    defs.appendChild(maskElement);\r\n    this.layerElement = maskedElement;\r\n    this.layers = animData.layers;\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts,defs);\r\n    this.elements = Array.apply(null,{length:animData.layers.length});\r\n};\r\n\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem  = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n\r\n    elements[pos] = element;\r\n    if(expressionsPlugin){\r\n        if(this.layers[pos].ty === 0){\r\n            this.globalData.projectInterface.registerComposition(element);\r\n        }\r\n        element.initExpressions();\r\n    }\r\n    this.appendElementInPos(element,pos);\r\n    if(this.layers[pos].tt){\r\n        if(!this.elements[pos - 1] || this.elements[pos - 1] === true){\r\n            this.buildItem(pos - 1);\r\n            this.addPendingElement(element);\r\n        } else {\r\n            element.setMatte(elements[pos - 1].layerId);\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n        if(element.data.tt){\r\n            var i = 0, len = this.elements.length;\r\n            while(i<len){\r\n                if(this.elements[i] === element){\r\n                    element.setMatte(this.elements[i - 1].layerId);\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function(num){\r\n    if(this.renderedFrame == num || this.destroyed){\r\n        return;\r\n    }\r\n    if(num === null){\r\n        num = this.renderedFrame;\r\n    }else{\r\n        this.renderedFrame = num;\r\n    }\r\n    //clearPoints();\r\n    /*console.log('-------');\r\n    console.log('FRAME ',num);*/\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newElement = element.getBaseElement();\r\n    if(!newElement){\r\n        return;\r\n    }\r\n    var i = 0;\r\n    var nextElement;\r\n    while(i<pos){\r\n        if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement()){\r\n            nextElement = this.elements[i].getBaseElement();\r\n        }\r\n        i += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(newElement);\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function(){\r\n    this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function(){\r\n    this.layerElement.style.display = 'block';\r\n};\r\n\r\nSVGRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = document.createElementNS(svgNS,'g');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],floatingContainer,this.globalData.comp,null);\r\n            comp.initExpressions();\r\n            //comp.compInterface = CompExpressionInterface(comp);\r\n            //Expressions.addLayersInterface(comp.elements, this.globalData.projectInterface);\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\nfunction MaskElement(data,element,globalData) {\r\n    this.dynamicProperties = [];\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties;\r\n    this.viewData = Array.apply(null,{length:this.masksProperties.length});\r\n    this.maskElement = null;\r\n    this.firstFrame = true;\r\n    var defs = this.globalData.defs;\r\n    var i, len = this.masksProperties.length;\r\n\r\n\r\n    var path, properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j, jLen;\r\n    var layerId = randomString(10);\r\n    var rect, expansor, feMorph,x;\r\n    var maskType = 'clipPath', maskRef = 'clip-path';\r\n    for (i = 0; i < len; i++) {\r\n\r\n        if((properties[i].mode !== 'a' && properties[i].mode !== 'n')|| properties[i].inv || properties[i].o.k !== 100){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n        }\r\n\r\n        if((properties[i].mode == 's' || properties[i].mode == 'i') && count == 0){\r\n            rect = document.createElementNS(svgNS, 'rect');\r\n            rect.setAttribute('fill', '#ffffff');\r\n            rect.setAttribute('width', this.element.comp.data.w);\r\n            rect.setAttribute('height', this.element.comp.data.h);\r\n            currentMasks.push(rect);\r\n        } else {\r\n            rect = null;\r\n        }\r\n\r\n        path = document.createElementNS(svgNS, 'path');\r\n        if(properties[i].mode == 'n') {\r\n            this.viewData[i] = {\r\n                op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.dynamicProperties),\r\n                prop: ShapePropertyFactory.getShapeProp(this.element,properties[i],3,this.dynamicProperties,null),\r\n                elem: path\r\n            };\r\n            defs.appendChild(path);\r\n            continue;\r\n        }\r\n        count += 1;\r\n\r\n        if(properties[i].mode == 's'){\r\n            path.setAttribute('fill', '#000000');\r\n        }else{\r\n            path.setAttribute('fill', '#ffffff');\r\n        }\r\n        path.setAttribute('clip-rule','nonzero');\r\n\r\n        if(properties[i].x.k !== 0){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n            x = PropertyFactory.getProp(this.element,properties[i].x,0,null,this.dynamicProperties);\r\n            var filterID = 'fi_'+randomString(10);\r\n            expansor = document.createElementNS(svgNS,'filter');\r\n            expansor.setAttribute('id',filterID);\r\n            feMorph = document.createElementNS(svgNS,'feMorphology');\r\n            feMorph.setAttribute('operator','dilate');\r\n            feMorph.setAttribute('in','SourceGraphic');\r\n            feMorph.setAttribute('radius','0');\r\n            expansor.appendChild(feMorph);\r\n            defs.appendChild(expansor);\r\n            if(properties[i].mode == 's'){\r\n                path.setAttribute('stroke', '#000000');\r\n            }else{\r\n                path.setAttribute('stroke', '#ffffff');\r\n            }\r\n        }else{\r\n            feMorph = null;\r\n            x = null;\r\n        }\r\n\r\n\r\n        this.storedData[i] = {\r\n             elem: path,\r\n             x: x,\r\n             expan: feMorph,\r\n            lastPath: '',\r\n            lastOperator:'',\r\n            filterId:filterID,\r\n            lastRadius:0\r\n        };\r\n        if(properties[i].mode == 'i'){\r\n            jLen = currentMasks.length;\r\n            var g = document.createElementNS(svgNS,'g');\r\n            for(j=0;j<jLen;j+=1){\r\n                g.appendChild(currentMasks[j]);\r\n            }\r\n            var mask = document.createElementNS(svgNS,'mask');\r\n            mask.setAttribute('mask-type','alpha');\r\n            mask.setAttribute('id',layerId+'_'+count);\r\n            mask.appendChild(path);\r\n            defs.appendChild(mask);\r\n            g.setAttribute('mask','url(' + locationHref + '#'+layerId+'_'+count+')');\r\n\r\n            currentMasks.length = 0;\r\n            currentMasks.push(g);\r\n        }else{\r\n            currentMasks.push(path);\r\n        }\r\n        if(properties[i].inv && !this.solidPath){\r\n            this.solidPath = this.createLayerSolidPath();\r\n        }\r\n        this.viewData[i] = {\r\n            elem: path,\r\n            lastPath: '',\r\n            op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.dynamicProperties),\r\n            prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3,this.dynamicProperties,null)\r\n        };\r\n        if(rect){\r\n            this.viewData[i].invRect = rect;\r\n        }\r\n        if(!this.viewData[i].prop.k){\r\n            this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n    }\r\n\r\n    this.maskElement = document.createElementNS(svgNS, maskType);\r\n\r\n    len = currentMasks.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    this.maskElement.setAttribute('id', layerId);\r\n    if(count > 0){\r\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\r\n    }\r\n\r\n    defs.appendChild(this.maskElement);\r\n};\r\n\r\nMaskElement.prototype.getMaskProperty = function(pos){\r\n    return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.prepareFrame = function(){\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n\r\n    }\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (finalMat) {\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.viewData[i].prop.mdf || this.firstFrame){\r\n            this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n        if(this.viewData[i].op.mdf || this.firstFrame){\r\n            this.viewData[i].elem.setAttribute('fill-opacity',this.viewData[i].op.v);\r\n        }\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if(this.viewData[i].invRect && (this.element.finalTransform.mProp.mdf || this.firstFrame)){\r\n                this.viewData[i].invRect.setAttribute('x', -finalMat.props[12]);\r\n                this.viewData[i].invRect.setAttribute('y', -finalMat.props[13]);\r\n            }\r\n            if(this.storedData[i].x && (this.storedData[i].x.mdf || this.firstFrame)){\r\n                var feMorph = this.storedData[i].expan;\r\n                if(this.storedData[i].x.v < 0){\r\n                    if(this.storedData[i].lastOperator !== 'erode'){\r\n                        this.storedData[i].lastOperator = 'erode';\r\n                        this.storedData[i].elem.setAttribute('filter','url(' + locationHref + '#'+this.storedData[i].filterId+')');\r\n                    }\r\n                    feMorph.setAttribute('radius',-this.storedData[i].x.v);\r\n                }else{\r\n                    if(this.storedData[i].lastOperator !== 'dilate'){\r\n                        this.storedData[i].lastOperator = 'dilate';\r\n                        this.storedData[i].elem.setAttribute('filter',null);\r\n                    }\r\n                    this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v*2);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n    this.firstFrame = false;\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function(){\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w ;\r\n    path += ' v' + this.globalData.compSize.h ;\r\n    path += ' h-' + this.globalData.compSize.w ;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function(pathData,pathNodes,viewData){\r\n    var pathString = \" M\"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    var i, len;\r\n    len = pathNodes._length;\r\n    for(i=1;i<len;i+=1){\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n        pathString += \" C\"+bm_rnd(pathNodes.o[i-1][0])+','+bm_rnd(pathNodes.o[i-1][1]) + \" \"+bm_rnd(pathNodes.i[i][0])+','+bm_rnd(pathNodes.i[i][1]) + \" \"+bm_rnd(pathNodes.v[i][0])+','+bm_rnd(pathNodes.v[i][1]);\r\n    }\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    if(pathNodes.c && len > 1){\r\n        pathString += \" C\"+bm_rnd(pathNodes.o[i-1][0])+','+bm_rnd(pathNodes.o[i-1][1]) + \" \"+bm_rnd(pathNodes.i[0][0])+','+bm_rnd(pathNodes.i[0][1]) + \" \"+bm_rnd(pathNodes.v[0][0])+','+bm_rnd(pathNodes.v[0][1]);\r\n    }\r\n    //pathNodes.__renderedString = pathString;\r\n\r\n\r\n    if(viewData.lastPath !== pathString){\r\n        if(viewData.elem){\r\n            if(!pathNodes.c){\r\n                viewData.elem.setAttribute('d','');\r\n            }else if(pathData.inv){\r\n                viewData.elem.setAttribute('d',this.solidPath + pathString);\r\n            }else{\r\n                viewData.elem.setAttribute('d',pathString);\r\n            }\r\n        }\r\n        viewData.lastPath = pathString;\r\n    }\r\n};\r\n\r\nMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n};\nfunction BaseElement(){\r\n};\r\nBaseElement.prototype.checkMasks = function(){\r\n    if(!this.data.hasMask){\r\n        return false;\r\n    }\r\n    var i = 0, len = this.data.masksProperties.length;\r\n    while(i<len) {\r\n        if((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n            return true;\r\n        }\r\n        i += 1;\r\n    }\r\n    return false;\r\n}\r\n\r\nBaseElement.prototype.checkParenting = function(){\r\n    if(this.data.parent !== undefined){\r\n        this.comp.buildElementParenting(this, this.data.parent);\r\n    }\r\n}\r\n\r\nBaseElement.prototype.prepareFrame = function(num){\r\n    if(this.data.ip - this.data.st <= num && this.data.op - this.data.st > num)\r\n    {\r\n        if(this.isVisible !== true){\r\n            this.elemMdf = true;\r\n            this.globalData.mdf = true;\r\n            this.isVisible = true;\r\n            this.firstFrame = true;\r\n            if(this.data.hasMask){\r\n                this.maskManager.firstFrame = true;\r\n            }\r\n        }\r\n    }else{\r\n        if(this.isVisible !== false){\r\n            this.elemMdf = true;\r\n            this.globalData.mdf = true;\r\n            this.isVisible = false;\r\n        }\r\n    }\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.isVisible || (this._isParent && this.dynamicProperties[i].type === 'transform')){\r\n            this.dynamicProperties[i].getValue();\r\n            if(this.dynamicProperties[i].mdf){\r\n                this.elemMdf = true;\r\n                this.globalData.mdf = true;\r\n            }\r\n        }\r\n    }\r\n    if(this.data.hasMask && this.isVisible){\r\n        this.maskManager.prepareFrame(num*this.data.sr);\r\n    }\r\n    \r\n    /* TODO check this\r\n    if(this.data.sy){\r\n        if(this.data.sy[0].renderedData[num]){\r\n            if(this.data.sy[0].renderedData[num].c){\r\n                this.feFlood.setAttribute('flood-color','rgb('+Math.round(this.data.sy[0].renderedData[num].c[0])+','+Math.round(this.data.sy[0].renderedData[num].c[1])+','+Math.round(this.data.sy[0].renderedData[num].c[2])+')');\r\n            }\r\n            if(this.data.sy[0].renderedData[num].s){\r\n                this.feMorph.setAttribute('radius',this.data.sy[0].renderedData[num].s);\r\n            }\r\n        }\r\n    }\r\n    */\r\n\r\n\r\n    this.currentFrameNum = num*this.data.sr;\r\n    return this.isVisible;\r\n};\r\n\r\nBaseElement.prototype.globalToLocal = function(pt){\r\n    var transforms = [];\r\n    transforms.push(this.finalTransform);\r\n    var flag = true;\r\n    var comp = this.comp;\r\n    while(flag){\r\n        if(comp.finalTransform){\r\n            if(comp.data.hasMask){\r\n                transforms.splice(0,0,comp.finalTransform);\r\n            }\r\n            comp = comp.comp;\r\n        } else {\r\n            flag = false;\r\n        }\r\n    }\r\n    var i, len = transforms.length,ptNew;\r\n    for(i=0;i<len;i+=1){\r\n        ptNew = transforms[i].mat.applyToPointArray(0,0,0);\r\n        //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n        pt = [pt[0] - ptNew[0],pt[1] - ptNew[1],0];\r\n    }\r\n    return pt;\r\n};\r\n\r\nBaseElement.prototype.initExpressions = function(){\r\n    this.layerInterface = LayerExpressionInterface(this);\r\n    //layers[i].layerInterface = LayerExpressionInterface(layers[i]);\r\n    //layers[i].layerInterface = LayerExpressionInterface(layers[i]);\r\n    if(this.data.hasMask){\r\n        this.layerInterface.registerMaskInterface(this.maskManager);\r\n    }\r\n    var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);\r\n    this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n    if(this.data.ty === 0 || this.data.xt){\r\n        this.compInterface = CompExpressionInterface(this);\r\n    } else if(this.data.ty === 4){\r\n        this.layerInterface.shapeInterface = ShapeExpressionInterface.createShapeInterface(this.shapesData,this.itemsData,this.layerInterface);\r\n    } else if(this.data.ty === 5){\r\n        this.layerInterface.textInterface = TextExpressionInterface(this);\r\n    }\r\n}\r\n\r\nBaseElement.prototype.setBlendMode = function(){\r\n    var blendModeValue = '';\r\n    switch(this.data.bm){\r\n        case 1:\r\n            blendModeValue = 'multiply';\r\n            break;\r\n        case 2:\r\n            blendModeValue = 'screen';\r\n            break;\r\n        case 3:\r\n            blendModeValue = 'overlay';\r\n            break;\r\n        case 4:\r\n            blendModeValue = 'darken';\r\n            break;\r\n        case 5:\r\n            blendModeValue = 'lighten';\r\n            break;\r\n        case 6:\r\n            blendModeValue = 'color-dodge';\r\n            break;\r\n        case 7:\r\n            blendModeValue = 'color-burn';\r\n            break;\r\n        case 8:\r\n            blendModeValue = 'hard-light';\r\n            break;\r\n        case 9:\r\n            blendModeValue = 'soft-light';\r\n            break;\r\n        case 10:\r\n            blendModeValue = 'difference';\r\n            break;\r\n        case 11:\r\n            blendModeValue = 'exclusion';\r\n            break;\r\n        case 12:\r\n            blendModeValue = 'hue';\r\n            break;\r\n        case 13:\r\n            blendModeValue = 'saturation';\r\n            break;\r\n        case 14:\r\n            blendModeValue = 'color';\r\n            break;\r\n        case 15:\r\n            blendModeValue = 'luminosity';\r\n            break;\r\n    }\r\n    var elem = this.baseElement || this.layerElement;\r\n\r\n    elem.style['mix-blend-mode'] = blendModeValue;\r\n}\r\n\r\nBaseElement.prototype.init = function(){\r\n    if(!this.data.sr){\r\n        this.data.sr = 1;\r\n    }\r\n    this.dynamicProperties = this.dynamicProperties || [];\r\n    if(this.data.ef){\r\n        this.effects = new EffectsManager(this.data,this,this.dynamicProperties);\r\n        //this.effect = this.effectsManager.bind(this.effectsManager);\r\n    }\r\n    //this.elemInterface = buildLayerExpressionInterface(this);\r\n    this.hidden = false;\r\n    this.firstFrame = true;\r\n    this.isVisible = false;\r\n    this._isParent = false;\r\n    this.currentFrameNum = -99999;\r\n    this.lastNum = -99999;\r\n    if(this.data.ks){\r\n        this.finalTransform = {\r\n            mProp: PropertyFactory.getProp(this,this.data.ks,2,null,this.dynamicProperties),\r\n            matMdf: false,\r\n            opMdf: false,\r\n            mat: new Matrix(),\r\n            opacity: 1\r\n        };\r\n        if(this.data.ao){\r\n            this.finalTransform.mProp.autoOriented = true;\r\n        }\r\n        this.finalTransform.op = this.finalTransform.mProp.o;\r\n        this.transform = this.finalTransform.mProp;\r\n        if(this.data.ty !== 11){\r\n            this.createElements();\r\n        }\r\n        if(this.data.hasMask){\r\n            this.addMasks(this.data);\r\n        }\r\n    }\r\n    this.elemMdf = false;\r\n};\r\nBaseElement.prototype.getType = function(){\r\n    return this.type;\r\n};\r\n\r\nBaseElement.prototype.resetHierarchy = function(){\r\n    if(!this.hierarchy){\r\n        this.hierarchy = [];\r\n    }else{\r\n        this.hierarchy.length = 0;\r\n    }\r\n};\r\n\r\nBaseElement.prototype.getHierarchy = function(){\r\n    if(!this.hierarchy){\r\n        this.hierarchy = [];\r\n    }\r\n    return this.hierarchy;\r\n};\r\n\r\nBaseElement.prototype.setHierarchy = function(hierarchy){\r\n    this.hierarchy = hierarchy;\r\n};\r\n\r\nBaseElement.prototype.getLayerSize = function(){\r\n    if(this.data.ty === 5){\r\n        return {w:this.data.textData.width,h:this.data.textData.height};\r\n    }else{\r\n        return {w:this.data.width,h:this.data.height};\r\n    }\r\n};\r\n\r\nBaseElement.prototype.hide = function(){\r\n\r\n};\r\n\r\nBaseElement.prototype.sourceRectAtTime = function(){\r\n    return {\r\n        top:0,\r\n        left:0,\r\n        width:100,\r\n        height:100\r\n    }\r\n};\r\n\r\nBaseElement.prototype.mHelper = new Matrix();\nfunction SVGBaseElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.globalData = globalData;\r\n    this.comp = comp;\r\n    this.data = data;\r\n    this.matteElement = null;\r\n    this.transformedElement = null;\r\n    this.isTransparent = false;\r\n    this.parentContainer = parentContainer;\r\n    this.layerId = placeholder ? placeholder.layerId : 'ly_'+randomString(10);\r\n    this.placeholder = placeholder;\r\n    this._sizeChanged = false;\r\n    this.init();\r\n};\r\n\r\ncreateElement(BaseElement, SVGBaseElement);\r\n\r\nSVGBaseElement.prototype.createElements = function(){\r\n    this.layerElement = document.createElementNS(svgNS,'g');\r\n    this.transformedElement = this.layerElement;\r\n    if(this.data.hasMask){\r\n        this.maskedElement = this.layerElement;\r\n    }\r\n    var layerElementParent = null;\r\n    if(this.data.td){\r\n        if(this.data.td == 3 || this.data.td == 1){\r\n            var masker = document.createElementNS(svgNS,'mask');\r\n            masker.setAttribute('id',this.layerId);\r\n            masker.setAttribute('mask-type',this.data.td == 3 ? 'luminance':'alpha');\r\n            masker.appendChild(this.layerElement);\r\n            layerElementParent = masker;\r\n            this.globalData.defs.appendChild(masker);\r\n            ////// This is only for IE and Edge when mask if of type alpha\r\n            if(!featureSupport.maskType && this.data.td == 1){\r\n                masker.setAttribute('mask-type','luminance');\r\n                var filId = randomString(10);\r\n                var fil = filtersFactory.createFilter(filId);\r\n                this.globalData.defs.appendChild(fil);\r\n                fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                var gg = document.createElementNS(svgNS,'g');\r\n                gg.appendChild(this.layerElement);\r\n                layerElementParent = gg;\r\n                masker.appendChild(gg);\r\n                gg.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n            }\r\n        }else if(this.data.td == 2){\r\n            var maskGroup = document.createElementNS(svgNS,'mask');\r\n            maskGroup.setAttribute('id',this.layerId);\r\n            maskGroup.setAttribute('mask-type','alpha');\r\n            var maskGrouper = document.createElementNS(svgNS,'g');\r\n            maskGroup.appendChild(maskGrouper);\r\n            var filId = randomString(10);\r\n            var fil = filtersFactory.createFilter(filId);\r\n            ////\r\n\r\n            var feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n            feColorMatrix.setAttribute('type','matrix');\r\n            feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n            feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n            fil.appendChild(feColorMatrix);\r\n\r\n            ////\r\n            /*var feCTr = document.createElementNS(svgNS,'feComponentTransfer');\r\n            feCTr.setAttribute('in','SourceGraphic');\r\n            fil.appendChild(feCTr);\r\n            var feFunc = document.createElementNS(svgNS,'feFuncA');\r\n            feFunc.setAttribute('type','table');\r\n            feFunc.setAttribute('tableValues','1.0 0.0');\r\n            feCTr.appendChild(feFunc);*/\r\n            this.globalData.defs.appendChild(fil);\r\n            var alphaRect = document.createElementNS(svgNS,'rect');\r\n            alphaRect.setAttribute('width',this.comp.data.w);\r\n            alphaRect.setAttribute('height',this.comp.data.h);\r\n            alphaRect.setAttribute('x','0');\r\n            alphaRect.setAttribute('y','0');\r\n            alphaRect.setAttribute('fill','#ffffff');\r\n            alphaRect.setAttribute('opacity','0');\r\n            maskGrouper.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n            maskGrouper.appendChild(alphaRect);\r\n            maskGrouper.appendChild(this.layerElement);\r\n            layerElementParent = maskGrouper;\r\n            if(!featureSupport.maskType){\r\n                maskGroup.setAttribute('mask-type','luminance');\r\n                fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                var gg = document.createElementNS(svgNS,'g');\r\n                maskGrouper.appendChild(alphaRect);\r\n                gg.appendChild(this.layerElement);\r\n                layerElementParent = gg;\r\n                maskGrouper.appendChild(gg);\r\n            }\r\n            this.globalData.defs.appendChild(maskGroup);\r\n        }\r\n    }else if(this.data.hasMask || this.data.tt){\r\n        if(this.data.tt){\r\n            this.matteElement = document.createElementNS(svgNS,'g');\r\n            this.matteElement.appendChild(this.layerElement);\r\n            layerElementParent = this.matteElement;\r\n            this.baseElement = this.matteElement;\r\n        }else{\r\n            this.baseElement = this.layerElement;\r\n        }\r\n    }else{\r\n        this.baseElement = this.layerElement;\r\n    }\r\n    if((this.data.ln || this.data.cl) && (this.data.ty === 4 || this.data.ty === 0)){\r\n        if(this.data.ln){\r\n            this.layerElement.setAttribute('id',this.data.ln);\r\n        }\r\n        if(this.data.cl){\r\n            this.layerElement.setAttribute('class',this.data.cl);\r\n        }\r\n    }\r\n    if(this.data.ty === 0){\r\n            var cp = document.createElementNS(svgNS, 'clipPath');\r\n            var pt = document.createElementNS(svgNS,'path');\r\n            pt.setAttribute('d','M0,0 L'+this.data.w+',0'+' L'+this.data.w+','+this.data.h+' L0,'+this.data.h+'z');\r\n            var clipId = 'cp_'+randomString(8);\r\n            cp.setAttribute('id',clipId);\r\n            cp.appendChild(pt);\r\n            this.globalData.defs.appendChild(cp);\r\n        if(this.checkMasks()){\r\n            var cpGroup = document.createElementNS(svgNS,'g');\r\n            cpGroup.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n            cpGroup.appendChild(this.layerElement);\r\n            this.transformedElement = cpGroup;\r\n            if(layerElementParent){\r\n                layerElementParent.appendChild(this.transformedElement);\r\n            } else {\r\n                this.baseElement = this.transformedElement;\r\n            }\r\n        } else {\r\n            this.layerElement.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n        }\r\n        \r\n    }\r\n    if(this.data.bm !== 0){\r\n        this.setBlendMode();\r\n    }\r\n    if(this.layerElement !== this.parentContainer){\r\n        this.placeholder = null;\r\n    }\r\n    /* Todo performance killer\r\n    if(this.data.sy){\r\n        var filterID = 'st_'+randomString(10);\r\n        var c = this.data.sy[0].c.k;\r\n        var r = this.data.sy[0].s.k;\r\n        var expansor = document.createElementNS(svgNS,'filter');\r\n        expansor.setAttribute('id',filterID);\r\n        var feFlood = document.createElementNS(svgNS,'feFlood');\r\n        this.feFlood = feFlood;\r\n        if(!c[0].e){\r\n            feFlood.setAttribute('flood-color','rgb('+c[0]+','+c[1]+','+c[2]+')');\r\n        }\r\n        feFlood.setAttribute('result','base');\r\n        expansor.appendChild(feFlood);\r\n        var feMorph = document.createElementNS(svgNS,'feMorphology');\r\n        feMorph.setAttribute('operator','dilate');\r\n        feMorph.setAttribute('in','SourceGraphic');\r\n        feMorph.setAttribute('result','bigger');\r\n        this.feMorph = feMorph;\r\n        if(!r.length){\r\n            feMorph.setAttribute('radius',this.data.sy[0].s.k);\r\n        }\r\n        expansor.appendChild(feMorph);\r\n        var feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n        feColorMatrix.setAttribute('result','mask');\r\n        feColorMatrix.setAttribute('in','bigger');\r\n        feColorMatrix.setAttribute('type','matrix');\r\n        feColorMatrix.setAttribute('values','0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0');\r\n        expansor.appendChild(feColorMatrix);\r\n        var feComposite = document.createElementNS(svgNS,'feComposite');\r\n        feComposite.setAttribute('result','drop');\r\n        feComposite.setAttribute('in','base');\r\n        feComposite.setAttribute('in2','mask');\r\n        feComposite.setAttribute('operator','in');\r\n        expansor.appendChild(feComposite);\r\n        var feBlend = document.createElementNS(svgNS,'feBlend');\r\n        feBlend.setAttribute('in','SourceGraphic');\r\n        feBlend.setAttribute('in2','drop');\r\n        feBlend.setAttribute('mode','normal');\r\n        expansor.appendChild(feBlend);\r\n        this.globalData.defs.appendChild(expansor);\r\n        var cont = document.createElementNS(svgNS,'g');\r\n        if(this.layerElement === this.parentContainer){\r\n            this.layerElement = cont;\r\n        }else{\r\n            cont.appendChild(this.layerElement);\r\n        }\r\n        cont.setAttribute('filter','url(#'+filterID+')');\r\n        if(this.data.td){\r\n            cont.setAttribute('data-td',this.data.td);\r\n        }\r\n        if(this.data.td == 3){\r\n            this.globalData.defs.appendChild(cont);\r\n        }else if(this.data.td == 2){\r\n            maskGrouper.appendChild(cont);\r\n        }else if(this.data.td == 1){\r\n            masker.appendChild(cont);\r\n        }else{\r\n            if(this.data.hasMask && this.data.tt){\r\n                this.matteElement.appendChild(cont);\r\n            }else{\r\n                this.appendNodeToParent(cont);\r\n            }\r\n        }\r\n    }*/\r\n    if(this.data.ef){\r\n        this.effectsManager = new SVGEffects(this);\r\n    }\r\n    this.checkParenting();\r\n};\r\n\r\n\r\nSVGBaseElement.prototype.setBlendMode = BaseElement.prototype.setBlendMode;\r\n\r\nSVGBaseElement.prototype.renderFrame = function(parentTransform){\r\n    if(this.data.ty === 3 || this.data.hd || !this.isVisible){\r\n        return false;\r\n    }\r\n\r\n    this.lastNum = this.currentFrameNum;\r\n    this.finalTransform.opMdf = this.firstFrame || this.finalTransform.op.mdf;\r\n    this.finalTransform.matMdf = this.firstFrame || this.finalTransform.mProp.mdf;\r\n    this.finalTransform.opacity = this.finalTransform.op.v;\r\n\r\n    var mat;\r\n    var finalMat = this.finalTransform.mat;\r\n\r\n    if(this.hierarchy){\r\n        var i = 0, len = this.hierarchy.length;\r\n        if(!this.finalTransform.matMdf) {\r\n            while(i < len) {\r\n                if(this.hierarchy[i].finalTransform.mProp.mdf) {\r\n                    this.finalTransform.matMdf = true;\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n        \r\n        if(this.finalTransform.matMdf) {\r\n            mat = this.finalTransform.mProp.v.props;\r\n            finalMat.cloneFromProps(mat);\r\n            for(i=0;i<len;i+=1){\r\n                mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                finalMat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],mat[12],mat[13],mat[14],mat[15]);\r\n            }\r\n        }\r\n        \r\n    }else if(this.isVisible){\r\n        finalMat = this.finalTransform.mProp.v;\r\n    }\r\n    if(this.finalTransform.matMdf && this.layerElement){\r\n        this.transformedElement.setAttribute('transform',finalMat.to2dCSS());\r\n    }\r\n    if(this.finalTransform.opMdf && this.layerElement){\r\n        if(this.finalTransform.op.v <= 0) {\r\n            if(!this.isTransparent && this.globalData.renderConfig.hideOnTransparent){\r\n                this.isTransparent = true;\r\n                this.hide();\r\n            }\r\n        } else if(this.hidden && this.isTransparent){\r\n            this.isTransparent = false;\r\n            this.show();\r\n        }\r\n        this.transformedElement.setAttribute('opacity',this.finalTransform.op.v);\r\n    }\r\n\r\n    if(this.data.hasMask){\r\n        this.maskManager.renderFrame(finalMat);\r\n    }\r\n    if(this.effectsManager){\r\n        this.effectsManager.renderFrame(this.firstFrame);\r\n    }\r\n    return this.isVisible;\r\n};\r\n\r\nSVGBaseElement.prototype.destroy = function(){\r\n    this.layerElement = null;\r\n    this.parentContainer = null;\r\n    if(this.matteElement) {\r\n        this.matteElement = null;\r\n    }\r\n    if(this.maskManager) {\r\n        this.maskManager.destroy();\r\n    }\r\n};\r\n\r\nSVGBaseElement.prototype.getBaseElement = function(){\r\n    return this.baseElement;\r\n};\r\nSVGBaseElement.prototype.addMasks = function(data){\r\n    this.maskManager = new MaskElement(data,this,this.globalData);\r\n};\r\n\r\nSVGBaseElement.prototype.setMatte = function(id){\r\n    if(!this.matteElement){\r\n        return;\r\n    }\r\n    this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\r\n};\r\n\r\nSVGBaseElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.layerElement.style.display = 'none';\r\n        this.hidden = true;\r\n    }\r\n};\r\n\r\nSVGBaseElement.prototype.show = function(){\r\n    if(this.isVisible && !this.isTransparent){\r\n        this.hidden = false;\r\n        this.layerElement.style.display = 'block';\r\n    }\r\n};\r\n\nfunction IShapeElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n}\r\ncreateElement(SVGBaseElement, IShapeElement);\r\n\r\nIShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nIShapeElement.prototype.lcEnum = {\r\n    '1': 'butt',\r\n    '2': 'round',\r\n    '3': 'square'\r\n}\r\n\r\nIShapeElement.prototype.ljEnum = {\r\n    '1': 'miter',\r\n    '2': 'round',\r\n    '3': 'butt'\r\n}\r\n\r\nIShapeElement.prototype.searchProcessedElement = function(elem){\r\n    var i = this.processedElements.length;\r\n    while(i){\r\n        i -= 1;\r\n        if(this.processedElements[i].elem === elem){\r\n            return this.processedElements[i].pos;\r\n        }\r\n    }\r\n    return 0;\r\n};\r\n\r\nIShapeElement.prototype.addProcessedElement = function(elem, pos){\r\n    var i = this.processedElements.length;\r\n    while(i){\r\n        i -= 1;\r\n        if(this.processedElements[i].elem === elem){\r\n            this.processedElements[i].pos = pos;\r\n            break;\r\n        }\r\n    }\r\n    if(i === 0){\r\n        this.processedElements.push({\r\n            elem: elem,\r\n            pos: pos\r\n        })\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.buildExpressionInterface = function(){};\r\n\r\nIShapeElement.prototype.createElements = function(){\r\n    //TODO check if I can use symbol so i can set its viewBox\r\n    this._parent.createElements.call(this);\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties, 0, [], true);\r\n    if(!this.data.hd || this.data.td){\r\n        styleUnselectableDiv(this.layerElement);\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.setGradientData = function(pathElement,arr,data){\r\n\r\n    var gradientId = 'gr_'+randomString(10);\r\n    var gfill;\r\n    if(arr.t === 1){\r\n        gfill = document.createElementNS(svgNS,'linearGradient');\r\n    } else {\r\n        gfill = document.createElementNS(svgNS,'radialGradient');\r\n    }\r\n    gfill.setAttribute('id',gradientId);\r\n    gfill.setAttribute('spreadMethod','pad');\r\n    gfill.setAttribute('gradientUnits','userSpaceOnUse');\r\n    var stops = [];\r\n    var stop, j, jLen;\r\n    jLen = arr.g.p*4;\r\n    for(j=0;j<jLen;j+=4){\r\n        stop = document.createElementNS(svgNS,'stop');\r\n        gfill.appendChild(stop);\r\n        stops.push(stop);\r\n    }\r\n    pathElement.setAttribute( arr.ty === 'gf' ? 'fill':'stroke','url(#'+gradientId+')');\r\n    this.globalData.defs.appendChild(gfill);\r\n    data.gf = gfill;\r\n    data.cst = stops;\r\n}\r\n\r\nIShapeElement.prototype.setGradientOpacity = function(arr, data, styleOb){\r\n    if((arr.g.k.k[0].s && arr.g.k.k[0].s.length > arr.g.p*4) || arr.g.k.k.length > arr.g.p*4){\r\n        var opFill;\r\n        var stop, j, jLen;\r\n        var mask = document.createElementNS(svgNS,\"mask\");\r\n        var maskElement = document.createElementNS(svgNS, 'path');\r\n        mask.appendChild(maskElement);\r\n        var opacityId = 'op_'+randomString(10);\r\n        var maskId = 'mk_'+randomString(10);\r\n        mask.setAttribute('id',maskId);\r\n        if(arr.t === 1){\r\n            opFill = document.createElementNS(svgNS,'linearGradient');\r\n        } else {\r\n            opFill = document.createElementNS(svgNS,'radialGradient');\r\n        }\r\n        opFill.setAttribute('id',opacityId);\r\n        opFill.setAttribute('spreadMethod','pad');\r\n        opFill.setAttribute('gradientUnits','userSpaceOnUse');\r\n        jLen = arr.g.k.k[0].s ? arr.g.k.k[0].s.length : arr.g.k.k.length;\r\n        var stops = [];\r\n        for(j=arr.g.p*4;j<jLen;j+=2){\r\n            stop = document.createElementNS(svgNS,'stop');\r\n            stop.setAttribute('stop-color','rgb(255,255,255)');\r\n            //stop.setAttribute('offset',Math.round(arr.y[j][0]*100)+'%');\r\n            //stop.setAttribute('style','stop-color:rgb(255,255,255);stop-opacity:'+arr.y[j][1]);\r\n            opFill.appendChild(stop);\r\n            stops.push(stop);\r\n        }\r\n        maskElement.setAttribute( arr.ty === 'gf' ? 'fill':'stroke','url(#'+opacityId+')');\r\n        this.globalData.defs.appendChild(opFill);\r\n        this.globalData.defs.appendChild(mask);\r\n        data.of = opFill;\r\n        data.ost = stops;\r\n        styleOb.msElem = maskElement;\r\n        return maskId;\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.createStyleElement = function(data, level, dynamicProperties){\r\n    var elementData = {\r\n    };\r\n    var styleOb = {\r\n        data: data,\r\n        type: data.ty,\r\n        d: '',\r\n        ld: '',\r\n        lvl: level,\r\n        mdf: false,\r\n        closed: false\r\n    };\r\n    var pathElement = document.createElementNS(svgNS, \"path\");\r\n    elementData.o = PropertyFactory.getProp(this,data.o,0,0.01,dynamicProperties);\r\n    if(data.ty == 'st' || data.ty == 'gs') {\r\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n        ////pathElement.style.strokeLinecap = this.lcEnum[data.lc] || 'round';\r\n        pathElement.setAttribute('stroke-linejoin',this.ljEnum[data.lj] || 'round');\r\n        ////pathElement.style.strokeLinejoin = this.ljEnum[data.lj] || 'round';\r\n        pathElement.setAttribute('fill-opacity','0');\r\n        ////pathElement.style.fillOpacity = 0;\r\n        if(data.lj == 1) {\r\n            pathElement.setAttribute('stroke-miterlimit',data.ml);\r\n            ////pathElement.style.strokeMiterlimit = data.ml;\r\n        }\r\n\r\n        elementData.w = PropertyFactory.getProp(this,data.w,0,null,dynamicProperties);\r\n        if(data.d){\r\n            var d = PropertyFactory.getDashProp(this,data.d,'svg',dynamicProperties);\r\n            if(!d.k){\r\n                pathElement.setAttribute('stroke-dasharray', d.dasharray);\r\n                ////pathElement.style.strokeDasharray = d.dasharray;\r\n                pathElement.setAttribute('stroke-dashoffset', d.dashoffset);\r\n                ////pathElement.style.strokeDashoffset = d.dashoffset;\r\n            }\r\n            elementData.d = d;\r\n        }\r\n\r\n    }\r\n    if(data.ty == 'fl' || data.ty == 'st'){\r\n        elementData.c = PropertyFactory.getProp(this,data.c,1,255,dynamicProperties);\r\n    } else {\r\n        elementData.g = PropertyFactory.getGradientProp(this,data.g,dynamicProperties);\r\n        if(data.t == 2){\r\n            elementData.h = PropertyFactory.getProp(this,data.h,0,0.01,dynamicProperties);\r\n            elementData.a = PropertyFactory.getProp(this,data.a,0,degToRads,dynamicProperties);\r\n        }\r\n        elementData.s = PropertyFactory.getProp(this,data.s,1,null,dynamicProperties);\r\n        elementData.e = PropertyFactory.getProp(this,data.e,1,null,dynamicProperties);\r\n        this.setGradientData(pathElement,data,elementData, styleOb);\r\n        var maskId = this.setGradientOpacity(data,elementData, styleOb);\r\n        if(maskId){\r\n            pathElement.setAttribute('mask','url(#'+maskId+')');\r\n        }\r\n    }\r\n    elementData.elem = pathElement;\r\n    //container.appendChild(pathElement);\r\n    if(data.r === 2) {\r\n        pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if(data.ln){\r\n        pathElement.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        pathElement.setAttribute('class',data.cl);\r\n    }\r\n    styleOb.pElem = pathElement;\r\n    this.stylesList.push(styleOb);\r\n    elementData.style = styleOb;\r\n    return elementData;\r\n}\r\n\r\nIShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = {\r\n        it: [],\r\n        prevViewData: []\r\n    };\r\n    var g = document.createElementNS(svgNS,'g');\r\n    elementData.gr = g;\r\n    if(data.ln){\r\n        elementData.gr.setAttribute('id',data.ln);\r\n    }\r\n    return elementData;\r\n}\r\n\r\nIShapeElement.prototype.createTransformElement = function(data, dynamicProperties) {\r\n    var elementData = {\r\n        transform : {\r\n            op: PropertyFactory.getProp(this,data.o,0,0.01,dynamicProperties),\r\n            mProps: PropertyFactory.getProp(this,data,2,null,dynamicProperties)\r\n        },\r\n        elements: []\r\n    };\r\n    return elementData;\r\n}\r\n\r\nIShapeElement.prototype.createShapeElement = function(data, ownTransformers, level, dynamicProperties) {\r\n    var elementData = {\r\n        elements : [],\r\n        caches:[],\r\n        styles : [],\r\n        transformers: ownTransformers,\r\n        lStr: ''\r\n    };\r\n    var ty = 4;\r\n    if(data.ty == 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty == 'el'){\r\n        ty = 6;\r\n    }else if(data.ty == 'sr'){\r\n        ty = 7;\r\n    }\r\n    elementData.sh = ShapePropertyFactory.getShapeProp(this,data,ty,dynamicProperties);\r\n    elementData.lvl = level;\r\n    this.shapes.push(elementData.sh);\r\n    this.addShapeToModifiers(elementData);\r\n    return elementData;\r\n}\r\n\r\nvar cont = 0;\r\n\r\nIShapeElement.prototype.setElementStyles = function(){\r\n    var j, jLen = this.stylesList.length;\r\n    var arr = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        if(!this.stylesList[j].closed){\r\n            arr.push(this.stylesList[j]);\r\n        }\r\n    }\r\n    return arr;\r\n}\r\n\r\nIShapeElement.prototype.reloadShapes = function(){\r\n    this.firstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties, 0, [], true);\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n}\r\n\r\nIShapeElement.prototype.searchShapes = function(arr,itemsData,prevViewData,container,dynamicProperties, level, transformers, render){\r\n    var ownTransformers = [].concat(transformers);\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], styleOb, currentTransform, modifier, processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], level, dynamicProperties);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].elem);\r\n            }\r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr,dynamicProperties, level + 1, ownTransformers, render);\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].gr);\r\n            }\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i], dynamicProperties);\r\n            }\r\n            currentTransform = itemsData[i].transform;\r\n            ownTransformers.push(currentTransform);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level, dynamicProperties);\r\n            }\r\n            itemsData[i].elements = this.setElementStyles();\r\n\r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i],dynamicProperties);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData,dynamicProperties);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownStyles.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownStyles[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.addShapeToModifiers = function(data) {\r\n    var i, len = this.shapeModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.shapeModifiers[i].addShape(data);\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.renderModifiers = function() {\r\n    if(!this.shapeModifiers.length){\r\n        return;\r\n    }\r\n    var i, len = this.shapes.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.shapes[i].reset();\r\n    }\r\n\r\n\r\n    len = this.shapeModifiers.length;\r\n\r\n    for(i=len-1;i>=0;i-=1){\r\n        this.shapeModifiers[i].processShapes(this.firstFrame);\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.renderFrame = function(parentMatrix){\r\n    //this.reloadShapes();\r\n    var renderParent = this._parent.renderFrame.call(this,parentMatrix);\r\n    if(renderParent===false){\r\n        this.hide();\r\n        return;\r\n    }\r\n    if(this.hidden){\r\n        this.layerElement.style.display = 'block';\r\n        this.hidden = false;\r\n    }\r\n    this.renderModifiers();\r\n    var i, len = this.stylesList.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.stylesList[i].d = '';\r\n        this.stylesList[i].mdf = false;\r\n    }\r\n    this.renderShape(this.shapesData,this.itemsData, null);\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n        if (this.stylesList[i].ld === '0') {\r\n            this.stylesList[i].ld = '1';\r\n            this.stylesList[i].pElem.style.display = 'block';\r\n            //this.stylesList[i].parent.appendChild(this.stylesList[i].pElem);\r\n        }\r\n        if (this.stylesList[i].mdf || this.firstFrame) {\r\n            this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d);\r\n            if(this.stylesList[i].msElem){\r\n                this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n            }\r\n        }\r\n    }\r\n    if (this.firstFrame) {\r\n        this.firstFrame = false;\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.layerElement.style.display = 'none';\r\n        var i, len = this.stylesList.length;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(this.stylesList[i].ld !== '0'){\r\n                this.stylesList[i].ld = '0';\r\n                this.stylesList[i].pElem.style.display = 'none';\r\n                if(this.stylesList[i].pElem.parentNode){\r\n                    this.stylesList[i].parent = this.stylesList[i].pElem.parentNode;\r\n                    //this.stylesList[i].pElem.parentNode.removeChild(this.stylesList[i].pElem);\r\n                }\r\n            }\r\n        }\r\n        this.hidden = true;\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.renderShape = function(items,data, container){\r\n    var i, len = items.length - 1;\r\n    var ty;\r\n    for(i=len;i>=0;i-=1){\r\n        ty = items[i].ty;\r\n        if(ty == 'tr'){\r\n            if(this.firstFrame || data[i].transform.op.mdf && container){\r\n                container.setAttribute('opacity',data[i].transform.op.v);\r\n            }\r\n            if(this.firstFrame || data[i].transform.mProps.mdf && container){\r\n                container.setAttribute('transform',data[i].transform.mProps.v.to2dCSS());\r\n            }\r\n        }else if(ty == 'sh' || ty == 'el' || ty == 'rc' || ty == 'sr'){\r\n            this.renderPath(items[i],data[i]);\r\n        }else if(ty == 'fl'){\r\n            this.renderFill(items[i],data[i]);\r\n        }else if(ty == 'gf'){\r\n            this.renderGradient(items[i],data[i]);\r\n        }else if(ty == 'gs'){\r\n            this.renderGradient(items[i],data[i]);\r\n            this.renderStroke(items[i],data[i]);\r\n        }else if(ty == 'st'){\r\n            this.renderStroke(items[i],data[i]);\r\n        }else if(ty == 'gr'){\r\n            this.renderShape(items[i].it,data[i].it, data[i].gr);\r\n        }else if(ty == 'tm'){\r\n            //\r\n        }\r\n    }\r\n\r\n};\r\n\r\nIShapeElement.prototype.buildShapeString = function(pathNodes, length, closed, mat) {\r\n    var i, shapeString = '';\r\n    for(i = 1; i < length; i += 1) {\r\n        if (i === 1) {\r\n            shapeString += \" M\" + mat.applyToPointStringified(pathNodes.v[0][0], pathNodes.v[0][1]);\r\n        }\r\n        shapeString += \" C\" + mat.applyToPointStringified(pathNodes.o[i - 1][0], pathNodes.o[i - 1][1]) + \" \" + mat.applyToPointStringified(pathNodes.i[i][0], pathNodes.i[i][1]) + \" \" + mat.applyToPointStringified(pathNodes.v[i][0], pathNodes.v[i][1]);\r\n    }\r\n    if (length === 1) {\r\n        shapeString += \" M\" + mat.applyToPointStringified(pathNodes.v[0][0], pathNodes.v[0][1]);\r\n    }\r\n    if (closed && length) {\r\n        shapeString += \" C\" + mat.applyToPointStringified(pathNodes.o[i - 1][0], pathNodes.o[i - 1][1]) + \" \" + mat.applyToPointStringified(pathNodes.i[0][0], pathNodes.i[0][1]) + \" \" + mat.applyToPointStringified(pathNodes.v[0][0], pathNodes.v[0][1]);\r\n        shapeString += 'z';\r\n    }\r\n    return shapeString;\r\n};\r\n\r\nIShapeElement.prototype.renderPath = function(pathData,itemData){\r\n    var len, i, j, jLen,pathStringTransformed,redraw,pathNodes,l, lLen = itemData.elements.length;\r\n    var lvl = itemData.lvl;\r\n    if(!pathData._render){\r\n        return;\r\n    }\r\n    for(l=0;l<lLen;l+=1){\r\n        if(itemData.elements[l].data._render){\r\n            redraw = itemData.sh.mdf || this.firstFrame;\r\n            pathStringTransformed = 'M0 0';\r\n            var paths = itemData.sh.paths;\r\n            jLen = paths._length;\r\n            if(itemData.elements[l].lvl < lvl){\r\n                var mat = this.mHelper.reset(), props;\r\n                var iterations = lvl - itemData.elements[l].lvl;\r\n                var k = itemData.transformers.length-1;\r\n                while(iterations > 0) {\r\n                    redraw = itemData.transformers[k].mProps.mdf || redraw;\r\n                    props = itemData.transformers[k].mProps.v.props;\r\n                    mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n                    iterations --;\r\n                    k --;\r\n                }\r\n                if(redraw){\r\n                    for(j=0;j<jLen;j+=1){\r\n                        pathNodes = paths.shapes[j];\r\n                        if(pathNodes && pathNodes._length){\r\n                            pathStringTransformed += this.buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n                        }\r\n                    }\r\n                    itemData.caches[l] = pathStringTransformed;\r\n                } else {\r\n                    pathStringTransformed = itemData.caches[l];\r\n                }\r\n            } else {\r\n                if(redraw){\r\n                    for(j=0;j<jLen;j+=1){\r\n                        pathNodes = paths.shapes[j];\r\n                        if(pathNodes && pathNodes._length){\r\n                            pathStringTransformed += this.buildShapeString(pathNodes, pathNodes._length, pathNodes.c, this.identityMatrix);\r\n                        }\r\n                    }\r\n                    itemData.caches[l] = pathStringTransformed;\r\n                } else {\r\n                    pathStringTransformed = itemData.caches[l];\r\n                }\r\n            }\r\n            itemData.elements[l].d += pathStringTransformed;\r\n            itemData.elements[l].mdf = redraw || itemData.elements[l].mdf;\r\n        } else {\r\n            itemData.elements[l].mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.renderFill = function(styleData,itemData){\r\n    var styleElem = itemData.style;\r\n\r\n    if(itemData.c.mdf || this.firstFrame){\r\n        styleElem.pElem.setAttribute('fill','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n        ////styleElem.pElem.style.fill = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o.mdf || this.firstFrame){\r\n        styleElem.pElem.setAttribute('fill-opacity',itemData.o.v);\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.renderGradient = function(styleData,itemData){\r\n    var gfill = itemData.gf;\r\n    var opFill = itemData.of;\r\n    var pt1 = itemData.s.v,pt2 = itemData.e.v;\r\n\r\n    if(itemData.o.mdf || this.firstFrame){\r\n        var attr = styleData.ty === 'gf' ? 'fill-opacity':'stroke-opacity';\r\n        itemData.elem.setAttribute(attr,itemData.o.v);\r\n    }\r\n    //clippedElement.setAttribute('transform','matrix(1,0,0,1,-100,0)');\r\n    if(itemData.s.mdf || this.firstFrame){\r\n        var attr1 = styleData.t === 1 ? 'x1':'cx';\r\n        var attr2 = attr1 === 'x1' ? 'y1':'cy';\r\n        gfill.setAttribute(attr1,pt1[0]);\r\n        gfill.setAttribute(attr2,pt1[1]);\r\n        if(opFill){\r\n            opFill.setAttribute(attr1,pt1[0]);\r\n            opFill.setAttribute(attr2,pt1[1]);\r\n        }\r\n    }\r\n    var stops, i, len, stop;\r\n    if(itemData.g.cmdf || this.firstFrame){\r\n        stops = itemData.cst;\r\n        var cValues = itemData.g.c;\r\n        len = stops.length;\r\n        for(i=0;i<len;i+=1){\r\n            stop = stops[i];\r\n            stop.setAttribute('offset',cValues[i*4]+'%');\r\n            stop.setAttribute('stop-color','rgb('+cValues[i*4+1]+','+cValues[i*4+2]+','+cValues[i*4+3]+')');\r\n        }\r\n    }\r\n    if(opFill && (itemData.g.omdf || this.firstFrame)){\r\n        stops = itemData.ost;\r\n        var oValues = itemData.g.o;\r\n        len = stops.length;\r\n        for(i=0;i<len;i+=1){\r\n            stop = stops[i];\r\n            stop.setAttribute('offset',oValues[i*2]+'%');\r\n            stop.setAttribute('stop-opacity',oValues[i*2+1]);\r\n        }\r\n    }\r\n    if(styleData.t === 1){\r\n        if(itemData.e.mdf  || this.firstFrame){\r\n            gfill.setAttribute('x2',pt2[0]);\r\n            gfill.setAttribute('y2',pt2[1]);\r\n            if(opFill){\r\n                opFill.setAttribute('x2',pt2[0]);\r\n                opFill.setAttribute('y2',pt2[1]);\r\n            }\r\n        }\r\n    } else {\r\n        var rad;\r\n        if(itemData.s.mdf || itemData.e.mdf || this.firstFrame){\r\n            rad = Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2));\r\n            gfill.setAttribute('r',rad);\r\n            if(opFill){\r\n                opFill.setAttribute('r',rad);\r\n            }\r\n        }\r\n        if(itemData.e.mdf || itemData.h.mdf || itemData.a.mdf || this.firstFrame){\r\n            if(!rad){\r\n                rad = Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2));\r\n            }\r\n            var ang = Math.atan2(pt2[1]-pt1[1], pt2[0]-pt1[0]);\r\n\r\n            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99:itemData.h.v;\r\n            var dist = rad*percent;\r\n            var x = Math.cos(ang + itemData.a.v)*dist + pt1[0];\r\n            var y = Math.sin(ang + itemData.a.v)*dist + pt1[1];\r\n            gfill.setAttribute('fx',x);\r\n            gfill.setAttribute('fy',y);\r\n            if(opFill){\r\n                opFill.setAttribute('fx',x);\r\n                opFill.setAttribute('fy',y);\r\n            }\r\n        }\r\n        //gfill.setAttribute('fy','200');\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.renderStroke = function(styleData,itemData){\r\n    var styleElem = itemData.style;\r\n    //TODO fix dashes\r\n    var d = itemData.d;\r\n    var dasharray,dashoffset;\r\n    if(d && d.k && (d.mdf || this.firstFrame)){\r\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dasharray);\r\n        ////styleElem.pElem.style.strokeDasharray = d.dasharray;\r\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset);\r\n        ////styleElem.pElem.style.strokeDashoffset = d.dashoffset;\r\n    }\r\n    if(itemData.c && (itemData.c.mdf || this.firstFrame)){\r\n        styleElem.pElem.setAttribute('stroke','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n        ////styleElem.pElem.style.stroke = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o.mdf || this.firstFrame){\r\n        styleElem.pElem.setAttribute('stroke-opacity',itemData.o.v);\r\n    }\r\n    if(itemData.w.mdf || this.firstFrame){\r\n        styleElem.pElem.setAttribute('stroke-width',itemData.w.v);\r\n        if(styleElem.msElem){\r\n            styleElem.msElem.setAttribute('stroke-width',itemData.w.v);\r\n        }\r\n        ////styleElem.pElem.style.strokeWidth = itemData.w.v;\r\n    }\r\n};\r\n\r\nIShapeElement.prototype.destroy = function(){\r\n    this._parent.destroy.call(this._parent);\r\n    this.shapeData = null;\r\n    this.itemsData = null;\r\n    this.parentContainer = null;\r\n    this.placeholder = null;\r\n};\r\n\nfunction ITextElement(data, animationItem,parentContainer,globalData){\r\n}\r\nITextElement.prototype.init = function(){\r\n    this.lettersChangedFlag = true;\r\n    this.dynamicProperties = this.dynamicProperties || [];\r\n    this.textAnimator = new TextAnimatorProperty(this.data.t, this.renderType, this);\r\n    this.textProperty = new TextProperty(this, this.data.t, this.dynamicProperties);\r\n    this._parent.init.call(this);\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function(num) {\r\n    this._parent.prepareFrame.call(this, num);\r\n    if(this.textProperty.mdf || this.textProperty.firstFrame) {\r\n        this.buildNewText();\r\n        this.textProperty.firstFrame = false;\r\n    }\r\n}\r\n\r\nITextElement.prototype.createPathShape = function(matrixHelper, shapes) {\r\n    var j,jLen = shapes.length;\r\n    var k, kLen, pathNodes;\r\n    var shapeStr = '';\r\n    for(j=0;j<jLen;j+=1){\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += this.buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n    return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function(newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n}\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function(documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if(documentData.ps){\r\n        matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n    }\r\n    matrixHelper.translate(0,-documentData.ls,0);\r\n    switch(documentData.j){\r\n        case 1:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]),0,0);\r\n            break;\r\n        case 2:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber] )/2,0,0);\r\n            break;\r\n    }\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n}\r\n\r\nITextElement.prototype.buildColor = function(colorData) {\r\n    return 'rgb(' + Math.round(colorData[0]*255) + ',' + Math.round(colorData[1]*255) + ',' + Math.round(colorData[2]*255) + ')';\r\n}\r\n\r\nITextElement.prototype.buildShapeString = IShapeElement.prototype.buildShapeString;\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function(){\r\n    this._parent.destroy.call(this._parent);\r\n};\nfunction SVGTextElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n}\r\ncreateElement(SVGBaseElement, SVGTextElement);\r\n\r\nextendPrototype(ITextElement, SVGTextElement);\r\n\r\nSVGTextElement.prototype.createElements = function(){\r\n\r\n    this._parent.createElements.call(this);\r\n\r\n\r\n    if(this.data.ln){\r\n        this.layerElement.setAttribute('id',this.data.ln);\r\n    }\r\n    if(this.data.cl){\r\n        this.layerElement.setAttribute('class',this.data.cl);\r\n    }\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n        this.textContainer = document.createElementNS(svgNS,'text');\r\n    }\r\n};\r\n\r\nSVGTextElement.prototype.buildNewText = function(){\r\n    var i, len;\r\n\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = Array.apply(null,{length:documentData ? documentData.l.length : 0});\r\n    if(documentData.fc) {\r\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    }else{\r\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n    if(documentData.sc){\r\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n    this.layerElement.setAttribute('font-size', documentData.s);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(fontData.fClass){\r\n        this.layerElement.setAttribute('class',fontData.fClass);\r\n    } else {\r\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n        var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n        this.layerElement.setAttribute('font-style', fStyle);\r\n        this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n    if(!len){\r\n        return;\r\n    }\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '', singleShape = this.data.singleShape;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var trackingOffset = documentData.tr/1000*documentData.s;\r\n    if(singleShape && !usesGlyphs) {\r\n        var tElement = this.textContainer;\r\n        var justify = '';\r\n        switch(documentData.j) {\r\n            case 1:\r\n                justify = 'end';\r\n                break;\r\n            case 2:\r\n                justify = 'middle';\r\n                break;\r\n            case 2:\r\n                justify = 'start';\r\n                break;\r\n        }\r\n        tElement.setAttribute('text-anchor',justify);\r\n        tElement.setAttribute('letter-spacing',trackingOffset);\r\n        var textContent = documentData.t.split(String.fromCharCode(13));\r\n        len = textContent.length;\r\n        var yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n        for ( i = 0; i < len; i += 1) {\r\n            tSpan = this.textSpans[i] || document.createElementNS(svgNS,'tspan');\r\n            tSpan.textContent = textContent[i];\r\n            tSpan.setAttribute('x', 0);\r\n            tSpan.setAttribute('y', yPos);\r\n            tSpan.style.display = 'inherit';\r\n            tElement.appendChild(tSpan);\r\n            this.textSpans[i] = tSpan;\r\n            yPos += documentData.lh;\r\n        }\r\n        \r\n        this.layerElement.appendChild(tElement);\r\n    } else {\r\n        var cachedSpansLength = this.textSpans.length;\r\n        var shapeData, charData;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!usesGlyphs || !singleShape || i === 0){\r\n                tSpan = cachedSpansLength > i ? this.textSpans[i] : document.createElementNS(svgNS,usesGlyphs?'path':'text');\r\n                if (cachedSpansLength <= i) {\r\n                    tSpan.setAttribute('stroke-linecap', 'butt');\r\n                    tSpan.setAttribute('stroke-linejoin','round');\r\n                    tSpan.setAttribute('stroke-miterlimit','4');\r\n                    this.textSpans[i] = tSpan;\r\n                    this.layerElement.appendChild(tSpan);\r\n                }\r\n                tSpan.style.display = 'inherit';\r\n            }\r\n            \r\n            matrixHelper.reset();\r\n            if(usesGlyphs) {\r\n                matrixHelper.scale(documentData.s / 100, documentData.s / 100);\r\n                if (singleShape) {\r\n                    if(letters[i].n) {\r\n                        xPos = -trackingOffset;\r\n                        yPos += documentData.yOffset;\r\n                        yPos += firstLine ? 1 : 0;\r\n                        firstLine = false;\r\n                    }\r\n                    this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n                    xPos += letters[i].l || 0;\r\n                    //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n                    xPos += trackingOffset;\r\n                }\r\n                charData = this.globalData.fontManager.getCharData(documentData.t.charAt(i), fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n                shapeData = charData && charData.data || {};\r\n                shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n                if(!singleShape){\r\n                    tSpan.setAttribute('d',this.createPathShape(matrixHelper,shapes));\r\n                } else {\r\n                    shapeStr += this.createPathShape(matrixHelper,shapes);\r\n                }\r\n            } else {\r\n                tSpan.textContent = letters[i].val;\r\n                tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            }\r\n            //\r\n        }\r\n        if (singleShape) {\r\n            tSpan.setAttribute('d',shapeStr);\r\n        }\r\n    }\r\n    while (i < this.textSpans.length){\r\n        this.textSpans[i].style.display = 'none';\r\n        i += 1;\r\n    }\r\n    \r\n    this._sizeChanged = true;\r\n}\r\n\r\nSVGTextElement.prototype.sourceRectAtTime = function(time){\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderLetters();\r\n    if(this._sizeChanged){\r\n        this._sizeChanged = false;\r\n        var textBox = this.layerElement.getBBox();\r\n        this.bbox = {\r\n            top: textBox.y,\r\n            left: textBox.x,\r\n            width: textBox.width,\r\n            height: textBox.height\r\n        }\r\n    }\r\n    return this.bbox;\r\n}\r\n\r\nSVGTextElement.prototype.renderLetters = function(){\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n        if(this.lettersChangedFlag || this.textAnimator.lettersChangedFlag){\r\n            this._sizeChanged = true;\r\n            var  i,len;\r\n            var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n            var letters = this.textProperty.currentData.l;\r\n\r\n            len = letters.length;\r\n            var renderedLetter, textSpan;\r\n            for(i=0;i<len;i+=1){\r\n                if(letters[i].n){\r\n                    continue;\r\n                }\r\n                renderedLetter = renderedLetters[i];\r\n                textSpan = this.textSpans[i];\r\n                if(renderedLetter.mdf.m) {\r\n                    textSpan.setAttribute('transform',renderedLetter.m);\r\n                }\r\n                if(renderedLetter.mdf.o) {\r\n                    textSpan.setAttribute('opacity',renderedLetter.o);\r\n                }\r\n                if(renderedLetter.mdf.sw){\r\n                    textSpan.setAttribute('stroke-width',renderedLetter.sw);\r\n                }\r\n                if(renderedLetter.mdf.sc){\r\n                    textSpan.setAttribute('stroke',renderedLetter.sc);\r\n                }\r\n                if(renderedLetter.mdf.fc){\r\n                    textSpan.setAttribute('fill',renderedLetter.fc);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nSVGTextElement.prototype.renderFrame = function(parentMatrix){\r\n\r\n    var renderParent = this._parent.renderFrame.call(this,parentMatrix);\r\n    if(renderParent===false){\r\n        this.hide();\r\n        return;\r\n    }\r\n    if(this.hidden){\r\n        this.show();\r\n    }\r\n    if(this.firstFrame) {\r\n        this.firstFrame = false;\r\n    }\r\n    this.renderLetters();\r\n}\nfunction SVGTintFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    if(filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k){\r\n        var feMerge = document.createElementNS(svgNS,'feMerge');\r\n        filter.appendChild(feMerge);\r\n        var feMergeNode;\r\n        feMergeNode = document.createElementNS(svgNS,'feMergeNode');\r\n        feMergeNode.setAttribute('in','SourceGraphic');\r\n        feMerge.appendChild(feMergeNode);\r\n        feMergeNode = document.createElementNS(svgNS,'feMergeNode');\r\n        feMergeNode.setAttribute('in','f2');\r\n        feMerge.appendChild(feMergeNode);\r\n    }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager.mdf){\r\n        var colorBlack = this.filterManager.effectElements[0].p.v;\r\n        var colorWhite = this.filterManager.effectElements[1].p.v;\r\n        var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\nfunction SVGFillFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager.mdf){\r\n        var color = this.filterManager.effectElements[2].p.v;\r\n        var opacity = this.filterManager.effectElements[6].p.v;\r\n        this.matrixFilter.setAttribute('values','0 0 0 0 '+color[0]+' 0 0 0 0 '+color[1]+' 0 0 0 0 '+color[2]+' 0 0 0 '+opacity+' 0');\r\n    }\r\n};\nfunction SVGStrokeEffect(elem, filterManager){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function(){\r\n\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path,groupPath, i, len;\r\n    if(this.filterManager.effectElements[1].p.v === 1){\r\n        len = this.elem.maskManager.masksProperties.length;\r\n        i = 0;\r\n    } else {\r\n        i = this.filterManager.effectElements[0].p.v - 1;\r\n        len = i + 1;\r\n    }\r\n    groupPath = document.createElementNS(svgNS,'g'); \r\n    groupPath.setAttribute('fill','none');\r\n    groupPath.setAttribute('stroke-linecap','round');\r\n    groupPath.setAttribute('stroke-dashoffset',1);\r\n    for(i;i<len;i+=1){\r\n        path = document.createElementNS(svgNS,'path');\r\n        groupPath.appendChild(path);\r\n        this.paths.push({p:path,m:i});\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 3){\r\n        var mask = document.createElementNS(svgNS,'mask');\r\n        var id = 'stms_' + randomString(10);\r\n        mask.setAttribute('id',id);\r\n        mask.setAttribute('mask-type','alpha');\r\n        mask.appendChild(groupPath);\r\n        this.elem.globalData.defs.appendChild(mask);\r\n        var g = document.createElementNS(svgNS,'g');\r\n        g.setAttribute('mask','url(' + locationHref + '#'+id+')');\r\n        if(elemChildren[0]){\r\n            g.appendChild(elemChildren[0]);\r\n        }\r\n        this.elem.layerElement.appendChild(g);\r\n        this.masker = mask;\r\n        groupPath.setAttribute('stroke','#fff');\r\n    } else if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(this.filterManager.effectElements[10].p.v === 2){\r\n            var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n            while(elemChildren.length){\r\n                this.elem.layerElement.removeChild(elemChildren[0]);\r\n            }\r\n        }\r\n        this.elem.layerElement.appendChild(groupPath);\r\n        this.elem.layerElement.removeAttribute('mask');\r\n        groupPath.setAttribute('stroke','#fff');\r\n    }\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n}\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function(forceRender){\r\n    if(!this.initialized){\r\n        this.initialize();\r\n    }\r\n    var i, len = this.paths.length;\r\n    var mask, path;\r\n    for(i=0;i<len;i+=1){\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n        if(forceRender || this.filterManager.mdf || mask.prop.mdf){\r\n            path.setAttribute('d',mask.lastPath);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[9].p.mdf || this.filterManager.effectElements[4].p.mdf || this.filterManager.effectElements[7].p.mdf || this.filterManager.effectElements[8].p.mdf || mask.prop.mdf){\r\n            var dasharrayValue;\r\n            if(this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100){\r\n                var s = Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var e = Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var l = path.getTotalLength();\r\n                dasharrayValue = '0 0 0 ' + l*s + ' ';\r\n                var lineLength = l*(e-s);\r\n                var segment = 1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n                var units = Math.floor(lineLength/segment);\r\n                var j;\r\n                for(j=0;j<units;j+=1){\r\n                    dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100 + ' ';\r\n                }\r\n                dasharrayValue += '0 ' + l*10 + ' 0 0';\r\n            } else {\r\n                dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n            }\r\n            path.setAttribute('stroke-dasharray',dasharrayValue);\r\n        }\r\n    }\r\n    if(forceRender || this.filterManager.effectElements[4].p.mdf){\r\n        this.pathMasker.setAttribute('stroke-width',this.filterManager.effectElements[4].p.v*2);\r\n    }\r\n    \r\n    if(forceRender || this.filterManager.effectElements[6].p.mdf){\r\n        this.pathMasker.setAttribute('opacity',this.filterManager.effectElements[6].p.v);\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(forceRender || this.filterManager.effectElements[3].p.mdf){\r\n            var color = this.filterManager.effectElements[3].p.v;\r\n            this.pathMasker.setAttribute('stroke','rgb('+bm_floor(color[0]*255)+','+bm_floor(color[1]*255)+','+bm_floor(color[2]*255)+')');\r\n        }\r\n    }\r\n};\nfunction SVGTritoneFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = document.createElementNS(svgNS,'feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = document.createElementNS(svgNS,'feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = document.createElementNS(svgNS,'feFuncR');\r\n    feFuncR.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = document.createElementNS(svgNS,'feFuncG');\r\n    feFuncG.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = document.createElementNS(svgNS,'feFuncB');\r\n    feFuncB.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager.mdf){\r\n        var color1 = this.filterManager.effectElements[0].p.v;\r\n        var color2 = this.filterManager.effectElements[1].p.v;\r\n        var color3 = this.filterManager.effectElements[2].p.v;\r\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0]\r\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1]\r\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2]\r\n        this.feFuncR.setAttribute('tableValues', tableR);\r\n        this.feFuncG.setAttribute('tableValues', tableG);\r\n        this.feFuncB.setAttribute('tableValues', tableB);\r\n        //var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\nfunction SVGProLevelsFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = document.createElementNS(svgNS,'feComponentTransfer');\r\n    var feFuncR, feFuncG, feFuncB;\r\n    \r\n    if(effectElements[9].p.k || effectElements[9].p.v !== 0 || effectElements[10].p.k || effectElements[10].p.v !== 1 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 0 || effectElements[13].p.k || effectElements[13].p.v !== 1){\r\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    }\r\n    if(effectElements[16].p.k || effectElements[16].p.v !== 0 || effectElements[17].p.k || effectElements[17].p.v !== 1 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 0 || effectElements[20].p.k || effectElements[20].p.v !== 1){\r\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    }\r\n    if(effectElements[23].p.k || effectElements[23].p.v !== 0 || effectElements[24].p.k || effectElements[24].p.v !== 1 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 0 || effectElements[27].p.k || effectElements[27].p.v !== 1){\r\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n    if(effectElements[30].p.k || effectElements[30].p.v !== 0 || effectElements[31].p.k || effectElements[31].p.v !== 1 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 0 || effectElements[34].p.k || effectElements[34].p.v !== 1){\r\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    }\r\n    \r\n    if(this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA){\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        feComponentTransfer = document.createElementNS(svgNS,'feComponentTransfer');\r\n    }\r\n\r\n    if(effectElements[2].p.k || effectElements[2].p.v !== 0 || effectElements[3].p.k || effectElements[3].p.v !== 1 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 0 || effectElements[6].p.k || effectElements[6].p.v !== 1){\r\n\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function(type, feComponentTransfer) {\r\n    var feFunc = document.createElementNS(svgNS,type);\r\n    feFunc.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function(inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null,{length:segments});\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack; \r\n    var inputDelta = inputWhite - inputBlack; \r\n    while(cnt <= 256) {\r\n        perc = cnt/256;\r\n        if(perc <= min){\r\n            colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n        } else if(perc >= max){\r\n            colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n        } else {\r\n            colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n        }\r\n        table[pos++] = colorValue;\r\n        cnt += 256/(segments-1);\r\n    }\r\n    return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager.mdf){\r\n        var val, cnt, perc, bezier;\r\n        var effectElements = this.filterManager.effectElements;\r\n        if(this.feFuncRComposed && (forceRender || effectElements[2].p.mdf || effectElements[3].p.mdf || effectElements[4].p.mdf || effectElements[5].p.mdf || effectElements[6].p.mdf)){\r\n            val = this.getTableValue(effectElements[2].p.v,effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v);\r\n            this.feFuncRComposed.setAttribute('tableValues',val);\r\n            this.feFuncGComposed.setAttribute('tableValues',val);\r\n            this.feFuncBComposed.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncR && (forceRender || effectElements[9].p.mdf || effectElements[10].p.mdf || effectElements[11].p.mdf || effectElements[12].p.mdf || effectElements[13].p.mdf)){\r\n            val = this.getTableValue(effectElements[9].p.v,effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v);\r\n            this.feFuncR.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncG && (forceRender || effectElements[16].p.mdf || effectElements[17].p.mdf || effectElements[18].p.mdf || effectElements[19].p.mdf || effectElements[20].p.mdf)){\r\n            val = this.getTableValue(effectElements[16].p.v,effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v);\r\n            this.feFuncG.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncB && (forceRender || effectElements[23].p.mdf || effectElements[24].p.mdf || effectElements[25].p.mdf || effectElements[26].p.mdf || effectElements[27].p.mdf)){\r\n            val = this.getTableValue(effectElements[23].p.v,effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v);\r\n            this.feFuncB.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncA && (forceRender || effectElements[30].p.mdf || effectElements[31].p.mdf || effectElements[32].p.mdf || effectElements[33].p.mdf || effectElements[34].p.mdf)){\r\n            val = this.getTableValue(effectElements[30].p.v,effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v);\r\n            this.feFuncA.setAttribute('tableValues',val);\r\n        }\r\n        \r\n    }\r\n};\nfunction SVGDropShadowEffect(filter, filterManager){\r\n    /*<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/> <!-- stdDeviation is how much to blur -->\r\n  <feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/> <!-- how much to offset -->\r\n  <feMerge> \r\n    <feMergeNode/> <!-- this contains the offset blurred image -->\r\n    <feMergeNode in=\"SourceGraphic\"/> <!-- this contains the element that the filter is applied to -->\r\n  </feMerge>*/\r\n  /*<feFlood flood-color=\"#3D4574\" flood-opacity=\"0.5\" result=\"offsetColor\"/>*/\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','400%');\r\n    filter.setAttribute('height','400%');\r\n    this.filterManager = filterManager;\r\n\r\n    var feGaussianBlur = document.createElementNS(svgNS,'feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in','SourceAlpha');\r\n    feGaussianBlur.setAttribute('result','drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation','0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n\r\n    var feOffset = document.createElementNS(svgNS,'feOffset');\r\n    feOffset.setAttribute('dx','25');\r\n    feOffset.setAttribute('dy','0');\r\n    feOffset.setAttribute('in','drop_shadow_1');\r\n    feOffset.setAttribute('result','drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = document.createElementNS(svgNS,'feFlood');\r\n    feFlood.setAttribute('flood-color','#00ff00');\r\n    feFlood.setAttribute('flood-opacity','1');\r\n    feFlood.setAttribute('result','drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n\r\n    var feComposite = document.createElementNS(svgNS,'feComposite');\r\n    feComposite.setAttribute('in','drop_shadow_3');\r\n    feComposite.setAttribute('in2','drop_shadow_2');\r\n    feComposite.setAttribute('operator','in');\r\n    feComposite.setAttribute('result','drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n\r\n\r\n    var feMerge = document.createElementNS(svgNS,'feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = document.createElementNS(svgNS,'feMergeNode');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = document.createElementNS(svgNS,'feMergeNode');\r\n    feMergeNode.setAttribute('in','SourceGraphic');\r\n    this.feMergeNode = feMergeNode;\r\n    this.feMerge = feMerge;\r\n    this.originalNodeAdded = false;\r\n    feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager.mdf){\r\n        if(forceRender || this.filterManager.effectElements[4].p.mdf){\r\n            this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[0].p.mdf){\r\n            var col = this.filterManager.effectElements[0].p.v;\r\n            this.feFlood.setAttribute('flood-color',rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)));\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[1].p.mdf){\r\n            this.feFlood.setAttribute('flood-opacity',this.filterManager.effectElements[1].p.v/255);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[2].p.mdf || this.filterManager.effectElements[3].p.mdf){\r\n            var distance = this.filterManager.effectElements[3].p.v\r\n            var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads\r\n            var x = distance * Math.cos(angle)\r\n            var y = distance * Math.sin(angle)\r\n            this.feOffset.setAttribute('dx', x);\r\n            this.feOffset.setAttribute('dy', y);\r\n        }\r\n        /*if(forceRender || this.filterManager.effectElements[5].p.mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\r\n    }\r\n};\nfunction SVGMatte3Effect(filterElem, filterManager, elem){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = document.createElementNS(svgNS,'g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function(elem, mask) {\r\n    var masker = document.createElementNS(svgNS,'mask');\r\n    masker.setAttribute('id',mask.layerId);\r\n    masker.setAttribute('mask-type','alpha');\r\n    masker.appendChild(mask.layerElement);\r\n    elem.setMatte(mask.layerId);\r\n    mask.data.hd = false;\r\n    var defs = elem.globalData.defs;\r\n    defs.appendChild(masker);\r\n}\r\n\r\nSVGMatte3Effect.prototype.initialize = function() {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var i = 0, len = this.elem.comp.elements.length;\r\n    while(i < len) {\r\n    \tif(this.elem.comp.elements[i].data.ind === ind) {\r\n    \t\tthis.setElementAsMask(this.elem, this.elem.comp.elements[i]);\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n    this.initialized = true;\r\n}\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function() {\r\n\tif(!this.initialized) {\r\n\t\tthis.initialize();\r\n\t}\r\n}\nfunction SVGEffects(elem){\r\n    var i, len = elem.data.ef.length;\r\n    var filId = randomString(10);\r\n    var fil = filtersFactory.createFilter(filId);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n    for(i=0;i<len;i+=1){\r\n        if(elem.data.ef[i].ty === 20){\r\n            count += 1;\r\n            filterManager = new SVGTintFilter(fil, elem.effects.effectElements[i]);\r\n            this.filters.push(filterManager);\r\n        }else if(elem.data.ef[i].ty === 21){\r\n            count += 1;\r\n            filterManager = new SVGFillFilter(fil, elem.effects.effectElements[i]);\r\n            this.filters.push(filterManager);\r\n        }else if(elem.data.ef[i].ty === 22){\r\n            filterManager = new SVGStrokeEffect(elem, elem.effects.effectElements[i]);\r\n            this.filters.push(filterManager);\r\n        }else if(elem.data.ef[i].ty === 23){\r\n            count += 1;\r\n            filterManager = new SVGTritoneFilter(fil, elem.effects.effectElements[i]);\r\n            this.filters.push(filterManager);\r\n        }else if(elem.data.ef[i].ty === 24){\r\n            count += 1;\r\n            filterManager = new SVGProLevelsFilter(fil, elem.effects.effectElements[i]);\r\n            this.filters.push(filterManager);\r\n        }else if(elem.data.ef[i].ty === 25){\r\n            count += 1;\r\n            filterManager = new SVGDropShadowEffect(fil, elem.effects.effectElements[i]);\r\n            this.filters.push(filterManager);\r\n        }else if(elem.data.ef[i].ty === 28){\r\n            //count += 1;\r\n            filterManager = new SVGMatte3Effect(fil, elem.effects.effectElements[i], elem);\r\n            this.filters.push(filterManager);\r\n        }\r\n    }\r\n    if(count){\r\n        elem.globalData.defs.appendChild(fil);\r\n        elem.layerElement.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n    }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function(firstFrame){\r\n    var i, len = this.filters.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.filters[i].renderFrame(firstFrame);\r\n    }\r\n};\nfunction ICompElement(data,parentContainer,globalData,comp, placeholder){\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? Array.apply(null,{length:this.layers.length}) : [];\r\n    if(this.data.tm){\r\n        this.tm = PropertyFactory.getProp(this,this.data.tm,0,globalData.frameRate,this.dynamicProperties);\r\n    }\r\n    if(this.data.xt){\r\n        this.layerElement = document.createElementNS(svgNS,'g');\r\n        this.buildAllItems();\r\n    } else if(!globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n}\r\ncreateElement(SVGBaseElement, ICompElement);\r\n\r\nICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this._parent.hide.call(this);\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.prepareFrame = function(num){\r\n    this._parent.prepareFrame.call(this,num);\r\n    if(this.isVisible===false && !this.data.xt){\r\n        return;\r\n    }\r\n\r\n    if(this.tm){\r\n        var timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n        this.renderedFrame = timeRemapped;\r\n    } else {\r\n        this.renderedFrame = num/this.data.sr;\r\n    }\r\n    var i,len = this.elements.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(this.renderedFrame);\r\n    }\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.renderFrame = function(parentMatrix){\r\n    var renderParent = this._parent.renderFrame.call(this,parentMatrix);\r\n    var i,len = this.layers.length;\r\n    if(renderParent===false){\r\n        this.hide();\r\n        return;\r\n    }\r\n\r\n    if(this.hidden) {\r\n        this.show();\r\n    }\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\r\n\r\nICompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroy = function(){\r\n    this._parent.destroy.call(this._parent);\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.checkLayers = SVGRenderer.prototype.checkLayers;\r\nICompElement.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\nICompElement.prototype.buildAllItems = SVGRenderer.prototype.buildAllItems;\r\nICompElement.prototype.buildElementParenting = SVGRenderer.prototype.buildElementParenting;\r\nICompElement.prototype.createItem = SVGRenderer.prototype.createItem;\r\nICompElement.prototype.createImage = SVGRenderer.prototype.createImage;\r\nICompElement.prototype.createComp = SVGRenderer.prototype.createComp;\r\nICompElement.prototype.createSolid = SVGRenderer.prototype.createSolid;\r\nICompElement.prototype.createShape = SVGRenderer.prototype.createShape;\r\nICompElement.prototype.createText = SVGRenderer.prototype.createText;\r\nICompElement.prototype.createBase = SVGRenderer.prototype.createBase;\r\nICompElement.prototype.appendElementInPos = SVGRenderer.prototype.appendElementInPos;\r\nICompElement.prototype.checkPendingElements = SVGRenderer.prototype.checkPendingElements;\r\nICompElement.prototype.addPendingElement = SVGRenderer.prototype.addPendingElement;\nfunction IImageElement(data,parentContainer,globalData,comp,placeholder){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp,placeholder);\r\n}\r\ncreateElement(SVGBaseElement, IImageElement);\r\n\r\nIImageElement.prototype.createElements = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n    this._parent.createElements.call(this);\r\n\r\n    this.innerElem = document.createElementNS(svgNS,'image');\r\n    this.innerElem.setAttribute('width',this.assetData.w+\"px\");\r\n    this.innerElem.setAttribute('height',this.assetData.h+\"px\");\r\n    this.innerElem.setAttribute('preserveAspectRatio','xMidYMid slice');\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n    this.maskedElement = this.innerElem;\r\n    this.layerElement.appendChild(this.innerElem);\r\n    if(this.data.ln){\r\n        this.layerElement.setAttribute('id',this.data.ln);\r\n    }\r\n    if(this.data.cl){\r\n        this.layerElement.setAttribute('class',this.data.cl);\r\n    }\r\n\r\n};\r\n\r\nIImageElement.prototype.renderFrame = function(parentMatrix){\r\n    var renderParent = this._parent.renderFrame.call(this,parentMatrix);\r\n    if(renderParent===false){\r\n        this.hide();\r\n        return;\r\n    }\r\n    if(this.hidden){\r\n        this.show();\r\n    }\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\r\n\r\nIImageElement.prototype.destroy = function(){\r\n    this._parent.destroy.call(this._parent);\r\n    this.innerElem =  null;\r\n};\nfunction ISolidElement(data,parentContainer,globalData,comp, placeholder){\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n}\r\ncreateElement(SVGBaseElement, ISolidElement);\r\n\r\nISolidElement.prototype.createElements = function(){\r\n    this._parent.createElements.call(this);\r\n\r\n    var rect = document.createElementNS(svgNS,'rect');\r\n    ////rect.style.width = this.data.sw;\r\n    ////rect.style.height = this.data.sh;\r\n    ////rect.style.fill = this.data.sc;\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n    this.innerElem = rect;\r\n    if(this.data.ln){\r\n        this.layerElement.setAttribute('id',this.data.ln);\r\n    }\r\n    if(this.data.cl){\r\n        this.layerElement.setAttribute('class',this.data.cl);\r\n    }\r\n};\r\n\r\nISolidElement.prototype.renderFrame = IImageElement.prototype.renderFrame;\r\nISolidElement.prototype.destroy = IImageElement.prototype.destroy;\r\n\nvar animationManager = (function(){\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var idled = true;\r\n    var playingAnimationsNum = 0;\r\n\r\n    function removeElement(ev){\r\n        var i = 0;\r\n        var animItem = ev.target;\r\n        while(i<len) {\r\n            if (registeredAnimations[i].animation === animItem) {\r\n                registeredAnimations.splice(i, 1);\r\n                i -= 1;\r\n                len -= 1;\r\n                if(!animItem.isPaused){\r\n                    subtractPlayingCount();\r\n                }\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function registerAnimation(element, animationData){\r\n        if(!element){\r\n            return null;\r\n        }\r\n        var i=0;\r\n        while(i<len){\r\n            if(registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null ){\r\n                return registeredAnimations[i].animation;\r\n            }\r\n            i+=1;\r\n        }\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, element);\r\n        animItem.setData(element, animationData);\r\n        return animItem;\r\n    }\r\n\r\n    function addPlayingCount(){\r\n        playingAnimationsNum += 1;\r\n        activate();\r\n    }\r\n\r\n    function subtractPlayingCount(){\r\n        playingAnimationsNum -= 1;\r\n        if(playingAnimationsNum === 0){\r\n            idled = true;\r\n        }\r\n    }\r\n\r\n    function setupAnimation(animItem, element){\r\n        animItem.addEventListener('destroy',removeElement);\r\n        animItem.addEventListener('_active',addPlayingCount);\r\n        animItem.addEventListener('_idle',subtractPlayingCount);\r\n        registeredAnimations.push({elem: element,animation:animItem});\r\n        len += 1;\r\n    }\r\n\r\n    function loadAnimation(params){\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, null);\r\n        animItem.setParams(params);\r\n        return animItem;\r\n    }\r\n\r\n\r\n    function setSpeed(val,animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setSpeed(val, animation);\r\n        }\r\n    }\r\n\r\n    function setDirection(val, animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setDirection(val, animation);\r\n        }\r\n    }\r\n\r\n    function play(animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.play(animation);\r\n        }\r\n    }\r\n\r\n    function moveFrame (value, animation) {\r\n        initTime = Date.now();\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.moveFrame(value,animation);\r\n        }\r\n    }\r\n\r\n    function resume(nowTime) {\r\n\r\n        var elapsedTime = nowTime - initTime;\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n        }\r\n        initTime = nowTime;\r\n        if(!idled) {\r\n            window.requestAnimationFrame(resume);\r\n        }\r\n    }\r\n\r\n    function first(nowTime){\r\n        initTime = nowTime;\r\n        window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.pause(animation);\r\n        }\r\n    }\r\n\r\n    function goToAndStop(value,isFrame,animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.goToAndStop(value,isFrame,animation);\r\n        }\r\n    }\r\n\r\n    function stop(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.stop(animation);\r\n        }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.togglePause(animation);\r\n        }\r\n    }\r\n\r\n    function destroy(animation) {\r\n        var i;\r\n        for(i=(len-1);i>=0;i-=1){\r\n            registeredAnimations[i].animation.destroy(animation);\r\n        }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer){\r\n        var animElements = document.getElementsByClassName('bodymovin');\r\n        var i, len = animElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(renderer){\r\n                animElements[i].setAttribute('data-bm-type',renderer);\r\n            }\r\n            registerAnimation(animElements[i], animationData);\r\n        }\r\n        if(standalone && len === 0){\r\n            if(!renderer){\r\n                renderer = 'svg';\r\n            }\r\n            var body = document.getElementsByTagName('body')[0];\r\n            body.innerHTML = '';\r\n            var div = document.createElement('div');\r\n            div.style.width = '100%';\r\n            div.style.height = '100%';\r\n            div.setAttribute('data-bm-type',renderer);\r\n            body.appendChild(div);\r\n            registerAnimation(div, animationData);\r\n        }\r\n    }\r\n\r\n    function resize(){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.resize();\r\n        }\r\n    }\r\n\r\n    function start(){\r\n        window.requestAnimationFrame(first);\r\n    }\r\n\r\n    function activate(){\r\n        if(idled){\r\n            idled = false;\r\n            window.requestAnimationFrame(first);\r\n        }\r\n    }\r\n\r\n    //start();\r\n\r\n    setTimeout(start,0);\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.moveFrame = moveFrame;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize;\r\n    moduleOb.start = start;\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    return moduleOb;\r\n}());\r\n\nvar AnimationItem = function () {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.pendingElements = 0;\r\n    this.playCount = 0;\r\n    this.prerenderFramesFlag = true;\r\n    this.animationData = {};\r\n    this.layers = [];\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = randomString(10);\r\n    this.scaleMode = 'fit';\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.subframeEnabled = subframeEnabled;\r\n    this.segments = [];\r\n    this.pendingSegment = false;\r\n    this._idle = true;\r\n    this.projectInterface = ProjectInterface();\r\n};\r\n\r\nAnimationItem.prototype.setParams = function(params) {\r\n    var self = this;\r\n    if(params.context){\r\n        this.context = params.context;\r\n    }\r\n    if(params.wrapper || params.container){\r\n        this.wrapper = params.wrapper || params.container;\r\n    }\r\n    var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\r\n    switch(animType){\r\n        case 'canvas':\r\n            this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'svg':\r\n            this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'hybrid':\r\n        case 'html':\r\n        default:\r\n            this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n            break;\r\n    }\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if(params.loop === '' || params.loop === null){\r\n    }else if(params.loop === false){\r\n        this.loop = false;\r\n    }else if(params.loop === true){\r\n        this.loop = true;\r\n    }else{\r\n        this.loop = parseInt(params.loop);\r\n    }\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name :  '';\r\n    this.prerenderFramesFlag = 'prerender' in params ? params.prerender : true;\r\n    this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments :  true;\r\n    if(params.animationData){\r\n        self.configAnimation(params.animationData);\r\n    }else if(params.path){\r\n        if(params.path.substr(-4) != 'json'){\r\n            if (params.path.substr(-1, 1) != '/') {\r\n                params.path += '/';\r\n            }\r\n            params.path += 'data.json';\r\n        }\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        if(params.path.lastIndexOf('\\\\') != -1){\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('\\\\')+1);\r\n        }else{\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('/')+1);\r\n        }\r\n        this.assetsPath = params.assetsPath;\r\n        this.fileName = params.path.substr(params.path.lastIndexOf('/')+1);\r\n        this.fileName = this.fileName.substr(0,this.fileName.lastIndexOf('.json'));\r\n        xhr.open('GET', params.path, true);\r\n        xhr.send();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4) {\r\n                if(xhr.status == 200){\r\n                    self.configAnimation(JSON.parse(xhr.responseText));\r\n                }else{\r\n                    try{\r\n                        var response = JSON.parse(xhr.responseText);\r\n                        self.configAnimation(response);\r\n                    }catch(err){\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    var params = {\r\n        wrapper: wrapper,\r\n        animationData: animationData ? (typeof animationData  === \"object\") ? animationData : JSON.parse(animationData) : null\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value :  wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value :  wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value :  wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value :  wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n    if(loop === ''){\r\n    }else if(loop === 'false'){\r\n        params.loop = false;\r\n    }else if(loop === 'true'){\r\n        params.loop = true;\r\n    }else{\r\n        params.loop = parseInt(loop);\r\n    }\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value :  wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value :  wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== \"false\";\r\n\r\n    params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value :  wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value :  '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value :  wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value :  wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if(prerender === 'false'){\r\n        params.prerender = false;\r\n    }\r\n    this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function(data) {\r\n    if(data.op > this.animationData.op){\r\n        this.animationData.op = data.op;\r\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n        this.animationData.tf = this.totalFrames;\r\n    }\r\n    var layers = this.animationData.layers;\r\n    var i, len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j, jLen = newLayers.length;\r\n    for(j=0;j<jLen;j+=1){\r\n        i = 0;\r\n        while(i<len){\r\n            if(layers[i].id == newLayers[j].id){\r\n                layers[i] = newLayers[j];\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    if(data.chars || data.fonts){\r\n        this.renderer.globalData.fontManager.addChars(data.chars);\r\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n    if(data.assets){\r\n        len = data.assets.length;\r\n        for(i = 0; i < len; i += 1){\r\n            this.animationData.assets.push(data.assets[i]);\r\n        }\r\n    }\r\n    //this.totalFrames = 50;\r\n    //this.animationData.tf = 50;\r\n    this.animationData.__complete = false;\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.renderer.includeLayers(data.layers);\r\n    if(expressionsPlugin){\r\n        expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.renderer.renderFrame(null);\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments || segments.length === 0 || !this.autoloadSegments){\r\n        this.trigger('data_ready');\r\n        this.timeCompleted = this.animationData.tf;\r\n        return;\r\n    }\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var xhr = new XMLHttpRequest();\r\n    var self = this;\r\n    var segmentPath = this.path+this.fileName+'_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    xhr.open('GET', segmentPath, true);\r\n    xhr.send();\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4) {\r\n            if(xhr.status == 200){\r\n                self.includeLayers(JSON.parse(xhr.responseText));\r\n            }else{\r\n                try{\r\n                    var response = JSON.parse(xhr.responseText);\r\n                    self.includeLayers(response);\r\n                }catch(err){\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments) {\r\n        this.timeCompleted = this.animationData.tf;\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n    var _this = this;\r\n    if(this.renderer && this.renderer.destroyed){\r\n        return;\r\n    }\r\n    //console.log(JSON.parse(JSON.stringify(animData)));\r\n    //animData.w = Math.round(animData.w/blitter);\r\n    //animData.h = Math.round(animData.h/blitter);\r\n    this.animationData = animData;\r\n    this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n    this.animationData.tf = this.totalFrames;\r\n    this.renderer.configAnimation(animData);\r\n    if(!animData.assets){\r\n        animData.assets = [];\r\n    }\r\n    if(animData.comps) {\r\n        animData.assets = animData.assets.concat(animData.comps);\r\n        animData.comps = null;\r\n    }\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n\r\n    this.layers = this.animationData.layers;\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.firstFrame = Math.round(this.animationData.ip);\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.trigger('config_ready');\r\n    this.imagePreloader = new ImagePreloader();\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(animData.assets, function(err) {\r\n        if(!err) {\r\n            _this.trigger('loaded_images');\r\n        }\r\n    });\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    if(this.renderer.globalData.fontManager){\r\n        this.waitForFontsLoaded();\r\n    }else{\r\n        dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n        this.checkLoaded();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = (function(){\r\n    function checkFontsLoaded(){\r\n        if(this.renderer.globalData.fontManager.loaded){\r\n            dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n            //this.renderer.buildItems(this.animationData.layers);\r\n            this.checkLoaded();\r\n        }else{\r\n            setTimeout(checkFontsLoaded.bind(this),20);\r\n        }\r\n    }\r\n\r\n    return function(){\r\n        checkFontsLoaded.bind(this)();\r\n    }\r\n}());\r\n\r\nAnimationItem.prototype.addPendingElement = function () {\r\n    this.pendingElements += 1;\r\n}\r\n\r\nAnimationItem.prototype.elementLoaded = function () {\r\n    this.pendingElements--;\r\n    this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n    if (this.pendingElements === 0) {\r\n        if(expressionsPlugin){\r\n            expressionsPlugin.initExpressions(this);\r\n        }\r\n        this.renderer.initItems();\r\n        setTimeout(function(){\r\n            this.trigger('DOMLoaded');\r\n        }.bind(this),0);\r\n        this.isLoaded = true;\r\n        this.gotoFrame();\r\n        if(this.autoplay){\r\n            this.play();\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n    this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function(flag){\r\n    this.subframeEnabled = flag ? true : false;\r\n}\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n    if(this.subframeEnabled){\r\n        this.currentFrame = this.currentRawFrame;\r\n    }else{\r\n        this.currentFrame = Math.floor(this.currentRawFrame);\r\n    }\r\n\r\n    if(this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted){\r\n        this.currentFrame = this.timeCompleted;\r\n    }\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n    if(this.isLoaded === false){\r\n        return;\r\n    }\r\n    //console.log('this.currentFrame:',this.currentFrame + this.firstFrame);\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.isPaused = false;\r\n        if(this._idle){\r\n            this._idle = false;\r\n            this.trigger('_active');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === false){\r\n        this.isPaused = true;\r\n        if(!this.pendingSegment){\r\n            this._idle = true;\r\n            this.trigger('_idle');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.play();\r\n    }else{\r\n        this.pause();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.pause();\r\n    this.currentFrame = this.currentRawFrame = 0;\r\n    this.playCount = 0;\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(isFrame){\r\n        this.setCurrentRawFrameValue(value);\r\n    }else{\r\n        this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n    this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    this.goToAndStop(value, isFrame, name);\r\n    this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n    if(this.pendingSegment){\r\n        this.pendingSegment = false;\r\n        this.adjustSegment(this.segments.shift());\r\n        if(this.isPaused){\r\n            this.play();\r\n        }\r\n        return;\r\n    }\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n        return;\r\n    }\r\n    this.setCurrentRawFrameValue(this.currentRawFrame + value * this.frameModifier);\r\n};\r\n\r\nAnimationItem.prototype.updateAnimation = function (perc) {\r\n    this.setCurrentRawFrameValue(this.totalFrames * perc);\r\n};\r\n\r\nAnimationItem.prototype.moveFrame = function (value, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.setCurrentRawFrameValue(this.currentRawFrame+value);\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function(arr){\r\n    this.playCount = 0;\r\n    if(arr[1] < arr[0]){\r\n        if(this.frameModifier > 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(-1);\r\n            }\r\n        }\r\n        this.totalFrames = arr[0] - arr[1];\r\n        this.firstFrame = arr[1];\r\n        this.setCurrentRawFrameValue(this.totalFrames - 0.01);\r\n    } else if(arr[1] > arr[0]){\r\n        if(this.frameModifier < 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(1);\r\n            }\r\n        }\r\n        this.totalFrames = arr[1] - arr[0];\r\n        this.firstFrame = arr[0];\r\n        this.setCurrentRawFrameValue(0);\r\n    }\r\n    this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init,end) {\r\n    var pendingFrame = -1;\r\n    if(this.isPaused) {\r\n        if (this.currentRawFrame + this.firstFrame < init) {\r\n            pendingFrame = init;\r\n        } else if (this.currentRawFrame + this.firstFrame > end) {\r\n            pendingFrame = end - init - 0.01;\r\n        }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.totalFrames = end - init;\r\n    if(pendingFrame !== -1) {\r\n        this.goToAndStop(pendingFrame,true);\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.playSegments = function (arr,forceFlag) {\r\n    if(typeof arr[0] === 'object'){\r\n        var i, len = arr.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.segments.push(arr[i]);\r\n        }\r\n    }else{\r\n        this.segments.push(arr);\r\n    }\r\n    if(forceFlag){\r\n        this.adjustSegment(this.segments.shift());\r\n    }\r\n    if(this.isPaused){\r\n        this.play();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n    if(forceFlag){\r\n        this.adjustSegment(this.segments.shift());\r\n    }\r\n};\r\nAnimationItem.prototype.checkSegments = function(){\r\n    if(this.segments.length){\r\n        this.pendingSegment = true;\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.remove = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n    if((name && this.name != name) || (this.renderer && this.renderer.destroyed)){\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function(value){\r\n    this.currentRawFrame = value;\r\n    //console.log(this.totalFrames);\r\n    if (this.currentRawFrame >= this.totalFrames) {\r\n        this.checkSegments();\r\n        if(this.loop === false){\r\n            this.currentRawFrame = this.totalFrames - 0.01;\r\n            this.gotoFrame();\r\n            this.pause();\r\n            this.trigger('complete');\r\n            return;\r\n        }else{\r\n            this.trigger('loopComplete');\r\n            this.playCount += 1;\r\n            if((this.loop !== true && this.playCount == this.loop) || this.pendingSegment){\r\n                this.currentRawFrame = this.totalFrames - 0.01;\r\n                this.gotoFrame();\r\n                this.pause();\r\n                this.trigger('complete');\r\n                return;\r\n            } else {\r\n                this.currentRawFrame = this.currentRawFrame % this.totalFrames;\r\n            }\r\n        }\r\n    } else if (this.currentRawFrame < 0) {\r\n        this.checkSegments();\r\n        this.playCount -= 1;\r\n        if(this.playCount < 0){\r\n            this.playCount = 0;\r\n        }\r\n        if(this.loop === false  || this.pendingSegment){\r\n            this.currentRawFrame = 0;\r\n            this.gotoFrame();\r\n            this.pause();\r\n            this.trigger('complete');\r\n            return;\r\n        }else{\r\n            this.trigger('loopComplete');\r\n            this.currentRawFrame = (this.totalFrames + this.currentRawFrame) % this.totalFrames;\r\n            this.gotoFrame();\r\n            return;\r\n        }\r\n    }\r\n\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n    if(this.assetsPath){\r\n        var imagePath = assetData.p;\r\n        if(imagePath.indexOf('images/') !== -1){\r\n            imagePath = imagePath.split('/')[1];\r\n        }\r\n        path = this.assetsPath + imagePath;\r\n    } else {\r\n        path = this.path;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n    }\r\n    return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0, len = this.assets.length;\r\n    while (i < len) {\r\n        if(id == this.assets[i].id){\r\n            return this.assets[i];\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getAssets = function () {\r\n    return this.assets;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function(name){\r\n    if(this._cbs && this._cbs[name]){\r\n        switch(name){\r\n            case 'enterFrame':\r\n                this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n                break;\r\n            case 'loopComplete':\r\n                this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n                break;\r\n            case 'complete':\r\n                this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));\r\n                break;\r\n            case 'segmentStart':\r\n                this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n                break;\r\n            case 'destroy':\r\n                this.triggerEvent(name,new BMDestroyEvent(name,this));\r\n                break;\r\n            default:\r\n                this.triggerEvent(name);\r\n        }\r\n    }\r\n    if(name === 'enterFrame' && this.onEnterFrame){\r\n        this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n    }\r\n    if(name === 'loopComplete' && this.onLoopComplete){\r\n        this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n    }\r\n    if(name === 'complete' && this.onComplete){\r\n        this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult));\r\n    }\r\n    if(name === 'segmentStart' && this.onSegmentStart){\r\n        this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n    }\r\n    if(name === 'destroy' && this.onDestroy){\r\n        this.onDestroy.call(this,new BMDestroyEvent(name,this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.addEventListener = _addEventListener;\r\nAnimationItem.prototype.removeEventListener = _removeEventListener;\r\nAnimationItem.prototype.triggerEvent = _triggerEvent;\r\n\nfunction CanvasRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n        clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n        context: (config && config.context) || null,\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.renderConfig.dpr = (config && config.dpr) || 1;\r\n    if (this.animationItem.wrapper) {\r\n        this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n    }\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1\r\n    };\r\n    this.contextData = {\r\n        saved : Array.apply(null,{length:15}),\r\n        savedOp: Array.apply(null,{length:15}),\r\n        cArrPos : 0,\r\n        cTr : new Matrix(),\r\n        cO : 1\r\n    };\r\n    var i, len = 15;\r\n    for(i=0;i<len;i+=1){\r\n        this.contextData.saved[i] = Array.apply(null,{length:16});\r\n    }\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n}\r\nextendPrototype(BaseRenderer,CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createBase = function (data) {\r\n    return new CVBaseElement(data, this, this.globalData);\r\n};\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this, this.globalData);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this, this.globalData);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this, this.globalData);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this, this.globalData);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this, this.globalData);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxTransform = function(props){\r\n    if(props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0){\r\n        return;\r\n    }\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);\r\n        return;\r\n    }\r\n    this.transformMat.cloneFromProps(props);\r\n    this.transformMat.transform(this.contextData.cTr.props[0],this.contextData.cTr.props[1],this.contextData.cTr.props[2],this.contextData.cTr.props[3],this.contextData.cTr.props[4],this.contextData.cTr.props[5],this.contextData.cTr.props[6],this.contextData.cTr.props[7],this.contextData.cTr.props[8],this.contextData.cTr.props[9],this.contextData.cTr.props[10],this.contextData.cTr.props[11],this.contextData.cTr.props[12],this.contextData.cTr.props[13],this.contextData.cTr.props[14],this.contextData.cTr.props[15])\r\n    //this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n    var trProps = this.contextData.cTr.props;\r\n    this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function(op){\r\n    if(op === 1){\r\n        return;\r\n    }\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n        return;\r\n    }\r\n    this.contextData.cO *= op < 0 ? 0 : op;\r\n    this.canvasContext.globalAlpha = this.contextData.cO;\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function(){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    this.contextData.cArrPos = 0;\r\n    this.contextData.cTr.reset();\r\n    this.contextData.cO = 1;\r\n};\r\n\r\nCanvasRenderer.prototype.save = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.save();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.save();\r\n    }\r\n    var props = this.contextData.cTr.props;\r\n    if(this.contextData.saved[this.contextData.cArrPos] === null || this.contextData.saved[this.contextData.cArrPos] === undefined){\r\n        this.contextData.saved[this.contextData.cArrPos] = new Array(16);\r\n    }\r\n    var i,arr = this.contextData.saved[this.contextData.cArrPos];\r\n    for(i=0;i<16;i+=1){\r\n        arr[i] = props[i];\r\n    }\r\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n    this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.restore();\r\n    }\r\n    this.contextData.cArrPos -= 1;\r\n    var popped = this.contextData.saved[this.contextData.cArrPos];\r\n    var i,arr = this.contextData.cTr.props;\r\n    for(i=0;i<16;i+=1){\r\n        arr[i] = popped[i];\r\n    }\r\n    this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]);\r\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n    this.contextData.cO = popped;\r\n    this.canvasContext.globalAlpha = popped;\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function(animData){\r\n    if(this.animationItem.wrapper){\r\n        this.animationItem.container = document.createElement('canvas');\r\n        this.animationItem.container.style.width = '100%';\r\n        this.animationItem.container.style.height = '100%';\r\n        //this.animationItem.container.style.transform = 'translate3d(0,0,0)';\r\n        //this.animationItem.container.style.webkitTransform = 'translate3d(0,0,0)';\r\n        this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style['-webkit-transform'] = \"0px 0px 0px\";\r\n        this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n        this.canvasContext = this.animationItem.container.getContext('2d');\r\n        if(this.renderConfig.className) {\r\n            this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n        }\r\n    }else{\r\n        this.canvasContext = this.renderConfig.context;\r\n    }\r\n    this.data = animData;\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.totalFrames = Math.floor(animData.tf);\r\n    this.globalData.compWidth = animData.w;\r\n    this.globalData.compHeight = animData.h;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    };\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {};\r\n    this.transformCanvas.w = animData.w;\r\n    this.transformCanvas.h = animData.h;\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts,document.body);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem);\r\n    this.globalData.addPendingElement = this.animationItem.addPendingElement.bind(this.animationItem);\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = Array.apply(null,{length:animData.layers.length});\r\n\r\n    this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n    var elementWidth,elementHeight;\r\n    if(this.animationItem.wrapper && this.animationItem.container){\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n        this.animationItem.container.setAttribute('width',elementWidth * this.renderConfig.dpr );\r\n        this.animationItem.container.setAttribute('height',elementHeight * this.renderConfig.dpr);\r\n    }else{\r\n        elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n        elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n    }\r\n    var elementRel,animationRel;\r\n    if(this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1){\r\n        var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n        var fillType = par[1] || 'meet';\r\n        var pos = par[0] || 'xMidYMid';\r\n        var xPos = pos.substr(0,4);\r\n        var yPos = pos.substr(4);\r\n        elementRel = elementWidth/elementHeight;\r\n        animationRel = this.transformCanvas.w/this.transformCanvas.h;\r\n        if(animationRel>elementRel && fillType === 'meet' || animationRel<elementRel && fillType === 'slice'){\r\n            this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        }else{\r\n            this.transformCanvas.sx = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n        }\r\n\r\n        if(xPos === 'xMid' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr;\r\n        } else if(xPos === 'xMax' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.tx = 0;\r\n        }\r\n        if(yPos === 'YMid' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2)*this.renderConfig.dpr;\r\n        } else if(yPos === 'YMax' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w)))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.ty = 0;\r\n        }\r\n\r\n    }else if(this.renderConfig.preserveAspectRatio == 'none'){\r\n        this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }else{\r\n        this.transformCanvas.sx = this.renderConfig.dpr;\r\n        this.transformCanvas.sy = this.renderConfig.dpr;\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }\r\n    this.transformCanvas.props = [this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];\r\n    var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n    if(this.renderConfig.clearCanvas) {\r\n        this.animationItem.wrapper.innerHTML = '';\r\n    }\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = len - 1; i >= 0; i-=1) {\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function(num){\r\n    if((this.renderedFrame == num && this.renderConfig.clearCanvas === true) || this.destroyed || num === null){\r\n        return;\r\n    }\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem.firstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    if(this.renderConfig.clearCanvas === true){\r\n        this.reset();\r\n        this.canvasContext.save();\r\n        //this.canvasContext.canvas.width = this.canvasContext.canvas.width;\r\n        this.canvasContext.clearRect(this.transformCanvas.tx, this.transformCanvas.ty, this.transformCanvas.w*this.transformCanvas.sx, this.transformCanvas.h*this.transformCanvas.sy);\r\n    }else{\r\n        this.save();\r\n    }\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n\r\n    //console.log('--------');\r\n    //console.log('NEW: ',num);\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i++) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    for (i = len - 1; i >= 0; i-=1) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n    if(this.renderConfig.clearCanvas !== true){\r\n        this.restore();\r\n    } else {\r\n        this.canvasContext.restore();\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    var element = this.createItem(this.layers[pos], this,this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function(){\r\n    this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function(){\r\n    this.animationItem.container.style.display = 'block';\r\n};\r\n\r\nCanvasRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = document.createElementNS(svgNS,'g');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],this.globalData.comp,this.globalData);\r\n            comp.initExpressions();\r\n            //comp.compInterface = CompExpressionInterface(comp);\r\n            //Expressions.addLayersInterface(comp.elements, this.globalData.projectInterface);\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\nfunction HybridRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1\r\n    };\r\n    this.renderConfig = {\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n\r\n}\r\n\r\nextendPrototype(BaseRenderer,HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newDOMElement = element.getBaseElement();\r\n    if(!newDOMElement){\r\n        return;\r\n    }\r\n    var layer = this.layers[pos];\r\n    if(!layer.ddd || !this.supports3d){\r\n        var i = 0;\r\n        var nextDOMElement, nextLayer;\r\n        while(i<pos){\r\n            if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement){\r\n                nextLayer = this.elements[i];\r\n                nextDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n            }\r\n            i += 1;\r\n        }\r\n        if(nextDOMElement){\r\n            if(!layer.ddd || !this.supports3d){\r\n                this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n            }\r\n        } else {\r\n            if(!layer.ddd || !this.supports3d){\r\n                this.layerElement.appendChild(newDOMElement);\r\n            }\r\n        }\r\n    } else {\r\n        this.addTo3dContainer(newDOMElement,pos);\r\n    }\r\n};\r\n\r\n\r\nHybridRenderer.prototype.createBase = function (data) {\r\n    return new SVGBaseElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n    if(!this.supports3d){\r\n        return new IShapeElement(data, this.layerElement,this.globalData,this);\r\n    }\r\n    return new HShapeElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGTextElement(data, this.layerElement,this.globalData,this);\r\n    }\r\n    return new HTextElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.layerElement,this.globalData,this);\r\n    return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n    if(!this.supports3d){\r\n        return new IImageElement(data, this.layerElement,this.globalData,this);\r\n    }\r\n    return new HImageElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n    if(!this.supports3d){\r\n        return new ICompElement(data, this.layerElement,this.globalData,this);\r\n    }\r\n    return new HCompElement(data, this.layerElement,this.globalData,this);\r\n\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n    if(!this.supports3d){\r\n        return new ISolidElement(data, this.layerElement,this.globalData,this);\r\n    }\r\n    return new HSolidElement(data, this.layerElement,this.globalData,this);\r\n};\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function(pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len) {\r\n        if(this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n            return this.threeDElements[i].perspectiveElem;\r\n        }\r\n        i += 1;\r\n    }\r\n}\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function(pos){\r\n    var perspectiveElem = document.createElement('div');\r\n    styleDiv(perspectiveElem);\r\n    perspectiveElem.style.width = this.globalData.compSize.w+'px';\r\n    perspectiveElem.style.height = this.globalData.compSize.h+'px';\r\n    perspectiveElem.style.transformOrigin = perspectiveElem.style.mozTransformOrigin = perspectiveElem.style.webkitTransformOrigin = \"50% 50%\";\r\n    var container = document.createElement('div');\r\n    styleDiv(container);\r\n    container.style.transform = container.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    perspectiveElem.appendChild(container);\r\n    this.resizerElem.appendChild(perspectiveElem);\r\n    var threeDContainerData = {\r\n        container:container,\r\n        perspectiveElem:perspectiveElem,\r\n        startPos: pos,\r\n        endPos: pos\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function(){\r\n    var i, len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.layers[i].ddd){\r\n            if(!lastThreeDContainerData){\r\n                lastThreeDContainerData = this.createThreeDContainer(i);\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        } else {\r\n            lastThreeDContainerData = null;\r\n        }\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function(elem,pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len){\r\n        if(pos <= this.threeDElements[i].endPos){\r\n            var j = this.threeDElements[i].startPos;\r\n            var nextElement;\r\n            while(j<pos){\r\n                if(this.elements[j] && this.elements[j].getBaseElement){\r\n                    nextElement = this.elements[j].getBaseElement();\r\n                }\r\n                j += 1;\r\n            }\r\n            if(nextElement){\r\n                this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n            } else {\r\n                this.threeDElements[i].container.appendChild(elem);\r\n            }\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function(animData){\r\n    var resizerElem = document.createElement('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    resizerElem.style.width = animData.w+'px';\r\n    resizerElem.style.height = animData.h+'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    resizerElem.style.transformStyle = resizerElem.style.webkitTransformStyle = resizerElem.style.mozTransformStyle = \"flat\";\r\n    if(this.renderConfig.className) {\r\n      wrapper.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    wrapper.appendChild(resizerElem);\r\n\r\n    resizerElem.style.overflow = 'hidden';\r\n    var svg = document.createElementNS(svgNS,'svg');\r\n    svg.setAttribute('width','1');\r\n    svg.setAttribute('height','1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = document.createElementNS(svgNS,'defs');\r\n    svg.appendChild(defs);\r\n    this.globalData.defs = defs;\r\n    this.data = animData;\r\n    //Mask animation\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem);\r\n    this.globalData.frameId = 0;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    };\r\n    this.globalData.frameRate = animData.fr;\r\n    this.layers = animData.layers;\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts,svg);\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        this.elements[i].destroy();\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth/elementHeight;\r\n    var animationRel = this.globalData.compSize.w/this.globalData.compSize.h;\r\n    var sx,sy,tx,ty;\r\n    if(animationRel>elementRel){\r\n        sx = elementWidth/(this.globalData.compSize.w);\r\n        sy = elementWidth/(this.globalData.compSize.w);\r\n        tx = 0;\r\n        ty = ((elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2);\r\n    }else{\r\n        sx = elementHeight/(this.globalData.compSize.h);\r\n        sy = elementHeight/(this.globalData.compSize.h);\r\n        tx = (elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2;\r\n        ty = 0;\r\n    }\r\n    this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,'+sy+',0,0,0,0,1,0,'+tx+','+ty+',0,1)';\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function(){\r\n    this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function(){\r\n    this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function(){\r\n    this.buildAllItems();\r\n    if(this.camera){\r\n        this.camera.setup();\r\n    } else {\r\n        var cWidth = this.globalData.compSize.w;\r\n        var cHeight = this.globalData.compSize.h;\r\n        var i, len = this.threeDElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.threeDElements[i].perspectiveElem.style.perspective = this.threeDElements[i].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(cWidth,2) + Math.pow(cHeight,2)) + 'px';\r\n        }\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = document.createElement('div');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],floatingContainer,this.globalData.comp,null);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\nfunction CVBaseElement(data, comp,globalData){\r\n    this.globalData = globalData;\r\n    this.data = data;\r\n    this.comp = comp;\r\n    this.canvasContext = globalData.canvasContext;\r\n    this.init();\r\n}\r\n\r\ncreateElement(BaseElement, CVBaseElement);\r\n\r\nCVBaseElement.prototype.createElements = function(){\r\n    this.checkParenting();\r\n};\r\n\r\nCVBaseElement.prototype.checkBlendMode = function(globalData){\r\n    if(globalData.blendMode !== this.data.bm) {\r\n        globalData.blendMode = this.data.bm;\r\n\r\n        var blendModeValue = '';\r\n        switch (this.data.bm) {\r\n            case 0:\r\n                blendModeValue = 'normal';\r\n                break;\r\n            case 1:\r\n                blendModeValue = 'multiply';\r\n                break;\r\n            case 2:\r\n                blendModeValue = 'screen';\r\n                break;\r\n            case 3:\r\n                blendModeValue = 'overlay';\r\n                break;\r\n            case 4:\r\n                blendModeValue = 'darken';\r\n                break;\r\n            case 5:\r\n                blendModeValue = 'lighten';\r\n                break;\r\n            case 6:\r\n                blendModeValue = 'color-dodge';\r\n                break;\r\n            case 7:\r\n                blendModeValue = 'color-burn';\r\n                break;\r\n            case 8:\r\n                blendModeValue = 'hard-light';\r\n                break;\r\n            case 9:\r\n                blendModeValue = 'soft-light';\r\n                break;\r\n            case 10:\r\n                blendModeValue = 'difference';\r\n                break;\r\n            case 11:\r\n                blendModeValue = 'exclusion';\r\n                break;\r\n            case 12:\r\n                blendModeValue = 'hue';\r\n                break;\r\n            case 13:\r\n                blendModeValue = 'saturation';\r\n                break;\r\n            case 14:\r\n                blendModeValue = 'color';\r\n                break;\r\n            case 15:\r\n                blendModeValue = 'luminosity';\r\n                break;\r\n        }\r\n        globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n    }\r\n};\r\n\r\n\r\nCVBaseElement.prototype.renderFrame = function(parentTransform){\r\n    if(this.data.ty === 3){\r\n        return false;\r\n    }\r\n        this.checkBlendMode(this.data.ty === 0?this.parentGlobalData:this.globalData);\r\n\r\n    if(!this.isVisible){\r\n        return this.isVisible;\r\n    }\r\n    this.finalTransform.opMdf = this.finalTransform.op.mdf;\r\n    this.finalTransform.matMdf = this.finalTransform.mProp.mdf;\r\n    this.finalTransform.opacity = this.finalTransform.op.v;\r\n\r\n    var mat;\r\n    var finalMat = this.finalTransform.mat;\r\n\r\n    if(this.hierarchy){\r\n        var i, len = this.hierarchy.length;\r\n        mat = this.finalTransform.mProp.v.props;\r\n        finalMat.cloneFromProps(mat);\r\n        for(i=0;i<len;i+=1){\r\n            this.finalTransform.matMdf = this.hierarchy[i].finalTransform.mProp.mdf ? true : this.finalTransform.matMdf;\r\n            mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n            finalMat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],mat[12],mat[13],mat[14],mat[15]);\r\n        }\r\n    }else{\r\n        if(!parentTransform){\r\n            finalMat.cloneFromProps(this.finalTransform.mProp.v.props);\r\n        }else{\r\n            mat = this.finalTransform.mProp.v.props;\r\n            finalMat.cloneFromProps(mat);\r\n        }\r\n    }\r\n\r\n    if(parentTransform){\r\n        mat = parentTransform.mat.props;\r\n        finalMat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],mat[12],mat[13],mat[14],mat[15]);\r\n        this.finalTransform.opacity *= parentTransform.opacity;\r\n        this.finalTransform.opMdf = parentTransform.opMdf ? true : this.finalTransform.opMdf;\r\n        this.finalTransform.matMdf = parentTransform.matMdf ? true : this.finalTransform.matMdf\r\n    }\r\n\r\n    if(this.data.hasMask){\r\n        this.globalData.renderer.save(true);\r\n        this.maskManager.renderFrame(this.data.ty === 0?null:finalMat);\r\n    }\r\n    if(this.data.hd){\r\n        this.isVisible = false;\r\n    }\r\n    return this.isVisible;\r\n\r\n};\r\n\r\nCVBaseElement.prototype.addMasks = function(data){\r\n    this.maskManager = new CVMaskElement(data,this,this.globalData);\r\n};\r\n\r\n\r\nCVBaseElement.prototype.destroy = function(){\r\n    this.canvasContext = null;\r\n    this.data = null;\r\n    this.globalData = null;\r\n    if(this.maskManager) {\r\n        this.maskManager.destroy();\r\n    }\r\n};\r\n\r\nCVBaseElement.prototype.mHelper = new Matrix();\r\n\nfunction CVCompElement(data, comp,globalData){\r\n    this._parent.constructor.call(this,data, comp,globalData);\r\n    var compGlobalData = {};\r\n    for(var s in globalData){\r\n        if(globalData.hasOwnProperty(s)){\r\n            compGlobalData[s] = globalData[s];\r\n        }\r\n    }\r\n    compGlobalData.renderer = this;\r\n    compGlobalData.compHeight = this.data.h;\r\n    compGlobalData.compWidth = this.data.w;\r\n    this.renderConfig = {\r\n        clearCanvas: true\r\n    };\r\n    this.contextData = {\r\n        saved : Array.apply(null,{length:15}),\r\n        savedOp: Array.apply(null,{length:15}),\r\n        cArrPos : 0,\r\n        cTr : new Matrix(),\r\n        cO : 1\r\n    };\r\n    this.completeLayers = false;\r\n    var i, len = 15;\r\n    for(i=0;i<len;i+=1){\r\n        this.contextData.saved[i] = Array.apply(null,{length:16});\r\n    }\r\n    this.transformMat = new Matrix();\r\n    this.parentGlobalData = this.globalData;\r\n    var cv = document.createElement('canvas');\r\n    //document.body.appendChild(cv);\r\n    compGlobalData.canvasContext = cv.getContext('2d');\r\n    this.canvasContext = compGlobalData.canvasContext;\r\n    cv.width = this.data.w;\r\n    cv.height = this.data.h;\r\n    this.canvas = cv;\r\n    this.globalData = compGlobalData;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = Array.apply(null,{length:this.layers.length});\r\n    if(this.data.tm){\r\n        this.tm = PropertyFactory.getProp(this,this.data.tm,0,globalData.frameRate,this.dynamicProperties);\r\n    }\r\n    if(this.data.xt || !globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n}\r\ncreateElement(CVBaseElement, CVCompElement);\r\n\r\nCVCompElement.prototype.ctxTransform = CanvasRenderer.prototype.ctxTransform;\r\nCVCompElement.prototype.ctxOpacity = CanvasRenderer.prototype.ctxOpacity;\r\nCVCompElement.prototype.save = CanvasRenderer.prototype.save;\r\nCVCompElement.prototype.restore = CanvasRenderer.prototype.restore;\r\nCVCompElement.prototype.reset =  function(){\r\n    this.contextData.cArrPos = 0;\r\n    this.contextData.cTr.reset();\r\n    this.contextData.cO = 1;\r\n};\r\nCVCompElement.prototype.resize = function(transformCanvas){\r\n    var maxScale = Math.max(transformCanvas.sx,transformCanvas.sy);\r\n    this.canvas.width = this.data.w*maxScale;\r\n    this.canvas.height = this.data.h*maxScale;\r\n    this.transformCanvas = {\r\n        sc:maxScale,\r\n        w:this.data.w*maxScale,\r\n        h:this.data.h*maxScale,\r\n        props:[maxScale,0,0,0,0,maxScale,0,0,0,0,1,0,0,0,0,1]\r\n    }\r\n    var i,len = this.elements.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(transformCanvas);\r\n        }\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.prepareFrame = function(num){\r\n    this.globalData.frameId = this.parentGlobalData.frameId;\r\n    this.globalData.mdf = false;\r\n    this._parent.prepareFrame.call(this,num);\r\n    if(this.isVisible===false && !this.data.xt){\r\n        return;\r\n    }\r\n    var timeRemapped = num;\r\n    if(this.tm){\r\n        timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n    }\r\n    this.renderedFrame = timeRemapped/this.data.sr;\r\n    var i,len = this.elements.length;\r\n\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(timeRemapped/this.data.sr - this.layers[i].st);\r\n            if(this.elements[i].data.ty === 0 && this.elements[i].globalData.mdf){\r\n                this.globalData.mdf = true;\r\n            }\r\n        }\r\n    }\r\n    if(this.globalData.mdf && !this.data.xt){\r\n        this.canvasContext.clearRect(0, 0, this.data.w, this.data.h);\r\n        this.ctxTransform(this.transformCanvas.props);\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.renderFrame = function(parentMatrix){\r\n    if(this._parent.renderFrame.call(this,parentMatrix)===false){\r\n        return;\r\n    }\r\n    if(this.globalData.mdf){\r\n        var i,len = this.layers.length;\r\n        for( i = len - 1; i >= 0; i -= 1 ){\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n    }\r\n    if(this.data.hasMask){\r\n        this.globalData.renderer.restore(true);\r\n    }\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n    this.parentGlobalData.renderer.save();\r\n    this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n    this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity);\r\n    this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas,0,0,this.data.w,this.data.h);\r\n    this.parentGlobalData.renderer.restore();\r\n\r\n    if(this.globalData.mdf){\r\n        this.reset();\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nCVCompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nCVCompElement.prototype.destroy = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        this.elements[i].destroy();\r\n    }\r\n    this.layers = null;\r\n    this.elements = null;\r\n    this._parent.destroy.call(this._parent);\r\n};\r\nCVCompElement.prototype.checkLayers = CanvasRenderer.prototype.checkLayers;\r\nCVCompElement.prototype.buildItem = CanvasRenderer.prototype.buildItem;\r\nCVCompElement.prototype.checkPendingElements = CanvasRenderer.prototype.checkPendingElements;\r\nCVCompElement.prototype.addPendingElement = CanvasRenderer.prototype.addPendingElement;\r\nCVCompElement.prototype.buildAllItems = CanvasRenderer.prototype.buildAllItems;\r\nCVCompElement.prototype.createItem = CanvasRenderer.prototype.createItem;\r\nCVCompElement.prototype.createImage = CanvasRenderer.prototype.createImage;\r\nCVCompElement.prototype.createComp = CanvasRenderer.prototype.createComp;\r\nCVCompElement.prototype.createSolid = CanvasRenderer.prototype.createSolid;\r\nCVCompElement.prototype.createShape = CanvasRenderer.prototype.createShape;\r\nCVCompElement.prototype.createText = CanvasRenderer.prototype.createText;\r\nCVCompElement.prototype.createBase = CanvasRenderer.prototype.createBase;\r\nCVCompElement.prototype.buildElementParenting = CanvasRenderer.prototype.buildElementParenting;\nfunction CVImageElement(data, comp,globalData){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this._parent.constructor.call(this,data, comp,globalData);\r\n    this.globalData.addPendingElement();\r\n}\r\ncreateElement(CVBaseElement, CVImageElement);\r\n\r\nCVImageElement.prototype.createElements = function(){\r\n    var imageLoaded = function(){\r\n        this.globalData.elementLoaded();\r\n        if(this.assetData.w !== this.img.width || this.assetData.h !== this.img.height){\r\n            var canvas = document.createElement('canvas');\r\n            canvas.width = this.assetData.w;\r\n            canvas.height = this.assetData.h;\r\n            var ctx = canvas.getContext('2d');\r\n\r\n            var imgW = this.img.width;\r\n            var imgH = this.img.height;\r\n            var imgRel = imgW / imgH;\r\n            var canvasRel = this.assetData.w/this.assetData.h;\r\n            var widthCrop, heightCrop;\r\n            if(imgRel>canvasRel){\r\n                heightCrop = imgH;\r\n                widthCrop = heightCrop*canvasRel;\r\n            } else {\r\n                widthCrop = imgW;\r\n                heightCrop = widthCrop/canvasRel;\r\n            }\r\n            ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h);\r\n            this.img = canvas;\r\n        }\r\n    }.bind(this);\r\n    var imageFailed = function(){\r\n        this.failed = true;\r\n        this.globalData.elementLoaded();\r\n    }.bind(this);\r\n\r\n    this.img = new Image();\r\n    this.img.addEventListener('load', imageLoaded, false);\r\n    this.img.addEventListener('error', imageFailed, false);\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    this.img.src = assetPath;\r\n\r\n    this._parent.createElements.call(this);\r\n\r\n};\r\n\r\nCVImageElement.prototype.renderFrame = function(parentMatrix){\r\n    if(this.failed){\r\n        return;\r\n    }\r\n    if(this._parent.renderFrame.call(this,parentMatrix)===false){\r\n        return;\r\n    }\r\n    var ctx = this.canvasContext;\r\n    this.globalData.renderer.save();\r\n    var finalMat = this.finalTransform.mat.props;\r\n    this.globalData.renderer.ctxTransform(finalMat);\r\n    this.globalData.renderer.ctxOpacity(this.finalTransform.opacity);\r\n    ctx.drawImage(this.img,0,0);\r\n    this.globalData.renderer.restore(this.data.hasMask);\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\r\n\r\nCVImageElement.prototype.destroy = function(){\r\n    this.img = null;\r\n    this._parent.destroy.call(this._parent);\r\n};\n\r\nfunction CVMaskElement(data,element){\r\n    this.data = data;\r\n    this.element = element;\r\n    this.dynamicProperties = [];\r\n    this.masksProperties = this.data.masksProperties;\r\n    this.viewData = Array.apply(null,{length:this.masksProperties.length});\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3,this.dynamicProperties,null);\r\n    }\r\n}\r\n\r\nCVMaskElement.prototype.prepareFrame = function(num){\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue(num);\r\n        if(this.dynamicProperties[i].mdf){\r\n            this.element.globalData.mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nCVMaskElement.prototype.renderFrame = function (transform) {\r\n    var ctx = this.element.canvasContext;\r\n    var i, len = this.data.masksProperties.length;\r\n    var pt,pt2,pt3,data, hasMasks = false;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode === 'n'){\r\n            continue;\r\n        }\r\n        if(hasMasks === false){\r\n            ctx.beginPath();\r\n            hasMasks = true;\r\n        }\r\n        if (this.masksProperties[i].inv) {\r\n            ctx.moveTo(0, 0);\r\n            ctx.lineTo(this.element.globalData.compWidth, 0);\r\n            ctx.lineTo(this.element.globalData.compWidth, this.element.globalData.compHeight);\r\n            ctx.lineTo(0, this.element.globalData.compHeight);\r\n            ctx.lineTo(0, 0);\r\n        }\r\n        data = this.viewData[i].v;\r\n        pt = transform ? transform.applyToPointArray(data.v[0][0],data.v[0][1],0):data.v[0];\r\n        ctx.moveTo(pt[0], pt[1]);\r\n        var j, jLen = data._length;\r\n        for (j = 1; j < jLen; j++) {\r\n            pt = transform ? transform.applyToPointArray(data.o[j - 1][0],data.o[j - 1][1],0) : data.o[j - 1];\r\n            pt2 = transform ? transform.applyToPointArray(data.i[j][0],data.i[j][1],0) : data.i[j];\r\n            pt3 = transform ? transform.applyToPointArray(data.v[j][0],data.v[j][1],0) : data.v[j];\r\n            ctx.bezierCurveTo(pt[0], pt[1], pt2[0], pt2[1], pt3[0], pt3[1]);\r\n        }\r\n        pt = transform ? transform.applyToPointArray(data.o[j - 1][0],data.o[j - 1][1],0) : data.o[j - 1];\r\n        pt2 = transform ? transform.applyToPointArray(data.i[0][0],data.i[0][1],0) : data.i[0];\r\n        pt3 = transform ? transform.applyToPointArray(data.v[0][0],data.v[0][1],0) : data.v[0];\r\n        ctx.bezierCurveTo(pt[0], pt[1], pt2[0], pt2[1], pt3[0], pt3[1]);\r\n    }\r\n    if(hasMasks){\r\n        ctx.clip();\r\n    }\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n};\nfunction CVShapeElement(data, comp,globalData){\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this._parent.constructor.call(this,data, comp,globalData);\r\n}\r\ncreateElement(CVBaseElement, CVShapeElement);\r\n\r\nCVShapeElement.prototype.transformHelper = {opacity:1,mat:new Matrix(),matMdf:false,opMdf:false};\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createElements = function(){\r\n\r\n    this._parent.createElements.call(this);\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties, true);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function(data, dynamicProperties){\r\n    var styleElem = {\r\n        data: data,\r\n        type: data.ty,\r\n        elements: []\r\n    };\r\n    var elementData = {};\r\n    if(data.ty == 'fl' || data.ty == 'st'){\r\n        elementData.c = PropertyFactory.getProp(this,data.c,1,255,dynamicProperties);\r\n        if(!elementData.c.k){\r\n            styleElem.co = 'rgb('+bm_floor(elementData.c.v[0])+','+bm_floor(elementData.c.v[1])+','+bm_floor(elementData.c.v[2])+')';\r\n        }\r\n    }\r\n    elementData.o = PropertyFactory.getProp(this,data.o,0,0.01,dynamicProperties);\r\n    if(data.ty == 'st') {\r\n        styleElem.lc = this.lcEnum[data.lc] || 'round';\r\n        styleElem.lj = this.ljEnum[data.lj] || 'round';\r\n        if(data.lj == 1) {\r\n            styleElem.ml = data.ml;\r\n        }\r\n        elementData.w = PropertyFactory.getProp(this,data.w,0,null,dynamicProperties);\r\n        if(!elementData.w.k){\r\n            styleElem.wi = elementData.w.v;\r\n        }\r\n        if(data.d){\r\n            var d = PropertyFactory.getDashProp(this,data.d,'canvas',dynamicProperties);\r\n            elementData.d = d;\r\n            if(!elementData.d.k){\r\n                styleElem.da = elementData.d.dasharray;\r\n                styleElem.do = elementData.d.dashoffset;\r\n            }\r\n        }\r\n\r\n    } else {\r\n\r\n        styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n}\r\n\r\nCVShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = {\r\n        it: [],\r\n        prevViewData: []\r\n    };\r\n    return elementData;\r\n}\r\n\r\nCVShapeElement.prototype.createTransformElement = function(data, dynamicProperties) {\r\n    var elementData = {\r\n        transform : {\r\n            mat: new Matrix(),\r\n            opacity: 1,\r\n            matMdf:false,\r\n            opMdf:false,\r\n            op: PropertyFactory.getProp(this,data.o,0,0.01,dynamicProperties),\r\n            mProps: PropertyFactory.getProp(this,data,2,null,dynamicProperties)\r\n        },\r\n        elements: []\r\n    };\r\n    return elementData;\r\n}\r\n\r\nCVShapeElement.prototype.createShapeElement = function(data, dynamicProperties) {\r\n    var elementData = {\r\n        nodes:[],\r\n        trNodes:[],\r\n        tr:[0,0,0,0,0,0]\r\n    };\r\n    var ty = 4;\r\n    if(data.ty == 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty == 'el'){\r\n        ty = 6;\r\n    }else if(data.ty == 'sr'){\r\n        ty = 7;\r\n    }\r\n    elementData.sh = ShapePropertyFactory.getShapeProp(this,data,ty,dynamicProperties);\r\n    this.shapes.push(elementData.sh);\r\n    this.addShapeToModifiers(elementData);\r\n    jLen = this.stylesList.length;\r\n    var hasStrokes = false, hasFills = false;\r\n    for(j=0;j<jLen;j+=1){\r\n        if(!this.stylesList[j].closed){\r\n            this.stylesList[j].elements.push(elementData);\r\n            if(this.stylesList[j].type === 'st'){\r\n                hasStrokes = true;\r\n            }else{\r\n                hasFills = true;\r\n            }\r\n        }\r\n    }\r\n    elementData.st = hasStrokes;\r\n    elementData.fl = hasFills;\r\n    return elementData;\r\n}\r\n\r\nCVShapeElement.prototype.reloadShapes = function(){\r\n    this.firstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties, true);\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n}\r\n\r\nCVShapeElement.prototype.searchShapes = function(arr,itemsData, prevViewData,dynamicProperties, render){\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownArrays = [], ownModifiers = [], processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], dynamicProperties);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            \r\n            ownArrays.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,dynamicProperties, render);\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i], dynamicProperties);\r\n            }\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], dynamicProperties);\r\n            }\r\n            \r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd'){\r\n            if(!processedPos){\r\n                var modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i],dynamicProperties);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        } else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData,dynamicProperties);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownArrays.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownArrays[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.addShapeToModifiers = IShapeElement.prototype.addShapeToModifiers;\r\nCVShapeElement.prototype.renderModifiers = IShapeElement.prototype.renderModifiers;\r\nCVShapeElement.prototype.lcEnum = IShapeElement.prototype.lcEnum;\r\nCVShapeElement.prototype.ljEnum = IShapeElement.prototype.ljEnum;\r\nCVShapeElement.prototype.searchProcessedElement = IShapeElement.prototype.searchProcessedElement;\r\nCVShapeElement.prototype.addProcessedElement = IShapeElement.prototype.addProcessedElement;\r\n\r\nCVShapeElement.prototype.renderFrame = function(parentMatrix){\r\n    if(this._parent.renderFrame.call(this, parentMatrix)===false){\r\n        return;\r\n    }\r\n    this.transformHelper.mat.reset();\r\n    this.transformHelper.opacity = this.finalTransform.opacity;\r\n    this.transformHelper.matMdf = false;\r\n    this.transformHelper.opMdf = this.finalTransform.opMdf;\r\n    this.renderModifiers();\r\n    this.renderShape(this.transformHelper,null,null,true);\r\n    if(this.data.hasMask){\r\n        this.globalData.renderer.restore(true);\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function(parentTransform,items,data,isMain){\r\n    var i, len;\r\n    if(!items){\r\n        items = this.shapesData;\r\n        len = this.stylesList.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.stylesList[i].d = '';\r\n            this.stylesList[i].mdf = false;\r\n        }\r\n    }\r\n    if(!data){\r\n        data = this.itemsData;\r\n    }\r\n    ///\r\n    ///\r\n    len = items.length - 1;\r\n    var groupTransform,groupMatrix;\r\n    groupTransform = parentTransform;\r\n    for(i=len;i>=0;i-=1){\r\n        if(items[i].ty == 'tr'){\r\n            groupTransform = data[i].transform;\r\n            var mtArr = data[i].transform.mProps.v.props;\r\n            groupTransform.matMdf = groupTransform.mProps.mdf;\r\n            groupTransform.opMdf = groupTransform.op.mdf;\r\n            groupMatrix = groupTransform.mat;\r\n            groupMatrix.cloneFromProps(mtArr);\r\n            if(parentTransform){\r\n                var props = parentTransform.mat.props;\r\n                groupTransform.opacity = parentTransform.opacity;\r\n                groupTransform.opacity *= data[i].transform.op.v;\r\n                groupTransform.matMdf = parentTransform.matMdf ? true : groupTransform.matMdf;\r\n                groupTransform.opMdf = parentTransform.opMdf ? true : groupTransform.opMdf;\r\n                groupMatrix.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n            }else{\r\n                groupTransform.opacity = groupTransform.op.o;\r\n            }\r\n        }else if(items[i].ty == 'sh' || items[i].ty == 'el' || items[i].ty == 'rc' || items[i].ty == 'sr'){\r\n            this.renderPath(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'fl'){\r\n            this.renderFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'st'){\r\n            this.renderStroke(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gr'){\r\n            this.renderShape(groupTransform,items[i].it,data[i].it);\r\n        }else if(items[i].ty == 'tm'){\r\n            //\r\n        }\r\n    }\r\n    if(!isMain){\r\n        return;\r\n    }\r\n    len = this.stylesList.length;\r\n    var j, jLen, k, kLen,elems,nodes, renderer = this.globalData.renderer, ctx = this.globalData.canvasContext, type;\r\n    renderer.save();\r\n    renderer.ctxTransform(this.finalTransform.mat.props);\r\n    for(i=0;i<len;i+=1){\r\n        type = this.stylesList[i].type;\r\n        if((type === 'st' && this.stylesList[i].wi === 0) || !this.stylesList[i].data._render){\r\n            continue;\r\n        }\r\n        renderer.save();\r\n        elems = this.stylesList[i].elements;\r\n        if(type === 'st'){\r\n            ctx.strokeStyle = this.stylesList[i].co;\r\n            ctx.lineWidth = this.stylesList[i].wi;\r\n            ctx.lineCap = this.stylesList[i].lc;\r\n            ctx.lineJoin = this.stylesList[i].lj;\r\n            ctx.miterLimit = this.stylesList[i].ml || 0;\r\n        }else{\r\n            ctx.fillStyle = this.stylesList[i].co;\r\n        }\r\n        renderer.ctxOpacity(this.stylesList[i].coOp);\r\n        if(type !== 'st'){\r\n            ctx.beginPath();\r\n        }\r\n        jLen = elems.length;\r\n        for(j=0;j<jLen;j+=1){\r\n            if(type === 'st'){\r\n                ctx.beginPath();\r\n                if(this.stylesList[i].da){\r\n                    ctx.setLineDash(this.stylesList[i].da);\r\n                    ctx.lineDashOffset = this.stylesList[i].do;\r\n                    this.globalData.isDashed = true;\r\n                }else if(this.globalData.isDashed){\r\n                    ctx.setLineDash(this.dashResetter);\r\n                    this.globalData.isDashed = false;\r\n                }\r\n            }\r\n            nodes = elems[j].trNodes;\r\n            kLen = nodes.length;\r\n\r\n            for(k=0;k<kLen;k+=1){\r\n                if(nodes[k].t == 'm'){\r\n                    ctx.moveTo(nodes[k].p[0],nodes[k].p[1]);\r\n                }else if(nodes[k].t == 'c'){\r\n                    ctx.bezierCurveTo(nodes[k].p1[0],nodes[k].p1[1],nodes[k].p2[0],nodes[k].p2[1],nodes[k].p3[0],nodes[k].p3[1]);\r\n                }else{\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n            if(type === 'st'){\r\n                ctx.stroke();\r\n            }\r\n        }\r\n        if(type !== 'st'){\r\n            ctx.fill(this.stylesList[i].r);\r\n        }\r\n        renderer.restore();\r\n    }\r\n    renderer.restore();\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\r\nCVShapeElement.prototype.renderPath = function(pathData,itemData,groupTransform){\r\n    var len, i, j,jLen;\r\n    var redraw = groupTransform.matMdf || itemData.sh.mdf || this.firstFrame;\r\n    if(redraw) {\r\n        var paths = itemData.sh.paths, groupTransformMat = groupTransform.mat;\r\n        jLen = paths._length;\r\n        var pathStringTransformed = itemData.trNodes;\r\n        pathStringTransformed.length = 0;\r\n        for(j=0;j<jLen;j+=1){\r\n            var pathNodes = paths.shapes[j];\r\n            if(pathNodes && pathNodes.v){\r\n                len = pathNodes._length;\r\n                for (i = 1; i < len; i += 1) {\r\n                    if (i == 1) {\r\n                        pathStringTransformed.push({\r\n                            t: 'm',\r\n                            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                        });\r\n                    }\r\n                    pathStringTransformed.push({\r\n                        t: 'c',\r\n                        p1: groupTransformMat.applyToPointArray(pathNodes.o[i - 1][0], pathNodes.o[i - 1][1], 0),\r\n                        p2: groupTransformMat.applyToPointArray(pathNodes.i[i][0], pathNodes.i[i][1], 0),\r\n                        p3: groupTransformMat.applyToPointArray(pathNodes.v[i][0], pathNodes.v[i][1], 0)\r\n                    });\r\n                }\r\n                if (len == 1) {\r\n                    pathStringTransformed.push({\r\n                        t: 'm',\r\n                        p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                    });\r\n                }\r\n                if (pathNodes.c && len) {\r\n                    pathStringTransformed.push({\r\n                        t: 'c',\r\n                        p1: groupTransformMat.applyToPointArray(pathNodes.o[i - 1][0], pathNodes.o[i - 1][1], 0),\r\n                        p2: groupTransformMat.applyToPointArray(pathNodes.i[0][0], pathNodes.i[0][1], 0),\r\n                        p3: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                    });\r\n                    pathStringTransformed.push({\r\n                        t: 'z'\r\n                    });\r\n                }\r\n                itemData.lStr = pathStringTransformed;\r\n            }\r\n\r\n        }\r\n\r\n        if (itemData.st) {\r\n            for (i = 0; i < 16; i += 1) {\r\n                itemData.tr[i] = groupTransform.mat.props[i];\r\n            }\r\n        }\r\n        itemData.trNodes = pathStringTransformed;\r\n\r\n    }\r\n};\r\n\r\n\r\n\r\nCVShapeElement.prototype.renderFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n\r\n    if(itemData.c.mdf || this.firstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o.mdf || groupTransform.opMdf || this.firstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    //TODO fix dashes\r\n    var d = itemData.d;\r\n    var dasharray,dashoffset;\r\n    if(d && (d.mdf  || this.firstFrame)){\r\n        styleElem.da = d.dasharray;\r\n        styleElem.do = d.dashoffset;\r\n    }\r\n    if(itemData.c.mdf || this.firstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o.mdf || groupTransform.opMdf || this.firstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n    if(itemData.w.mdf || this.firstFrame){\r\n        styleElem.wi = itemData.w.v;\r\n    }\r\n};\r\n\r\n\r\nCVShapeElement.prototype.destroy = function(){\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemData.length = 0;\r\n    this._parent.destroy.call(this._parent);\r\n};\r\n\r\n\nfunction CVSolidElement(data, comp,globalData){\r\n    this._parent.constructor.call(this,data, comp,globalData);\r\n}\r\ncreateElement(CVBaseElement, CVSolidElement);\r\n\r\nCVSolidElement.prototype.renderFrame = function(parentMatrix){\r\n    if(this._parent.renderFrame.call(this, parentMatrix)===false){\r\n        return;\r\n    }\r\n    var ctx = this.canvasContext;\r\n    this.globalData.renderer.save();\r\n    this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n    this.globalData.renderer.ctxOpacity(this.finalTransform.opacity);\r\n    ctx.fillStyle=this.data.sc;\r\n    ctx.fillRect(0,0,this.data.sw,this.data.sh);\r\n    this.globalData.renderer.restore(this.data.hasMask);\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\nfunction CVTextElement(data, comp, globalData){\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n        fill: 'rgba(0,0,0,0)',\r\n        stroke: 'rgba(0,0,0,0)',\r\n        sWidth: 0,\r\n        fValue: ''\r\n    }\r\n    this._parent.constructor.call(this,data,comp, globalData);\r\n}\r\ncreateElement(CVBaseElement, CVTextElement);\r\n\r\nextendPrototype(ITextElement, CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = document.createElement('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.createElements = function(){\r\n\r\n    this._parent.createElements.call(this);\r\n    //console.log('this.data: ',this.data);\r\n\r\n};\r\n\r\nCVTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = Array.apply(null,{length:documentData.l ? documentData.l.length : 0});\r\n\r\n    var hasFill = false;\r\n    if(documentData.fc) {\r\n        hasFill = true;\r\n        this.values.fill = this.buildColor(documentData.fc);\r\n    }else{\r\n        this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n    if(documentData.sc){\r\n        hasStroke = true;\r\n        this.values.stroke = this.buildColor(documentData.sc);\r\n        this.values.sWidth = documentData.sw;\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i, len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.s + 'px '+ this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.t.length;\r\n    //this.tHelper.font = this.values.fValue;\r\n    var charData, shapeData, k, kLen, shapes, j, jLen, pathNodes, commands, pathArr, singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr/1000*documentData.s;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var cnt = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.t.charAt(i), fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = charData && charData.data || {};\r\n        matrixHelper.reset();\r\n        if(singleShape && letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n        }\r\n\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        jLen = shapes.length;\r\n        matrixHelper.scale(documentData.s/100,documentData.s/100);\r\n        if(singleShape){\r\n            this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        }\r\n        commands = Array.apply(null,{length:jLen})\r\n        for(j=0;j<jLen;j+=1){\r\n            kLen = shapes[j].ks.k.i.length;\r\n            pathNodes = shapes[j].ks.k;\r\n            pathArr = [];\r\n            for(k=1;k<kLen;k+=1){\r\n                if(k==1){\r\n                    pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n                }\r\n                pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0));\r\n            }\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n            commands[j] = pathArr;\r\n        }\r\n        if(singleShape){\r\n            xPos += letters[i].l;\r\n            xPos += trackingOffset;\r\n        }\r\n        if(this.textSpans[cnt]){\r\n            this.textSpans[cnt].elem = commands;\r\n        } else {\r\n            this.textSpans[cnt] = {elem: commands};\r\n        }\r\n        cnt +=1;\r\n    }\r\n}\r\n\r\nCVTextElement.prototype.renderFrame = function(parentMatrix){\r\n    if(this._parent.renderFrame.call(this, parentMatrix)===false){\r\n        return;\r\n    }\r\n    var ctx = this.canvasContext;\r\n    var finalMat = this.finalTransform.mat.props;\r\n    this.globalData.renderer.save();\r\n    this.globalData.renderer.ctxTransform(finalMat);\r\n    this.globalData.renderer.ctxOpacity(this.finalTransform.opacity);\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var  i,len, j, jLen, k, kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null, lastStroke = null, lastStrokeW = null, commands, pathArr;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            continue;\r\n        }\r\n        renderedLetter = renderedLetters[i];\r\n        if(renderedLetter){\r\n            this.globalData.renderer.save();\r\n            this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n            this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n        if(this.fill){\r\n            if(renderedLetter && renderedLetter.fc){\r\n                if(lastFill !== renderedLetter.fc){\r\n                    lastFill = renderedLetter.fc;\r\n                    ctx.fillStyle = renderedLetter.fc;\r\n                }\r\n            }else if(lastFill !== this.values.fill){\r\n                lastFill = this.values.fill;\r\n                ctx.fillStyle = this.values.fill;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.fill();\r\n            ///ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n        if(this.stroke){\r\n            if(renderedLetter && renderedLetter.sw){\r\n                if(lastStrokeW !== renderedLetter.sw){\r\n                    lastStrokeW = renderedLetter.sw;\r\n                    ctx.lineWidth = renderedLetter.sw;\r\n                }\r\n            }else if(lastStrokeW !== this.values.sWidth){\r\n                lastStrokeW = this.values.sWidth;\r\n                ctx.lineWidth = this.values.sWidth;\r\n            }\r\n            if(renderedLetter && renderedLetter.sc){\r\n                if(lastStroke !== renderedLetter.sc){\r\n                    lastStroke = renderedLetter.sc;\r\n                    ctx.strokeStyle = renderedLetter.sc;\r\n                }\r\n            }else if(lastStroke !== this.values.stroke){\r\n                lastStroke = this.values.stroke;\r\n                ctx.strokeStyle = this.values.stroke;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.stroke();\r\n            ///ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n        if(renderedLetter) {\r\n            this.globalData.renderer.restore();\r\n        }\r\n    }\r\n    /*if(this.data.hasMask){\r\n     this.globalData.renderer.restore(true);\r\n     }*/\r\n    this.globalData.renderer.restore(this.data.hasMask);\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\nfunction HBaseElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.globalData = globalData;\r\n    this.comp = comp;\r\n    this.data = data;\r\n    this.matteElement = null;\r\n    this.parentContainer = parentContainer;\r\n    this.layerId = placeholder ? placeholder.layerId : 'ly_'+randomString(10);\r\n    this.placeholder = placeholder;\r\n    this.init();\r\n};\r\n\r\ncreateElement(BaseElement, HBaseElement);\r\nHBaseElement.prototype.checkBlendMode = function(){\r\n\r\n};\r\nHBaseElement.prototype.setBlendMode = BaseElement.prototype.setBlendMode;\r\n\r\n/*HBaseElement.prototype.appendNodeToParent = function(node) {\r\n    if(this.data.hd){\r\n        return;\r\n    }\r\n    if(this.placeholder){\r\n        var g = this.placeholder.phElement;\r\n        g.parentNode.insertBefore(node, g);\r\n        //g.parentNode.removeChild(g);\r\n    }else{\r\n        this.parentContainer.appendChild(node);\r\n    }\r\n};*/\r\n\r\n\r\nHBaseElement.prototype.getBaseElement = function(){\r\n    return this.baseElement;\r\n};\r\n\r\nHBaseElement.prototype.createElements = function(){\r\n    if(this.data.hasMask){\r\n        this.layerElement = document.createElementNS(svgNS,'svg');\r\n        styleDiv(this.layerElement);\r\n        //this.appendNodeToParent(this.layerElement);\r\n        this.baseElement = this.layerElement;\r\n        this.maskedElement = this.layerElement;\r\n    }else{\r\n        this.layerElement = this.parentContainer;\r\n    }\r\n    this.transformedElement = this.layerElement;\r\n    if(this.data.ln && (this.data.ty === 4 || this.data.ty === 0)){\r\n        if(this.layerElement === this.parentContainer){\r\n            this.layerElement = document.createElementNS(svgNS,'g');\r\n            //this.appendNodeToParent(this.layerElement);\r\n            this.baseElement = this.layerElement;\r\n        }\r\n        this.layerElement.setAttribute('id',this.data.ln);\r\n    }\r\n    this.setBlendMode();\r\n    if(this.layerElement !== this.parentContainer){\r\n        this.placeholder = null;\r\n    }\r\n    this.checkParenting();\r\n};\r\n\r\nHBaseElement.prototype.renderFrame = function(parentTransform){\r\n    if(this.data.ty === 3){\r\n        return false;\r\n    }\r\n\r\n    if(this.currentFrameNum === this.lastNum || !this.isVisible){\r\n        return this.isVisible;\r\n    }\r\n    this.lastNum = this.currentFrameNum;\r\n\r\n    this.finalTransform.opMdf = this.finalTransform.op.mdf;\r\n    this.finalTransform.matMdf = this.finalTransform.mProp.mdf;\r\n    this.finalTransform.opacity = this.finalTransform.op.v;\r\n    if(this.firstFrame){\r\n        this.finalTransform.opMdf = true;\r\n        this.finalTransform.matMdf = true;\r\n    }\r\n\r\n    var mat;\r\n    var finalMat = this.finalTransform.mat;\r\n\r\n    if(this.hierarchy){\r\n        var i, len = this.hierarchy.length;\r\n\r\n        mat = this.finalTransform.mProp.v.props;\r\n        finalMat.cloneFromProps(mat);\r\n        for(i=0;i<len;i+=1){\r\n            this.finalTransform.matMdf = this.hierarchy[i].finalTransform.mProp.mdf ? true : this.finalTransform.matMdf;\r\n            mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n            finalMat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],mat[12],mat[13],mat[14],mat[15]);\r\n        }\r\n    }else{\r\n        if(this.isVisible && this.finalTransform.matMdf){\r\n            if(!parentTransform){\r\n                finalMat.cloneFromProps(this.finalTransform.mProp.v.props);\r\n            }else{\r\n                mat = this.finalTransform.mProp.v.props;\r\n                finalMat.cloneFromProps(mat);\r\n            }\r\n        }\r\n    }\r\n    if(this.data.hasMask){\r\n        this.maskManager.renderFrame(finalMat);\r\n    }\r\n\r\n    if(parentTransform){\r\n        mat = parentTransform.mat.props;\r\n        finalMat.cloneFromProps(mat);\r\n        this.finalTransform.opacity *= parentTransform.opacity;\r\n        this.finalTransform.opMdf = parentTransform.opMdf ? true : this.finalTransform.opMdf;\r\n        this.finalTransform.matMdf = parentTransform.matMdf ? true : this.finalTransform.matMdf\r\n    }\r\n\r\n    if(this.finalTransform.matMdf){\r\n        this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = finalMat.toCSS();\r\n        this.finalMat = finalMat;\r\n    }\r\n    if(this.finalTransform.opMdf){\r\n        this.transformedElement.style.opacity = this.finalTransform.opacity;\r\n    }\r\n    return this.isVisible;\r\n};\r\n\r\nHBaseElement.prototype.destroy = function(){\r\n    this.layerElement = null;\r\n    this.transformedElement = null;\r\n    this.parentContainer = null;\r\n    if(this.matteElement) {\r\n        this.matteElement = null;\r\n    }\r\n    if(this.maskManager) {\r\n        this.maskManager.destroy();\r\n        this.maskManager = null;\r\n    }\r\n};\r\n\r\nHBaseElement.prototype.getDomElement = function(){\r\n    return this.layerElement;\r\n};\r\nHBaseElement.prototype.addMasks = function(data){\r\n    this.maskManager = new MaskElement(data,this,this.globalData);\r\n};\r\n\r\nHBaseElement.prototype.hide = function(){\r\n};\r\n\r\nHBaseElement.prototype.setMatte = function(){\r\n\r\n}\r\n\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\nfunction HSolidElement(data,parentContainer,globalData,comp, placeholder){\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n}\r\ncreateElement(HBaseElement, HSolidElement);\r\n\r\nHSolidElement.prototype.createElements = function(){\r\n    var parent = document.createElement('div');\r\n    styleDiv(parent);\r\n    var cont = document.createElementNS(svgNS,'svg');\r\n    styleDiv(cont);\r\n    cont.setAttribute('width',this.data.sw);\r\n    cont.setAttribute('height',this.data.sh);\r\n    parent.appendChild(cont);\r\n    this.layerElement = parent;\r\n    this.transformedElement = parent;\r\n    //this.appendNodeToParent(parent);\r\n    this.baseElement = parent;\r\n    this.innerElem = parent;\r\n    if(this.data.ln){\r\n        this.innerElem.setAttribute('id',this.data.ln);\r\n    }\r\n    if(this.data.bm !== 0){\r\n        this.setBlendMode();\r\n    }\r\n    var rect = document.createElementNS(svgNS,'rect');\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    cont.appendChild(rect);\r\n    if(this.data.hasMask){\r\n        this.maskedElement = rect;\r\n    }\r\n    this.checkParenting();\r\n};\r\n\r\n\r\n\r\nHSolidElement.prototype.hide = SVGBaseElement.prototype.hide;\r\nHSolidElement.prototype.show = SVGBaseElement.prototype.show;\r\nHSolidElement.prototype.renderFrame = IImageElement.prototype.renderFrame;\r\nHSolidElement.prototype.destroy = IImageElement.prototype.destroy;\nfunction HCompElement(data,parentContainer,globalData,comp, placeholder){\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = Array.apply(null,{length:this.layers.length});\r\n    if(this.data.tm){\r\n        this.tm = PropertyFactory.getProp(this,this.data.tm,0,globalData.frameRate,this.dynamicProperties);\r\n    }\r\n    if(this.data.hasMask) {\r\n        this.supports3d = false;\r\n    }\r\n    if(this.data.xt){\r\n        this.layerElement = document.createElement('div');\r\n    }\r\n    this.buildAllItems();\r\n\r\n}\r\ncreateElement(HBaseElement, HCompElement);\r\n\r\nHCompElement.prototype.createElements = function(){\r\n    var divElement = document.createElement('div');\r\n    styleDiv(divElement);\r\n    if(this.data.ln){\r\n        divElement.setAttribute('id',this.data.ln);\r\n    }\r\n    divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n    if(this.data.hasMask){\r\n        var compSvg = document.createElementNS(svgNS,'svg');\r\n        styleDiv(compSvg);\r\n        compSvg.setAttribute('width',this.data.w);\r\n        compSvg.setAttribute('height',this.data.h);\r\n        var g = document.createElementNS(svgNS,'g');\r\n        compSvg.appendChild(g);\r\n        divElement.appendChild(compSvg);\r\n        this.maskedElement = g;\r\n        this.baseElement = divElement;\r\n        this.layerElement = g;\r\n        this.transformedElement = divElement;\r\n    }else{\r\n        this.layerElement = divElement;\r\n        this.baseElement = this.layerElement;\r\n        this.transformedElement = divElement;\r\n    }\r\n    //this.appendNodeToParent(this.layerElement);\r\n    this.checkParenting();\r\n};\r\n\r\nHCompElement.prototype.hide = ICompElement.prototype.hide;\r\nHCompElement.prototype.prepareFrame = ICompElement.prototype.prepareFrame;\r\nHCompElement.prototype.setElements = ICompElement.prototype.setElements;\r\nHCompElement.prototype.getElements = ICompElement.prototype.getElements;\r\nHCompElement.prototype.destroy = ICompElement.prototype.destroy;\r\n\r\nHCompElement.prototype.renderFrame = function(parentMatrix){\r\n    var renderParent = this._parent.renderFrame.call(this,parentMatrix);\r\n    var i,len = this.layers.length;\r\n    if(renderParent===false){\r\n        this.hide();\r\n        return;\r\n    }\r\n\r\n    this.hidden = false;\r\n\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n};\r\n\r\nHCompElement.prototype.checkLayers = BaseRenderer.prototype.checkLayers;\r\nHCompElement.prototype.buildItem = HybridRenderer.prototype.buildItem;\r\nHCompElement.prototype.checkPendingElements = HybridRenderer.prototype.checkPendingElements;\r\nHCompElement.prototype.addPendingElement = HybridRenderer.prototype.addPendingElement;\r\nHCompElement.prototype.buildAllItems = BaseRenderer.prototype.buildAllItems;\r\nHCompElement.prototype.createItem = HybridRenderer.prototype.createItem;\r\nHCompElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\r\nHCompElement.prototype.createImage = HybridRenderer.prototype.createImage;\r\nHCompElement.prototype.createComp = HybridRenderer.prototype.createComp;\r\nHCompElement.prototype.createSolid = HybridRenderer.prototype.createSolid;\r\nHCompElement.prototype.createShape = HybridRenderer.prototype.createShape;\r\nHCompElement.prototype.createText = HybridRenderer.prototype.createText;\r\nHCompElement.prototype.createBase = HybridRenderer.prototype.createBase;\r\nHCompElement.prototype.appendElementInPos = HybridRenderer.prototype.appendElementInPos;\nfunction HShapeElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n}\r\ncreateElement(HBaseElement, HShapeElement);\r\nvar parent = HShapeElement.prototype._parent;\r\nextendPrototype(IShapeElement, HShapeElement);\r\nHShapeElement.prototype._parent = parent;\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderFrame;\r\n\r\nHShapeElement.prototype.createElements = function(){\r\n    var parent = document.createElement('div');\r\n    styleDiv(parent);\r\n    var cont = document.createElementNS(svgNS,'svg');\r\n    styleDiv(cont);\r\n    var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n    cont.setAttribute('width',size.w);\r\n    cont.setAttribute('height',size.h);\r\n    if(this.data.hasMask){\r\n        var g = document.createElementNS(svgNS,'g');\r\n        parent.appendChild(cont);\r\n        cont.appendChild(g);\r\n        this.maskedElement = g;\r\n        this.layerElement = g;\r\n        this.shapesContainer = g;\r\n    }else{\r\n        parent.appendChild(cont);\r\n        this.layerElement = cont;\r\n        this.shapesContainer = document.createElementNS(svgNS,'g');\r\n        this.layerElement.appendChild(this.shapesContainer);\r\n    }\r\n    if(!this.data.hd){\r\n        //this.parentContainer.appendChild(parent);\r\n        this.baseElement = parent;\r\n    }\r\n    this.innerElem = parent;\r\n    if(this.data.ln){\r\n        this.innerElem.setAttribute('id',this.data.ln);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0, [], true);\r\n    this.buildExpressionInterface();\r\n    this.layerElement = parent;\r\n    this.transformedElement = parent;\r\n    this.shapeCont = cont;\r\n    if(this.data.bm !== 0){\r\n        this.setBlendMode();\r\n    }\r\n    this.checkParenting();\r\n};\r\n\r\nHShapeElement.prototype.renderFrame = function(parentMatrix){\r\n    var firstFrame = this.firstFrame;\r\n    this._renderShapeFrame();\r\n\r\n    if(this.isVisible && (this.elemMdf || firstFrame)){\r\n        var boundingBox = this.shapeCont.getBBox();\r\n        var changed = false;\r\n        if(this.currentBBox.w !== boundingBox.width){\r\n            this.currentBBox.w = boundingBox.width;\r\n            this.shapeCont.setAttribute('width',boundingBox.width);\r\n            changed = true;\r\n        }\r\n        if(this.currentBBox.h !== boundingBox.height){\r\n            this.currentBBox.h = boundingBox.height;\r\n            this.shapeCont.setAttribute('height',boundingBox.height);\r\n            changed = true;\r\n        }\r\n        if(changed  || this.currentBBox.x !== boundingBox.x  || this.currentBBox.y !== boundingBox.y){\r\n            this.currentBBox.w = boundingBox.width;\r\n            this.currentBBox.h = boundingBox.height;\r\n            this.currentBBox.x = boundingBox.x;\r\n            this.currentBBox.y = boundingBox.y;\r\n\r\n            this.shapeCont.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n\r\n};\nfunction HTextElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    }\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n\r\n}\r\ncreateElement(HBaseElement, HTextElement);\r\n\r\nextendPrototype(ITextElement, HTextElement);\r\n\r\nHTextElement.prototype.createElements = function(){\r\n    this.isMasked = this.checkMasks();\r\n    var parent = document.createElement('div');\r\n    styleDiv(parent);\r\n    this.layerElement = parent;\r\n    this.transformedElement = parent;\r\n    if(this.isMasked){\r\n        this.renderType = 'svg';\r\n        var cont = document.createElementNS(svgNS,'svg');\r\n        styleDiv(cont);\r\n        this.cont = cont;\r\n        this.compW = this.comp.data.w;\r\n        this.compH = this.comp.data.h;\r\n        cont.setAttribute('width',this.compW);\r\n        cont.setAttribute('height',this.compH);\r\n        var g = document.createElementNS(svgNS,'g');\r\n        cont.appendChild(g);\r\n        parent.appendChild(cont);\r\n        this.maskedElement = g;\r\n        this.innerElem = g;\r\n    } else {\r\n        this.renderType = 'html';\r\n        this.innerElem = parent;\r\n    }\r\n    this.baseElement = parent;\r\n\r\n    this.checkParenting();\r\n\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = Array.apply(null,{length:this.textProperty.currentData.l ? this.textProperty.currentData.l.length : 0});\r\n    var innerElemStyle = this.innerElem.style;\r\n    innerElemStyle.color = innerElemStyle.fill = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    if(documentData.sc){\r\n        innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n        innerElemStyle.strokeWidth = documentData.sw+'px';\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(!this.globalData.fontManager.chars){\r\n        innerElemStyle.fontSize = documentData.s+'px';\r\n        innerElemStyle.lineHeight = documentData.s+'px';\r\n        if(fontData.fClass){\r\n            this.innerElem.className = fontData.fClass;\r\n        } else {\r\n            innerElemStyle.fontFamily = fontData.fFamily;\r\n            var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n            innerElemStyle.fontStyle = fStyle;\r\n            innerElemStyle.fontWeight = fWeight;\r\n        }\r\n    }\r\n    var i, len;\r\n\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan,tParent,tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '';\r\n    var cnt = 0;\r\n    for (i = 0;i < len ;i += 1) {\r\n        if(this.globalData.fontManager.chars){\r\n            if(!this.textPaths[cnt]){\r\n                tSpan = document.createElementNS(svgNS,'path');\r\n                tSpan.setAttribute('stroke-linecap', 'butt');\r\n                tSpan.setAttribute('stroke-linejoin','round');\r\n                tSpan.setAttribute('stroke-miterlimit','4');\r\n            } else {\r\n                tSpan = this.textPaths[cnt];\r\n            }\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tCont = tParent.children[0];\r\n                } else {\r\n\r\n                    tParent = document.createElement('div');\r\n                    tCont = document.createElementNS(svgNS,'svg');\r\n                    tCont.appendChild(tSpan);\r\n                    styleDiv(tParent);\r\n                }\r\n            }\r\n        }else{\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tSpan = this.textPaths[cnt];\r\n                } else {\r\n                    tParent = document.createElement('span');\r\n                    styleDiv(tParent);\r\n                    tSpan = document.createElement('span');\r\n                    styleDiv(tSpan);\r\n                    tParent.appendChild(tSpan);\r\n                }\r\n            } else {\r\n                tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : document.createElementNS(svgNS,'text');\r\n            }\r\n        }\r\n        //tSpan.setAttribute('visibility', 'hidden');\r\n        if(this.globalData.fontManager.chars){\r\n            var charData = this.globalData.fontManager.getCharData(documentData.t.charAt(i), fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n            var shapeData;\r\n            if(charData){\r\n                shapeData = charData.data;\r\n            } else {\r\n                shapeData = null;\r\n            }\r\n            matrixHelper.reset();\r\n            if(shapeData && shapeData.shapes){\r\n                shapes = shapeData.shapes[0].it;\r\n                matrixHelper.scale(documentData.s/100,documentData.s/100);\r\n                shapeStr = this.createPathShape(matrixHelper,shapes);\r\n                tSpan.setAttribute('d',shapeStr);\r\n            }\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                if(shapeData && shapeData.shapes){\r\n                    document.body.appendChild(tCont);\r\n\r\n                    var boundingBox = tCont.getBBox();\r\n                    tCont.setAttribute('width',boundingBox.width + 2);\r\n                    tCont.setAttribute('height',boundingBox.height + 2);\r\n                    tCont.setAttribute('viewBox',(boundingBox.x-1)+' '+ (boundingBox.y-1)+' '+ (boundingBox.width+2)+' '+ (boundingBox.height+2));\r\n                    tCont.style.transform = tCont.style.webkitTransform = 'translate(' + (boundingBox.x-1) + 'px,' + (boundingBox.y-1) + 'px)';\r\n\r\n                    letters[i].yOffset = boundingBox.y-1;\r\n                    tParent.appendChild(tCont);\r\n\r\n                } else{\r\n                    tCont.setAttribute('width',1);\r\n                    tCont.setAttribute('height',1);\r\n                }\r\n            }else{\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }else{\r\n            tSpan.textContent = letters[i].val;\r\n            tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                //\r\n                tSpan.style.transform = tSpan.style.webkitTransform = 'translate3d(0,'+ -documentData.s/1.2+'px,0)';\r\n            } else {\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }\r\n        //\r\n        if(!this.isMasked){\r\n            this.textSpans[cnt] = tParent;\r\n        }else{\r\n            this.textSpans[cnt] = tSpan;\r\n        }\r\n        this.textSpans[cnt].style.display = 'block';\r\n        this.textPaths[cnt] = tSpan;\r\n        cnt += 1;\r\n    }\r\n    while(cnt < this.textSpans.length){\r\n        this.textSpans[cnt].style.display = 'none';\r\n        cnt += 1;\r\n    }\r\n}\r\n\r\nHTextElement.prototype.hide = SVGTextElement.prototype.hide;\r\n\r\nHTextElement.prototype.renderFrame = function(parentMatrix){\r\n\r\n    var renderParent = this._parent.renderFrame.call(this,parentMatrix);\r\n    if(renderParent===false){\r\n        this.hide();\r\n        return;\r\n    }\r\n    if(this.hidden){\r\n        this.hidden = false;\r\n        this.innerElem.style.display = 'block';\r\n        this.layerElement.style.display = 'block';\r\n    }\r\n\r\n    if(this.data.singleShape){\r\n        if(!this.firstFrame && !this.lettersChangedFlag){\r\n            return;\r\n        } else {\r\n            // Todo Benchmark if using this is better than getBBox\r\n             if(this.isMasked && this.finalTransform.matMdf){\r\n                 this.cont.setAttribute('viewBox',-this.finalTransform.mProp.p.v[0]+' '+ -this.finalTransform.mProp.p.v[1]+' '+this.compW+' '+this.compH);\r\n                this.cont.style.transform = this.cont.style.webkitTransform = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n             }\r\n        }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if(!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag){\r\n        return;\r\n    }\r\n    var  i,len, count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter, textSpan, textPath;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            count += 1;\r\n            continue;\r\n        }\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n        if(!this.isMasked){\r\n            textSpan.style.transform = textSpan.style.webkitTransform = renderedLetter.m;\r\n        }else{\r\n            textSpan.setAttribute('transform',renderedLetter.m);\r\n        }\r\n        ////textSpan.setAttribute('opacity',renderedLetter.o);\r\n        textSpan.style.opacity = renderedLetter.o;\r\n        if(renderedLetter.sw){\r\n            textPath.setAttribute('stroke-width',renderedLetter.sw);\r\n        }\r\n        if(renderedLetter.sc){\r\n            textPath.setAttribute('stroke',renderedLetter.sc);\r\n        }\r\n        if(renderedLetter.fc){\r\n            textPath.setAttribute('fill',renderedLetter.fc);\r\n            textPath.style.color = renderedLetter.fc;\r\n        }\r\n    }\r\n    if(this.isVisible && (this.elemMdf || this.firstFrame)){\r\n        if(this.innerElem.getBBox){\r\n            var boundingBox = this.innerElem.getBBox();\r\n\r\n            if(this.currentBBox.w !== boundingBox.width){\r\n                this.currentBBox.w = boundingBox.width;\r\n                this.cont.setAttribute('width',boundingBox.width);\r\n            }\r\n            if(this.currentBBox.h !== boundingBox.height){\r\n                this.currentBBox.h = boundingBox.height;\r\n                this.cont.setAttribute('height',boundingBox.height);\r\n            }\r\n\r\n            var margin = 1;\r\n            if(this.currentBBox.w !== (boundingBox.width + margin*2) || this.currentBBox.h !== (boundingBox.height + margin*2)  || this.currentBBox.x !== (boundingBox.x - margin)  || this.currentBBox.y !== (boundingBox.y - margin)){\r\n                this.currentBBox.w = boundingBox.width + margin*2;\r\n                this.currentBBox.h = boundingBox.height + margin*2;\r\n                this.currentBBox.x = boundingBox.x - margin;\r\n                this.currentBBox.y = boundingBox.y - margin;\r\n\r\n                this.cont.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n                this.cont.style.transform = this.cont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n            }\r\n        }\r\n    }\r\n    if(this.firstFrame){\r\n        this.firstFrame = false;\r\n    }\r\n}\nfunction HImageElement(data,parentContainer,globalData,comp, placeholder){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n}\r\ncreateElement(HBaseElement, HImageElement);\r\n\r\nHImageElement.prototype.createElements = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if(this.data.hasMask){\r\n        var parent = document.createElement('div');\r\n        styleDiv(parent);\r\n        var cont = document.createElementNS(svgNS,'svg');\r\n        styleDiv(cont);\r\n        cont.setAttribute('width',this.assetData.w);\r\n        cont.setAttribute('height',this.assetData.h);\r\n        parent.appendChild(cont);\r\n        this.imageElem = document.createElementNS(svgNS,'image');\r\n        this.imageElem.setAttribute('width',this.assetData.w+\"px\");\r\n        this.imageElem.setAttribute('height',this.assetData.h+\"px\");\r\n        this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n        cont.appendChild(this.imageElem);\r\n        this.layerElement = parent;\r\n        this.transformedElement = parent;\r\n        this.baseElement = parent;\r\n        this.innerElem = parent;\r\n        this.maskedElement = this.imageElem;\r\n    } else {\r\n        styleDiv(img);\r\n        this.layerElement = img;\r\n        this.baseElement = img;\r\n        this.innerElem = img;\r\n        this.transformedElement = img;\r\n    }\r\n    img.src = assetPath;\r\n    if(this.data.ln){\r\n        this.innerElem.setAttribute('id',this.data.ln);\r\n    }\r\n    this.checkParenting();\r\n};\r\n\r\nHImageElement.prototype.show = HSolidElement.prototype.show;\r\nHImageElement.prototype.hide = HSolidElement.prototype.hide;\r\nHImageElement.prototype.renderFrame = HSolidElement.prototype.renderFrame;\r\nHImageElement.prototype.destroy = HSolidElement.prototype.destroy;\nfunction HCameraElement(data,parentContainer,globalData,comp, placeholder){\r\n    this._parent.constructor.call(this,data,parentContainer,globalData,comp, placeholder);\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this,data.pe,0,0,this.dynamicProperties);\r\n    if(data.ks.p.s){\r\n        this.px = getProp(this,data.ks.p.x,1,0,this.dynamicProperties);\r\n        this.py = getProp(this,data.ks.p.y,1,0,this.dynamicProperties);\r\n        this.pz = getProp(this,data.ks.p.z,1,0,this.dynamicProperties);\r\n    }else{\r\n        this.p = getProp(this,data.ks.p,1,0,this.dynamicProperties);\r\n    }\r\n    if(data.ks.a){\r\n        this.a = getProp(this,data.ks.a,1,0,this.dynamicProperties);\r\n    }\r\n    if(data.ks.or.k.length && data.ks.or.k[0].to){\r\n        var i,len = data.ks.or.k.length;\r\n        for(i=0;i<len;i+=1){\r\n            data.ks.or.k[i].to = null;\r\n            data.ks.or.k[i].ti = null;\r\n        }\r\n    }\r\n    this.or = getProp(this,data.ks.or,1,degToRads,this.dynamicProperties);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this,data.ks.rx,0,degToRads,this.dynamicProperties);\r\n    this.ry = getProp(this,data.ks.ry,0,degToRads,this.dynamicProperties);\r\n    this.rz = getProp(this,data.ks.rz,0,degToRads,this.dynamicProperties);\r\n    this.mat = new Matrix();\r\n}\r\ncreateElement(HBaseElement, HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function() {\r\n    var i, len = this.comp.threeDElements.length, comp;\r\n    for(i=0;i<len;i+=1){\r\n        //[perspectiveElem,container]\r\n        comp = this.comp.threeDElements[i];\r\n        comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n        comp.container.style.transformOrigin = comp.container.style.mozTransformOrigin = comp.container.style.webkitTransformOrigin = \"0px 0px 0px\";\r\n        comp.perspectiveElem.style.transform = comp.perspectiveElem.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function(){\r\n};\r\n\r\nHCameraElement.prototype.hide = function(){\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function(){\r\n    var mdf = this.firstFrame;\r\n    var i, len;\r\n    if(this.hierarchy){\r\n        len = this.hierarchy.length;\r\n        for(i=0;i<len;i+=1){\r\n            mdf = this.hierarchy[i].finalTransform.mProp.mdf ? true : mdf;\r\n        }\r\n    }\r\n    if(mdf || (this.p && this.p.mdf) || (this.px && (this.px.mdf || this.py.mdf || this.pz.mdf)) || this.rx.mdf || this.ry.mdf || this.rz.mdf || this.or.mdf || (this.a && this.a.mdf)) {\r\n        this.mat.reset();\r\n\r\n        if(this.p){\r\n            this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]);\r\n        }else{\r\n            this.mat.translate(-this.px.v,-this.py.v,this.pz.v);\r\n        }\r\n        if(this.a){\r\n            var diffVector = [this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]];\r\n            var mag = Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2));\r\n            //var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n            var lookDir = [diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag];\r\n            var lookLengthOnXZ = Math.sqrt( lookDir[2]*lookDir[2] + lookDir[0]*lookDir[0] );\r\n            var m_rotationX = (Math.atan2( lookDir[1], lookLengthOnXZ ));\r\n            var m_rotationY = (Math.atan2( lookDir[0], -lookDir[2]));\r\n            this.mat.rotateY(m_rotationY).rotateX(-m_rotationX);\r\n\r\n        }\r\n        this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n        this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n        this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);\r\n        this.mat.translate(0,0,this.pe.v);\r\n        if(this.hierarchy){\r\n            var mat;\r\n            len = this.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                mat = this.hierarchy[i].finalTransform.mProp.iv.props;\r\n                this.mat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],-mat[12],-mat[13],mat[14],mat[15]);\r\n            }\r\n        }\r\n        len = this.comp.threeDElements.length;\r\n        var comp;\r\n        for(i=0;i<len;i+=1){\r\n            comp = this.comp.threeDElements[i];\r\n            comp.container.style.transform = comp.container.style.webkitTransform = this.mat.toCSS();\r\n        }\r\n    }\r\n    this.firstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.destroy = function(){\r\n};\nvar Expressions = (function(){\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n\r\n    function initExpressions(animation){\r\n        animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n        animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n    }\r\n   return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\n(function addPropertyDecorator() {\r\n\r\n    function getStaticValueAtTime() {\r\n        return this.pv;\r\n    }\r\n\r\n    function loopOut(type,duration,durationFlag){\r\n        if(!this.k || !this.keyframes){\r\n            return this.pv;\r\n        }\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n        if(currentFrame<=lastKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, firstKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,lastKeyFrame - this.elem.data.ip);\r\n                } else {\r\n                    cycleDuration = Math.abs(lastKeyFrame - elem.comp.globalData.frameRate*duration);\r\n                }\r\n                firstKeyFrame = lastKeyFrame - cycleDuration;\r\n            }\r\n            var offsetTime = this.offsetTime || 0;\r\n            var i, len, ret;\r\n            if(type.toLowerCase() === 'pingpong') {\r\n                var iterations = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(iterations % 2 !== 0){\r\n                    return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) - offsetTime) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = (endV[i]-initV[i])*repeats + current[i];\r\n                    }\r\n                    return ret;\r\n                }\r\n                return (endV-initV)*repeats + current;\r\n            } else if(type === 'continue'){\r\n                var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(lastValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = lastValue[i] + (lastValue[i]-nextLastValue[i])*((currentFrame - lastKeyFrame)/ this.comp.globalData.frameRate)/0.0005;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return lastValue + (lastValue-nextLastValue)*(((currentFrame - lastKeyFrame))/0.001);\r\n            }\r\n            return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) - offsetTime) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function loopIn(type,duration, durationFlag) {\r\n        if(!this.k){\r\n            return this.pv;\r\n        }\r\n        var currentFrame = time*elem.comp.globalData.frameRate;\r\n        var keyframes = this.keyframes;\r\n        var firstKeyFrame = keyframes[0].t;\r\n        var offsetTime = this.offsetTime || 0;\r\n        if(currentFrame>=firstKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, lastKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                lastKeyFrame = keyframes[duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,this.elem.data.op - firstKeyFrame);\r\n                } else {\r\n                    cycleDuration = Math.abs(elem.comp.globalData.frameRate*duration);\r\n                }\r\n                lastKeyFrame = firstKeyFrame + cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((firstKeyFrame - currentFrame)/cycleDuration);\r\n                if(iterations % 2 === 0){\r\n                    return this.getValueAtTime((((firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame) - offsetTime) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((firstKeyFrame - currentFrame)/cycleDuration)+1;\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = current[i]-(endV[i]-initV[i])*repeats;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return current-(endV-initV)*repeats;\r\n            } else if(type === 'continue'){\r\n                var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(firstValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = firstValue[i] + (firstValue[i]-nextFirstValue[i])*(firstKeyFrame - currentFrame)/0.001;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return firstValue + (firstValue-nextFirstValue)*(firstKeyFrame - currentFrame)/0.001;\r\n            }\r\n\r\n            return this.getValueAtTime(((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration +  firstKeyFrame) - offsetTime) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n        if(!this._cachingAtTime) {\r\n            this._cachingAtTime = {lastValue:-99999,lastIndex:0};\r\n        }\r\n        //console.log('this._cachingAtTime', JSON.parse(JSON.stringify(this._cachingAtTime)))\r\n        if(frameNum !== this._cachingAtTime.lastFrame) {\r\n            frameNum *= this.elem.globalData.frameRate;\r\n            frameNum -= this.offsetTime;\r\n            var i = this._caching.lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            var interpolationResult = this.interpolateValue(frameNum, i, this.pv, this._cachingAtTime);\r\n            this._cachingAtTime.lastIndex = interpolationResult.iterationIndex;\r\n            this._cachingAtTime.value = interpolationResult.value;\r\n            this._cachingAtTime.lastFrame = frameNum;\r\n        }\r\n        return this._cachingAtTime.value;\r\n\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n        if(this.vel !== undefined){\r\n            return this.vel;\r\n        }\r\n        var delta = -0.01;\r\n        //frameNum += this.elem.data.st;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var velocity;\r\n        if(v1.length){\r\n            velocity = Array.apply(null,{length:v1.length});\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                //removing frameRate\r\n                //if needed, don't add it here\r\n                //velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n                velocity[i] = (v2[i] - v1[i])/delta;\r\n            }\r\n        } else {\r\n            velocity = (v2 - v1)/delta;\r\n        }\r\n        return velocity;\r\n    };\r\n\r\n    function setGroupProperty(propertyGroup){\r\n        this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n    function searchExpressions(elem,data,prop){\r\n        if(data.x){\r\n            prop.k = true;\r\n            prop.x = true;\r\n            if(prop.getValue) {\r\n                prop.getPreValue = prop.getValue;\r\n            }\r\n            prop.getValue = ExpressionManager.initiateExpression.bind(prop)(elem,data,prop);\r\n        }\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n        console.log('time:', time)\r\n    }\r\n\r\n    function getTransformStaticValueAtTime(time) {\r\n\r\n    }\r\n\r\n    var TextExpressionSelectorProp = (function(){\r\n\r\n        function getValueProxy(index,total){\r\n            this.textIndex = index+1;\r\n            this.textTotal = total;\r\n            this.getValue();\r\n            return this.v;\r\n        }\r\n\r\n        return function TextExpressionSelectorProp(elem,data){\r\n            this.pv = 1;\r\n            this.comp = elem.comp;\r\n            this.elem = elem;\r\n            this.mult = .01;\r\n            this.type = 'textSelector';\r\n            this.textTotal = data.totalChars;\r\n            this.selectorValue = 100;\r\n            this.lastValue = [1,1,1];\r\n            searchExpressions.bind(this)(elem,data,this);\r\n            this.getMult = getValueProxy;\r\n            this.getVelocityAtTime = getVelocityAtTime;\r\n            if(this.kf){\r\n                this.getValueAtTime = getValueAtTime.bind(this);\r\n            } else {\r\n                this.getValueAtTime = getStaticValueAtTime.bind(this);\r\n            }\r\n            this.setGroupProperty = setGroupProperty;\r\n        }\r\n    }());\r\n\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n    PropertyFactory.getProp = function(elem,data,type, mult, arr){\r\n        var prop = propertyGetProp(elem,data,type, mult, arr);\r\n        //prop.getVelocityAtTime = getVelocityAtTime;\r\n        //prop.loopOut = loopOut;\r\n        //prop.loopIn = loopIn;\r\n        if(type === 2) {\r\n            if(prop.dynamicProperties.length) {\r\n                prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n            } else {\r\n                prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n            }\r\n        } else {\r\n            if(prop.kf){\r\n                prop.getValueAtTime = getValueAtTime.bind(prop);\r\n            } else {\r\n                prop.getValueAtTime = getStaticValueAtTime.bind(prop);\r\n            }\r\n        }\r\n        prop.setGroupProperty = setGroupProperty;\r\n        prop.loopOut = loopOut;\r\n        prop.loopIn = loopIn;\r\n        prop.getVelocityAtTime = getVelocityAtTime;\r\n        prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n        var isAdded = prop.k;\r\n        if(data.ix !== undefined){\r\n            Object.defineProperty(prop,'propertyIndex',{\r\n                get: function(){\r\n                    return data.ix;\r\n                }\r\n            })\r\n        }\r\n        searchExpressions(elem,data,prop);\r\n        if(!isAdded && prop.x){\r\n            arr.push(prop);\r\n        }\r\n\r\n        return prop;\r\n    }\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n        if (!this._shapeValueAtTime) {\r\n            this._lastIndexAtTime = 0;\r\n            this._lastTimeAtTime = -999999;\r\n            this._shapeValueAtTime = shape_pool.clone(this.pv);\r\n        }\r\n        if(frameNum !== this._lastTimeAtTime) {\r\n            this._lastTimeAtTime = frameNum;\r\n            frameNum *= this.elem.globalData.frameRate;\r\n            var interpolationResult = this.interpolateShape(frameNum, this._lastIndexAtTime, this._shapeValueAtTime, false);\r\n            this._lastIndexAtTime = interpolationResult.iterationIndex;\r\n        }\r\n        return this._shapeValueAtTime;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    ShapePropertyConstructorFunction.prototype.vertices = function(prop, time){\r\n        var shapePath = this.v;\r\n        if(time !== undefined) {\r\n            shapePath = this.getValueAtTime(time, 0);\r\n        }\r\n        var i, len = shapePath._length;\r\n        var vertices = shapePath[prop];\r\n        var points = shapePath.v;\r\n        var arr = Array.apply(null,{length:len})\r\n        for(i = 0; i < len; i += 1) {\r\n            if(prop === 'i' || prop === 'o') {\r\n                arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]]\r\n            } else {\r\n                arr[i] = [vertices[i][0], vertices[i][1]]\r\n            }\r\n            \r\n        }\r\n        return arr;\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.points = function(time){\r\n        return this.vertices('v', time);\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.inTangents = function(time){\r\n        return this.vertices('i', time);\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.outTangents = function(time){\r\n        return this.vertices('o', time);\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.isClosed = function(){\r\n        return this.v.c;\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.pointOnPath = function(perc, time){\r\n        var shapePath = this.v;\r\n        if(time !== undefined) {\r\n            shapePath = this.getValueAtTime(time, 0);\r\n        }\r\n        if(!this._segmentsLength) {\r\n            this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n        }\r\n\r\n        var segmentsLength = this._segmentsLength;\r\n        var lengths = segmentsLength.lengths;\r\n        var lengthPos = segmentsLength.totalLength * perc;\r\n        var i = 0, len = lengths.length;\r\n        var j = 0, jLen;\r\n        var accumulatedLength = 0;\r\n        var segments;\r\n        while(i < len) {\r\n            if(accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n                segments = lengths[i].segments;\r\n                var initIndex = i;\r\n                var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n                var segmentPerc = (lengthPos - accumulatedLength)/lengths[i].addedLength;\r\n                var pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i])\r\n                break;\r\n            } else {\r\n                accumulatedLength += lengths[i].addedLength;\r\n            }\r\n            i += 1;\r\n        }\r\n        if(!pt){\r\n            pt = shapePath.c ? [shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]]\r\n        }\r\n        return pt;\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.vectorOnPath = function(perc, time, vectorType){\r\n        //perc doesn't use triple equality because can be a Number object, not a primitive.\r\n        perc = perc == 1 ? this.v.c ? 0 : 0.999 : perc;\r\n        var pt1 = this.pointOnPath(perc, time);\r\n        var pt2 = this.pointOnPath(perc + 0.001, time);\r\n        var xLength = pt2[0] - pt1[0];\r\n        var yLength = pt2[1] - pt1[1];\r\n        var magnitude = Math.sqrt(Math.pow(xLength,2) + Math.pow(yLength,2));\r\n        var unitVector = vectorType === 'tangent' ? [xLength/magnitude, yLength/magnitude] : [-yLength/magnitude, xLength/magnitude];\r\n        return unitVector;\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.tangentOnPath = function(perc, time){\r\n        return this.vectorOnPath(perc, time, 'tangent');\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.normalOnPath = function(perc, time){\r\n        return this.vectorOnPath(perc, time, 'normal');\r\n    }\r\n\r\n    ShapePropertyConstructorFunction.prototype.setGroupProperty = setGroupProperty;\r\n    ShapePropertyConstructorFunction.prototype.getValueAtTime = getStaticValueAtTime;\r\n\r\n    KeyframedShapePropertyConstructorFunction.prototype.vertices = ShapePropertyConstructorFunction.prototype.vertices;\r\n    KeyframedShapePropertyConstructorFunction.prototype.points = ShapePropertyConstructorFunction.prototype.points;\r\n    KeyframedShapePropertyConstructorFunction.prototype.inTangents = ShapePropertyConstructorFunction.prototype.inTangents;\r\n    KeyframedShapePropertyConstructorFunction.prototype.outTangents = ShapePropertyConstructorFunction.prototype.outTangents;\r\n    KeyframedShapePropertyConstructorFunction.prototype.isClosed = ShapePropertyConstructorFunction.prototype.isClosed;\r\n    KeyframedShapePropertyConstructorFunction.prototype.pointOnPath = ShapePropertyConstructorFunction.prototype.pointOnPath;\r\n    KeyframedShapePropertyConstructorFunction.prototype.vectorOnPath = ShapePropertyConstructorFunction.prototype.vectorOnPath;\r\n    KeyframedShapePropertyConstructorFunction.prototype.tangentOnPath = ShapePropertyConstructorFunction.prototype.tangentOnPath;\r\n    KeyframedShapePropertyConstructorFunction.prototype.normalOnPath = ShapePropertyConstructorFunction.prototype.normalOnPath;\r\n    KeyframedShapePropertyConstructorFunction.prototype.setGroupProperty = ShapePropertyConstructorFunction.prototype.setGroupProperty;\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n    ShapePropertyFactory.getShapeProp = function(elem,data,type, arr, trims){\r\n        var prop = propertyGetShapeProp(elem,data,type, arr, trims);\r\n        var isAdded = prop.k;\r\n        if(data.ix !== undefined){\r\n            Object.defineProperty(prop,'propertyIndex',{\r\n                get: function(){\r\n                    return data.ix;\r\n                }\r\n            })\r\n        }\r\n        if(type === 3){\r\n            searchExpressions(elem,data.pt,prop);\r\n        } else if(type === 4){\r\n            searchExpressions(elem,data.ks,prop);\r\n        }\r\n        if(!isAdded && prop.x){\r\n            arr.push(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    var propertyGetTextProp = PropertyFactory.getTextSelectorProp;\r\n    PropertyFactory.getTextSelectorProp = function(elem, data,arr){\r\n        if(data.t === 1){\r\n            return new TextExpressionSelectorProp(elem, data,arr);\r\n        } else {\r\n            return propertyGetTextProp(elem,data,arr);\r\n        }\r\n    }\r\n}());\n(function addTextPropertyDecorator() {\r\n\r\n    function searchExpressions(){\r\n        if(this.data.d.x){\r\n            this.comp = this.elem.comp;\r\n            if(this.getValue) {\r\n                this.getPreValue = this.getValue;\r\n            }\r\n            this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);\r\n            this.getValue = this.getExpressionValue;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    TextProperty.prototype.searchProperty = function(){\r\n        this.kf = this.searchExpressions() || this.data.d.k.length > 1;\r\n        return this.kf;\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function(num){\r\n        this.calculateExpression();\r\n        if(this.mdf) {\r\n            this.currentData.t = this.v.toString();\r\n            this.completeTextData(this.currentData);\r\n        }\r\n    }\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n    \r\n}());\nvar ExpressionManager = (function(){\r\n    var ob = {};\r\n    var Math = BMMath;\r\n    var window = null;\r\n    var document = null;\r\n\r\n    function duplicatePropertyValue(value, mult){\r\n        mult = mult || 1;\r\n\r\n        if(typeof value === 'number'  || value instanceof Number){\r\n            return value*mult;\r\n        }else if(value.i){\r\n            return JSON.parse(JSON.stringify(value));\r\n        }else{\r\n            var arr = Array.apply(null,{length:value.length});\r\n            var i, len = value.length;\r\n            for(i=0;i<len;i+=1){\r\n                arr[i]=value[i]*mult;\r\n            }\r\n            return arr;\r\n        }\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n        if(shape1._length !== shape2._length || shape1.c !== shape2.c){\r\n            return false;\r\n        }\r\n        var i, len = shape1._length;\r\n        for(i = 0; i < len; i += 1) {\r\n            if(shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1]\r\n                || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1]\r\n                || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function $bm_neg(a){\r\n        var tOfA = typeof a;\r\n        if(tOfA === 'number' || tOfA === 'boolean'  || a instanceof Number ){\r\n            return -a;\r\n        }\r\n        if(a.constructor === Array){\r\n            var i, lenA = a.length;\r\n            var retArr = [];\r\n            for(i=0;i<lenA;i+=1){\r\n                retArr[i] = -a[i];\r\n            }\r\n            return retArr;\r\n        }\r\n    }\r\n\r\n    function sum(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if(tOfA === 'string' || tOfB === 'string'){\r\n            return a + b;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string'  || b instanceof Number)) {\r\n            return a + b;\r\n        }\r\n        if(a.constructor === Array && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )){\r\n            a[0] = a[0] + b;\r\n            return a;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && b.constructor === Array){\r\n            b[0] = a + b[0];\r\n            return b;\r\n        }\r\n        if(a.constructor === Array && b.constructor === Array){\r\n            \r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] + b[i];\r\n                }else{\r\n                    retArr[i] = b[i] == undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n    var add = sum;\r\n\r\n    function sub(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )) {\r\n            if(tOfA === 'string') {\r\n                a = parseInt(a);\r\n            }\r\n            if(tOfB === 'string') {\r\n                b = parseInt(b);\r\n            }\r\n            return a - b;\r\n        }\r\n        if( a.constructor === Array && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )){\r\n            a[0] = a[0] - b;\r\n            return a;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) &&  b.constructor === Array){\r\n            b[0] = a - b[0];\r\n            return b;\r\n        }\r\n        if(a.constructor === Array && b.constructor === Array){\r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && typeof (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] - b[i];\r\n                }else{\r\n                    retArr[i] = b[i] == undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function mul(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )) {\r\n            return a * b;\r\n        }\r\n\r\n        var i, len;\r\n        if(a.constructor === Array && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )){\r\n            len = a.length;\r\n            arr = Array.apply(null,{length:len});\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] * b;\r\n            }\r\n            return arr;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && b.constructor === Array){\r\n            len = b.length;\r\n            arr = Array.apply(null,{length:len});\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a * b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function div(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )) {\r\n            return a / b;\r\n        }\r\n        var i, len;\r\n        if(a.constructor === Array && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number  )){\r\n            len = a.length;\r\n            arr = Array.apply(null,{length:len});\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] / b;\r\n            }\r\n            return arr;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && b.constructor === Array){\r\n            len = b.length;\r\n            arr = Array.apply(null,{length:len});\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a / b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n    function mod(a,b) {\r\n        if(typeof a === 'string') {\r\n            a = parseInt(a);\r\n        }\r\n        if(typeof b === 'string') {\r\n            b = parseInt(b);\r\n        }\r\n        return a % b;\r\n    }\r\n\r\n    function clamp(num, min, max) {\r\n        if(min > max){\r\n            var mm = max;\r\n            max = min;\r\n            min = mm;\r\n        }\r\n        return Math.min(Math.max(num, min), max);\r\n    }\r\n\r\n    function radiansToDegrees(val) {\r\n        return val/degToRads;\r\n    }\r\n    var radians_to_degrees = radiansToDegrees;\r\n\r\n    function degreesToRadians(val) {\r\n        return val*degToRads;\r\n    }\r\n    var degrees_to_radians = radiansToDegrees;\r\n\r\n    var helperLengthArray = [0,0,0,0,0,0];\r\n\r\n    function length(arr1,arr2){\r\n        if(typeof arr1 === 'number' || arr1 instanceof Number){\r\n            arr2 = arr2 || 0;\r\n            return Math.abs(arr1 - arr2);\r\n        }\r\n        if(!arr2){\r\n            arr2 = helperLengthArray;\r\n        }\r\n        var i,len = Math.min(arr1.length,arr2.length);\r\n        var addedLength = 0;\r\n        for(i=0;i<len;i+=1){\r\n            addedLength += Math.pow(arr2[i]-arr1[i],2);\r\n        }\r\n        return Math.sqrt(addedLength);\r\n    }\r\n\r\n    function normalize(vec){\r\n        return div(vec, length(vec));\r\n    }\r\n\r\n    function rgbToHsl(val){\r\n        var r = val[0]; var g = val[1]; var b = val[2];\r\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min){\r\n            h = s = 0; // achromatic\r\n        }else{\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max){\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        return [h, s, l,val[3]];\r\n    }\r\n    function hslToRgb(val){\r\n        var h = val[0];\r\n        var s = val[1];\r\n        var l = val[2];\r\n\r\n        var r, g, b;\r\n\r\n        if(s == 0){\r\n            r = g = b = l; // achromatic\r\n        }else{\r\n            function hue2rgb(p, q, t){\r\n                if(t < 0) t += 1;\r\n                if(t > 1) t -= 1;\r\n                if(t < 1/6) return p + (q - p) * 6 * t;\r\n                if(t < 1/2) return q;\r\n                if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n                return p;\r\n            }\r\n\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return [r, g , b, val[3]];\r\n    }\r\n\r\n    function linear(t, tMin, tMax, value1, value2){\r\n        if(value1 === undefined || value2 === undefined){\r\n            return linear(t,0,1,tMin,tMax);\r\n        }\r\n        if(t <= tMin) {\r\n            return value1;\r\n        }else if(t >= tMax){\r\n            return value2;\r\n        }\r\n        var perc = tMax === tMin ? 0 : (t-tMin)/(tMax-tMin);\r\n        if(!value1.length){\r\n            return value1 + (value2-value1)*perc;\r\n        }\r\n        var i, len = value1.length;\r\n        var arr = Array.apply( null, { length: len } );\r\n        for(i=0;i<len;i+=1){\r\n            arr[i] = value1[i] + (value2[i]-value1[i])*perc;\r\n        }\r\n        return arr;\r\n    }\r\n    function random(min,max){\r\n        if(max === undefined){\r\n            if(min === undefined){\r\n                min = 0;\r\n                max = 1;\r\n            } else {\r\n                max = min;\r\n                min = undefined;\r\n            }\r\n        }\r\n        if(max.length){\r\n            var i, len = max.length;\r\n            if(!min){\r\n                min = Array.apply(null,{length:len});\r\n            }\r\n            var arr = Array.apply(null,{length:len});\r\n            var rnd = BMMath.random();\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = min[i] + rnd*(max[i]-min[i])\r\n            }\r\n            return arr;\r\n        }\r\n        if(min === undefined){\r\n            min = 0;\r\n        }\r\n        var rndm = BMMath.random();\r\n        return min + rndm*(max-min);\r\n    }\r\n\r\n    function createPath(points, inTangents, outTangents, closed) {\r\n        inTangents = inTangents && inTangents.length ? inTangents : points;\r\n        outTangents = outTangents && outTangents.length ? outTangents : points;\r\n        var path = shape_pool.newShape();\r\n        var len = points.length;\r\n        path.setPathData(closed, len);\r\n        for(i = 0; i < len; i += 1) {\r\n            path.setTripleAt(points[i][0],points[i][1],outTangents[i][0] + points[i][0],outTangents[i][1] + points[i][1],inTangents[i][0] + points[i][0],inTangents[i][1] + points[i][1],i,true)\r\n        }\r\n        return path\r\n    }\r\n\r\n    function initiateExpression(elem,data,property){\r\n        var val = data.x;\r\n        var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n        var _needsRandom = val.indexOf('random') !== -1;\r\n        var elemType = elem.data.ty;\r\n        var transform,content,effect;\r\n        var thisComp = elem.comp;\r\n        var thisProperty = property;\r\n        elem.comp.frameDuration = 1/elem.comp.globalData.frameRate;\r\n        var inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        var outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        var width = elem.data.sw ? elem.data.sw : 0;\r\n        var height = elem.data.sh ? elem.data.sh : 0;\r\n        var loopIn, loop_in, loopOut, loop_out;\r\n        var toWorld,fromWorld,fromComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime;\r\n        var fn = new Function();\r\n        //var fnStr = 'var fn = function(){'+val+';this.v = $bm_rt;}';\r\n        //eval(fnStr);\r\n\r\n        var fn = eval('[function(){' + val+';if($bm_rt.__shapeObject){this.v=shape_pool.clone($bm_rt.v);}else{this.v=$bm_rt;}}' + ']')[0];\r\n        var bindedFn = fn.bind(this);\r\n        var numKeys = property.kf ? data.k.length : 0;\r\n\r\n        var wiggle = function wiggle(freq,amp){\r\n            var i,j, len = this.pv.length ? this.pv.length : 1;\r\n            var addedAmps = Array.apply(null,{len:len});\r\n            for(j=0;j<len;j+=1){\r\n                addedAmps[j] = 0;\r\n            }\r\n            freq = 5;\r\n            var iterations = Math.floor(time*freq);\r\n            i = 0;\r\n            j = 0;\r\n            while(i<iterations){\r\n                //var rnd = BMMath.random();\r\n                for(j=0;j<len;j+=1){\r\n                    addedAmps[j] += -amp + amp*2*BMMath.random();\r\n                    //addedAmps[j] += -amp + amp*2*rnd;\r\n                }\r\n                i += 1;\r\n            }\r\n            //var rnd2 = BMMath.random();\r\n            var periods = time*freq;\r\n            var perc = periods - Math.floor(periods);\r\n            var arr = Array.apply({length:len});\r\n            if(len>1){\r\n                for(j=0;j<len;j+=1){\r\n                    arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*BMMath.random())*perc;\r\n                    //arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n                    //arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n                }\r\n                return arr;\r\n            } else {\r\n                return this.pv + addedAmps[0] + (-amp + amp*2*BMMath.random())*perc;\r\n            }\r\n        }.bind(this);\r\n\r\n        if(thisProperty.loopIn) {\r\n            loopIn = thisProperty.loopIn.bind(thisProperty);\r\n            loop_in = loopIn;\r\n        }\r\n\r\n        if(thisProperty.loopOut) {\r\n            loopOut = thisProperty.loopOut.bind(thisProperty);\r\n            loop_out = loopOut;\r\n        }\r\n\r\n        var loopInDuration = function loopInDuration(type,duration){\r\n            return loopIn(type,duration,true);\r\n        }.bind(this);\r\n\r\n        var loopOutDuration = function loopOutDuration(type,duration){\r\n            return loopOut(type,duration,true);\r\n        }.bind(this);\r\n\r\n        if(this.getValueAtTime) {\r\n            valueAtTime = this.getValueAtTime.bind(this);\r\n        }\r\n\r\n        if(this.getVelocityAtTime) {\r\n            velocityAtTime = this.getVelocityAtTime.bind(this);\r\n        }\r\n\r\n        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n        function lookAt(elem1,elem2){\r\n            var fVec = [elem2[0]-elem1[0],elem2[1]-elem1[1],elem2[2]-elem1[2]];\r\n            var pitch = Math.atan2(fVec[0],Math.sqrt(fVec[1]*fVec[1]+fVec[2]*fVec[2]))/degToRads;\r\n            var yaw = -Math.atan2(fVec[1],fVec[2])/degToRads;\r\n            return [yaw,pitch,0];\r\n        };\r\n\r\n        function easeOut(t, val1, val2){\r\n            return -(val2-val1) * t*(t-2) + val1;\r\n        };\r\n\r\n        function nearestKey(time){\r\n            var i, len = data.k.length,index,keyTime;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                index = 0;\r\n                keyTime = 0;\r\n            } else {\r\n                index = -1;\r\n                time *= elem.comp.globalData.frameRate;\r\n                if (time < data.k[0].t) {\r\n                    index = 1;\r\n                    keyTime = data.k[0].t;\r\n                } else {\r\n                    for(i=0;i<len-1;i+=1){\r\n                        if(time === data.k[i].t){\r\n                            index = i + 1;\r\n                            keyTime = data.k[i].t;\r\n                            break;\r\n                        }else if(time>data.k[i].t && time<data.k[i+1].t){\r\n                            if(time-data.k[i].t > data.k[i+1].t - time){\r\n                                index = i + 2;\r\n                                keyTime = data.k[i+1].t;\r\n                            } else {\r\n                                index = i + 1;\r\n                                keyTime = data.k[i].t;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(index === -1){\r\n                        index = i + 1;\r\n                        keyTime = data.k[i].t;\r\n                    }\r\n                }\r\n                \r\n            }\r\n            var ob = {};\r\n            ob.index = index;\r\n            ob.time = keyTime/elem.comp.globalData.frameRate;\r\n            return ob;\r\n        };\r\n\r\n        function key(ind){\r\n            var ob, i, len;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                throw new Error('The property has no keyframe at index ' + ind);\r\n            }\r\n            ind -= 1;\r\n            ob = {\r\n                time: data.k[ind].t/elem.comp.globalData.frameRate\r\n            };\r\n            var arr;\r\n            if(ind === data.k.length - 1 && !data.k[ind].h){\r\n                arr = data.k[ind-1].e;\r\n            }else{\r\n                arr = data.k[ind].s;\r\n            }\r\n            len = arr.length;\r\n            for(i=0;i<len;i+=1){\r\n                ob[i] = arr[i];\r\n            }\r\n            return ob;\r\n        };\r\n\r\n        function framesToTime(frames,fps){\r\n            if(!fps){\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return frames/fps;\r\n        };\r\n\r\n        function timeToFrames(t,fps){\r\n            if(!t && t !== 0){\r\n                t = time;\r\n            }\r\n            if(!fps){\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return t*fps;\r\n        };\r\n\r\n        function seedRandom(seed){\r\n            BMMath.seedrandom(randSeed + seed);\r\n        };\r\n\r\n        function sourceRectAtTime() {\r\n            return elem.sourceRectAtTime();\r\n        }\r\n\r\n        var time,velocity, value,textIndex,textTotal,selectorValue;\r\n        var index = elem.data.ind;\r\n        var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n        var parent;\r\n        var randSeed = Math.floor(Math.random()*1000000);\r\n        function executeExpression(){\r\n            if(_needsRandom){\r\n                seedRandom(randSeed);\r\n            }\r\n            if(this.frameExpressionId === elem.globalData.frameId && this.type !== 'textSelector'){\r\n                return;\r\n            }\r\n            if(this.lock){\r\n                this.v = duplicatePropertyValue(this.pv,this.mult);\r\n                return true;\r\n            }\r\n            if(this.type === 'textSelector'){\r\n                textIndex = this.textIndex;\r\n                textTotal = this.textTotal;\r\n                selectorValue = this.selectorValue;\r\n            }\r\n            if(!thisLayer){\r\n                thisLayer = elem.layerInterface;\r\n                thisComp = elem.comp.compInterface;\r\n                toWorld = thisLayer.toWorld.bind(thisLayer);\r\n                fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n                fromComp = thisLayer.fromComp.bind(thisLayer);\r\n                mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer):null;\r\n                fromCompToSurface = fromComp;\r\n            }\r\n            if(!transform){\r\n                transform = elem.layerInterface(\"ADBE Transform Group\");\r\n                anchorPoint = transform.anchorPoint;\r\n            }\r\n            \r\n            if(elemType === 4 && !content){\r\n                content = thisLayer(\"ADBE Root Vectors Group\");\r\n            }\r\n            if(!effect){\r\n                effect = thisLayer(4);\r\n            }\r\n            hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n            if(hasParent && !parent){\r\n                parent = elem.hierarchy[0].layerInterface;\r\n            }\r\n            this.lock = true;\r\n            if(this.getPreValue){\r\n                this.getPreValue();\r\n            }\r\n            value = this.pv;\r\n            time = this.comp.renderedFrame/this.comp.globalData.frameRate;\r\n            if(needsVelocity){\r\n                velocity = velocityAtTime(time);\r\n            }\r\n            bindedFn();\r\n            this.frameExpressionId = elem.globalData.frameId;\r\n            var i,len;\r\n            if(this.mult){\r\n                if(typeof this.v === 'number' || this.v instanceof Number || this.v instanceof String || typeof this.v === 'string'){\r\n                    this.v *= this.mult;\r\n                }else if(this.v.length === 1){\r\n                    this.v = this.v[0] * this.mult;\r\n                }else{\r\n                    len = this.v.length;\r\n                    if(value === this.v){\r\n                        this.v = len === 2 ? [value[0],value[1]] : [value[0],value[1],value[2]];\r\n                    }\r\n                    for(i = 0; i < len; i += 1){\r\n                        this.v[i] *= this.mult;\r\n                    }\r\n                }\r\n            }\r\n            if(this.v.length === 1){\r\n                this.v = this.v[0];\r\n            }\r\n            if(typeof this.v === 'number' || this.v instanceof Number || this.v instanceof String || typeof this.v === 'string'){\r\n                if(this.lastValue !== this.v){\r\n                    this.lastValue = this.v;\r\n                    this.mdf = true;\r\n                }\r\n            }else if( this.v._length){\r\n                if(!shapesEqual(this.v,this.localShapeCollection.shapes[0])){\r\n                    this.mdf = true;\r\n                    this.localShapeCollection.releaseShapes();\r\n                    this.localShapeCollection.addShape(shape_pool.clone(this.v));\r\n                }\r\n            }else{\r\n                len = this.v.length;\r\n                for(i = 0; i < len; i += 1){\r\n                    if(this.v[i] !== this.lastValue[i]){\r\n                        this.lastValue[i] = this.v[i];\r\n                        this.mdf = true;\r\n                    }\r\n                }\r\n            }\r\n            this.lock = false;\r\n        }\r\n        return executeExpression;\r\n    };\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    return ob;\r\n}());\nvar ShapeExpressionInterface = (function(){\r\n    var ob = {\r\n        createShapeInterface:createShapeInterface,\r\n        createGroupInterface:createGroupInterface,\r\n        createTrimInterface:createTrimInterface,\r\n        createStrokeInterface:createStrokeInterface,\r\n        createTransformInterface:createTransformInterface,\r\n        createEllipseInterface:createEllipseInterface,\r\n        createStarInterface:createStarInterface,\r\n        createRectInterface:createRectInterface,\r\n        createRoundedInterface:createRoundedInterface,\r\n        createRepatearInterface:createRepatearInterface,\r\n        createPathInterface:createPathInterface,\r\n        createFillInterface:createFillInterface\r\n    };\r\n    function createShapeInterface(shapes,view,propertyGroup){\r\n        return shapeInterfaceFactory(shapes,view,propertyGroup);\r\n    }\r\n    function createGroupInterface(shapes,view,propertyGroup){\r\n        return groupInterfaceFactory(shapes,view,propertyGroup);\r\n    }\r\n    function createFillInterface(shape,view,propertyGroup){\r\n        return fillInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createStrokeInterface(shape,view,propertyGroup){\r\n        return strokeInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createTrimInterface(shape,view,propertyGroup){\r\n        return trimInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createTransformInterface(shape,view,propertyGroup){\r\n        return transformInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createEllipseInterface(shape,view,propertyGroup){\r\n        return ellipseInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createStarInterface(shape,view,propertyGroup){\r\n        return starInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createRectInterface(shape,view,propertyGroup){\r\n        return rectInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createRoundedInterface(shape,view,propertyGroup){\r\n        return roundedInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createRepatearInterface(shape,view,propertyGroup){\r\n        return repeaterInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n    function createPathInterface(shape,view,propertyGroup){\r\n        return pathInterfaceFactory(shape,view,propertyGroup);\r\n    }\r\n\r\n    function iterateElements(shapes,view, propertyGroup){\r\n        var arr = [];\r\n        var i, len = shapes ? shapes.length : 0;\r\n        for(i=0;i<len;i+=1){\r\n            if(shapes[i].ty == 'gr'){\r\n                arr.push(ShapeExpressionInterface.createGroupInterface(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'fl'){\r\n                arr.push(ShapeExpressionInterface.createFillInterface(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'st'){\r\n                arr.push(ShapeExpressionInterface.createStrokeInterface(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tm'){\r\n                arr.push(ShapeExpressionInterface.createTrimInterface(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tr'){\r\n                //arr.push(ShapeExpressionInterface.createTransformInterface(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'el'){\r\n                arr.push(ShapeExpressionInterface.createEllipseInterface(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'sr'){\r\n                arr.push(ShapeExpressionInterface.createStarInterface(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'sh'){\r\n                arr.push(ShapeExpressionInterface.createPathInterface(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rc'){\r\n                arr.push(ShapeExpressionInterface.createRectInterface(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rd'){\r\n                arr.push(ShapeExpressionInterface.createRoundedInterface(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rp'){\r\n                arr.push(ShapeExpressionInterface.createRepatearInterface(shapes[i],view[i],propertyGroup));\r\n            } else{\r\n                //console.log(shapes[i].ty);\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    var shapeInterfaceFactory = (function(){\r\n        return function(shapes,view,propertyGroup){\r\n            var interfaces;\r\n            function _interfaceFunction(value){\r\n                if(typeof value === 'number'){\r\n                    return interfaces[value-1];\r\n                } else {\r\n                    var i = 0, len = interfaces.length;\r\n                    while(i<len){\r\n                        if(interfaces[i]._name === value){\r\n                            return interfaces[i];\r\n                        }\r\n                        i+=1;\r\n                    }\r\n                }\r\n            }\r\n            _interfaceFunction.propertyGroup = propertyGroup;\r\n            interfaces = iterateElements(shapes, view, _interfaceFunction);\r\n            return _interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var contentsInterfaceFactory = (function(){\r\n       return function(shape,view, propertyGroup){\r\n           var interfaces;\r\n           var interfaceFunction = function _interfaceFunction(value){\r\n               var i = 0, len = interfaces.length;\r\n                while(i<len){\r\n                    if(interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value){\r\n                       return interfaces[i];\r\n                    }\r\n                    i+=1;\r\n                }\r\n                if(typeof value === 'number'){\r\n                   return interfaces[value-1];\r\n                }\r\n           };\r\n           interfaceFunction.propertyGroup = function(val){\r\n               if(val === 1){\r\n                   return interfaceFunction;\r\n               } else{\r\n                   return propertyGroup(val-1);\r\n               }\r\n           };\r\n           interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n           interfaceFunction.numProperties = interfaces.length;\r\n           interfaceFunction.propertyIndex = shape.cix;\r\n\r\n           return interfaceFunction;\r\n       }\r\n    }());\r\n\r\n    var groupInterfaceFactory = (function(){\r\n        return function(shape,view, propertyGroup){\r\n            var interfaceFunction = function _interfaceFunction(value){\r\n                switch(value){\r\n                    case 'ADBE Vectors Group':\r\n                    case 'Contents':\r\n                    case 2:\r\n                        return interfaceFunction.content;\r\n                    case 'ADBE Vector Transform Group':\r\n                    case 3:\r\n                    default:\r\n                        return interfaceFunction.transform;\r\n                }\r\n            }\r\n            interfaceFunction.propertyGroup = function(val){\r\n                if(val === 1){\r\n                    return interfaceFunction;\r\n                } else{\r\n                    return propertyGroup(val-1);\r\n                }\r\n            };\r\n            var content = contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup);\r\n            var transformInterface = ShapeExpressionInterface.createTransformInterface(shape.it[shape.it.length - 1],view.it[view.it.length - 1],interfaceFunction.propertyGroup);\r\n            interfaceFunction.content = content;\r\n            interfaceFunction.transform = transformInterface;\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            //interfaceFunction.content = interfaceFunction;\r\n            interfaceFunction.numProperties = shape.np;\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            interfaceFunction.nm = shape.nm;\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var fillInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n\r\n            function interfaceFunction(val){\r\n                if(val === 'Color' || val === 'color'){\r\n                    return interfaceFunction.color;\r\n                } else if(val === 'Opacity' || val === 'opacity'){\r\n                    return interfaceFunction.opacity;\r\n                }\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'color', {\r\n                get: function(){\r\n                    return ExpressionValue(view.c, 1 / view.c.mult, 'color');\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'opacity', {\r\n                get: function(){\r\n                    return ExpressionValue(view.o, 100);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', { value: shape.nm });\r\n            Object.defineProperty(interfaceFunction, 'mn', { value: shape.mn });\r\n\r\n            view.c.setGroupProperty(propertyGroup);\r\n            view.o.setGroupProperty(propertyGroup);\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var strokeInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val === 1){\r\n                    return ob;\r\n                } else{\r\n                    return propertyGroup(val-1);\r\n                }\r\n            };\r\n            function _dashPropertyGroup(val){\r\n                if(val === 1){\r\n                    return dashOb;\r\n                } else{\r\n                    return _propertyGroup(val-1);\r\n                }\r\n            };\r\n            function addPropertyToDashOb(i) {\r\n                Object.defineProperty(dashOb, shape.d[i].nm, {\r\n                    get: function(){\r\n                        return ExpressionValue(view.d.dataProps[i].p)\r\n                    }\r\n                });\r\n            }\r\n            var i, len = shape.d ? shape.d.length : 0;\r\n            var dashOb = {}\r\n            for (i = 0; i < len; i += 1) {\r\n                addPropertyToDashOb(i);\r\n                view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n            }\r\n\r\n            function interfaceFunction(val){\r\n                if(val === 'Color' || val === 'color'){\r\n                    return interfaceFunction.color;\r\n                } else if(val === 'Opacity' || val === 'opacity'){\r\n                    return interfaceFunction.opacity;\r\n                } else if(val === 'Stroke Width' || val === 'stroke width'){\r\n                    return interfaceFunction.strokeWidth;\r\n                }\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'color', {\r\n                get: function(){\r\n                    return ExpressionValue(view.c, 1 / view.c.mult, 'color');\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'opacity', {\r\n                get: function(){\r\n                    return ExpressionValue(view.o, 100);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'strokeWidth', {\r\n                get: function(){\r\n                    return ExpressionValue(view.w);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'dash', {\r\n                get: function(){\r\n                    return dashOb;\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', { value: shape.nm });\r\n            Object.defineProperty(interfaceFunction, 'mn', { value: shape.mn });\r\n\r\n            view.c.setGroupProperty(_propertyGroup);\r\n            view.o.setGroupProperty(_propertyGroup);\r\n            view.w.setGroupProperty(_propertyGroup);\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var trimInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n\r\n            view.s.setGroupProperty(_propertyGroup);\r\n            view.e.setGroupProperty(_propertyGroup);\r\n            view.o.setGroupProperty(_propertyGroup);\r\n\r\n            function interfaceFunction(val){\r\n                if(val === shape.e.ix || val === 'End' || val === 'end'){\r\n                    return interfaceFunction.end;\r\n                }\r\n                if(val === shape.s.ix){\r\n                    return interfaceFunction.start;\r\n                }\r\n                if(val === shape.o.ix){\r\n                    return interfaceFunction.offset;\r\n                }\r\n            }\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            Object.defineProperty(interfaceFunction, 'start', {\r\n                get: function(){\r\n                    return ExpressionValue(view.s, 1 / view.s.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'end', {\r\n                get: function(){\r\n                    return ExpressionValue(view.e, 1 / view.e.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'offset', {\r\n                get: function(){\r\n                    return ExpressionValue(view.o);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var transformInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            view.transform.mProps.o.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.p.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.a.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.s.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.r.setGroupProperty(_propertyGroup);\r\n            if(view.transform.mProps.sk){\r\n                view.transform.mProps.sk.setGroupProperty(_propertyGroup);\r\n                view.transform.mProps.sa.setGroupProperty(_propertyGroup);\r\n            }\r\n            view.transform.op.setGroupProperty(_propertyGroup);\r\n\r\n            function interfaceFunction(value){\r\n                if(shape.a.ix === value){\r\n                    return interfaceFunction.anchorPoint;\r\n                }\r\n                if(shape.o.ix === value){\r\n                    return interfaceFunction.opacity;\r\n                }\r\n                if(shape.p.ix === value){\r\n                    return interfaceFunction.position;\r\n                }\r\n                if(shape.r.ix === value){\r\n                    return interfaceFunction.rotation;\r\n                }\r\n                if(shape.s.ix === value){\r\n                    return interfaceFunction.scale;\r\n                }\r\n                if(shape.sk && shape.sk.ix === value){\r\n                    return interfaceFunction.skew;\r\n                }\r\n                if(shape.sa && shape.sa.ix === value){\r\n                    return interfaceFunction.skewAxis;\r\n                }\r\n                if(value === 'Opacity') {\r\n                    return interfaceFunction.opacity;\r\n                }\r\n                if(value === 'Position') {\r\n                    return interfaceFunction.position;\r\n                }\r\n                if(value === 'Anchor Point') {\r\n                    return interfaceFunction.anchorPoint;\r\n                }\r\n                if(value === 'Scale') {\r\n                    return interfaceFunction.scale;\r\n                }\r\n                if(value === 'Rotation' || value === 'ADBE Vector Rotation') {\r\n                    return interfaceFunction.rotation;\r\n                }\r\n                if(value === 'Skew') {\r\n                    return interfaceFunction.skew;\r\n                }\r\n                if(value === 'Skew Axis') {\r\n                    return interfaceFunction.skewAxis;\r\n                }\r\n\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'opacity', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.o, 1/view.transform.mProps.o.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'position', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.p);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'anchorPoint', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.a);\r\n                }\r\n            });\r\n            var scaleArray = [];\r\n            Object.defineProperty(interfaceFunction, 'scale', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.s, 1 / view.transform.mProps.s.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'rotation', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.r, 1 / view.transform.mProps.r.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'skew', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.sk);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'skewAxis', {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.sa);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.ty = 'tr';\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var ellipseInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n            prop.s.setGroupProperty(_propertyGroup);\r\n            prop.p.setGroupProperty(_propertyGroup);\r\n            function interfaceFunction(value){\r\n                if(shape.p.ix === value){\r\n                    return interfaceFunction.position;\r\n                }\r\n                if(shape.s.ix === value){\r\n                    return interfaceFunction.size;\r\n                }\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'size', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.s);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'position', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var starInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            prop.or.setGroupProperty(_propertyGroup);\r\n            prop.os.setGroupProperty(_propertyGroup);\r\n            prop.pt.setGroupProperty(_propertyGroup);\r\n            prop.p.setGroupProperty(_propertyGroup);\r\n            prop.r.setGroupProperty(_propertyGroup);\r\n            if(shape.ir){\r\n                prop.ir.setGroupProperty(_propertyGroup);\r\n                prop.is.setGroupProperty(_propertyGroup);\r\n            }\r\n\r\n            function interfaceFunction(value){\r\n                if(shape.p.ix === value){\r\n                    return interfaceFunction.position;\r\n                }\r\n                if(shape.r.ix === value){\r\n                    return interfaceFunction.rotation;\r\n                }\r\n                if(shape.pt.ix === value){\r\n                    return interfaceFunction.points;\r\n                }\r\n                if(shape.or.ix === value || 'ADBE Vector Star Outer Radius' === value){\r\n                    return interfaceFunction.outerRadius;\r\n                }\r\n                if(shape.os.ix === value){\r\n                    return interfaceFunction.outerRoundness;\r\n                }\r\n                if(shape.ir && (shape.ir.ix === value || 'ADBE Vector Star Inner Radius' === value)){\r\n                    return interfaceFunction.innerRadius;\r\n                }\r\n                if(shape.is && shape.is.ix === value){\r\n                    return interfaceFunction.innerRoundness;\r\n                }\r\n\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'position', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'rotation', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.r, 1 / prop.r.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'points', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.pt);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'outerRadius', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.or);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'outerRoundness', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.os);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'innerRadius', {\r\n                get: function(){\r\n                    if(!prop.ir){\r\n                        return 0;\r\n                    }\r\n                    return ExpressionValue(prop.ir);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'innerRoundness', {\r\n                get: function(){\r\n                    if(!prop.is){\r\n                        return 0;\r\n                    }\r\n                    return ExpressionValue(prop.is, 1 / prop.is.mult);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var rectInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            prop.p.setGroupProperty(_propertyGroup);\r\n            prop.s.setGroupProperty(_propertyGroup);\r\n            prop.r.setGroupProperty(_propertyGroup);\r\n\r\n            function interfaceFunction(value){\r\n                if(shape.p.ix === value){\r\n                    return interfaceFunction.position;\r\n                }\r\n                if(shape.r.ix === value){\r\n                    return interfaceFunction.roundness;\r\n                }\r\n                if(shape.s.ix === value || value === 'Size'){\r\n                    return interfaceFunction.size;\r\n                }\r\n\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'position', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'roundness', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.r);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'size', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.s);\r\n                }\r\n            });\r\n\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var roundedInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            var prop = view;\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            prop.rd.setGroupProperty(_propertyGroup);\r\n\r\n            function interfaceFunction(value){\r\n                if(shape.r.ix === value || 'Round Corners 1' === value){\r\n                    return interfaceFunction.radius;\r\n                }\r\n\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'radius', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.rd);\r\n                }\r\n            });\r\n\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var repeaterInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            var prop = view;\r\n            interfaceFunction.propertyIndex = shape.ix;\r\n            prop.c.setGroupProperty(_propertyGroup);\r\n            prop.o.setGroupProperty(_propertyGroup);\r\n\r\n            function interfaceFunction(value){\r\n                if(shape.c.ix === value || 'Copies' === value){\r\n                    return interfaceFunction.copies;\r\n                } else if(shape.o.ix === value || 'Offset' === value){\r\n                    return interfaceFunction.offset;\r\n                }\r\n\r\n            }\r\n            Object.defineProperty(interfaceFunction, 'copies', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.c);\r\n                }\r\n            });\r\n\r\n            Object.defineProperty(interfaceFunction, 'offset', {\r\n                get: function(){\r\n                    return ExpressionValue(prop.o);\r\n                }\r\n            });\r\n\r\n            Object.defineProperty(interfaceFunction, '_name', {\r\n                get: function(){\r\n                    return shape.nm;\r\n                }\r\n            });\r\n            interfaceFunction.mn = shape.mn;\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n    var pathInterfaceFactory = (function(){\r\n        return function(shape,view,propertyGroup){\r\n            var prop = view.sh;\r\n            function _propertyGroup(val){\r\n                if(val == 1){\r\n                    return interfaceFunction;\r\n                } else {\r\n                    return propertyGroup(--val);\r\n                }\r\n            }\r\n            prop.setGroupProperty(_propertyGroup);\r\n\r\n            function interfaceFunction(val){\r\n                if(val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2){\r\n                    return interfaceFunction.path;\r\n                }\r\n            }\r\n\r\n            Object.defineProperty(interfaceFunction, 'path', {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                    //return shape_pool.clone(prop.v);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, 'shape', {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                    //return shape_pool.clone(prop.v);\r\n                }\r\n            });\r\n            Object.defineProperty(interfaceFunction, '_name', { value: shape.nm });\r\n            Object.defineProperty(interfaceFunction, 'ix', { value: shape.ix });\r\n            Object.defineProperty(interfaceFunction, 'mn', { value: shape.mn });\r\n            return interfaceFunction;\r\n        }\r\n    }());\r\n\r\n\r\n    return ob;\r\n}())\r\n\nvar TextExpressionInterface = (function(){\r\n\treturn function(elem){\r\n        var _prevValue, _sourceText;\r\n        function _thisLayerFunction(){\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"sourceText\", {\r\n            get: function(){\r\n                var stringValue = elem.textProperty.currentData.t;\r\n                if(elem.textProperty.currentData.t !== _prevValue) {\r\n                    elem.textProperty.currentData.t = _prevValue;\r\n                    _sourceText = new String(stringValue);\r\n                    //If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n                    _sourceText.value = stringValue ? stringValue : new String(stringValue);\r\n                }\r\n                return _sourceText;\r\n            }\r\n        });\r\n        return _thisLayerFunction;\r\n    }\r\n}())\nvar LayerExpressionInterface = (function (){\r\n    function toWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n        }\r\n        return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n    }\r\n    function fromWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n    function fromComp(arr){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n\r\n    return function(elem){\r\n\r\n        var transformInterface = TransformExpressionInterface(elem.transform);\r\n\r\n        function _registerMaskInterface(maskManager){\r\n            _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n        }\r\n        function _registerEffectsInterface(effects){\r\n            _thisLayerFunction.effect = effects;\r\n        }\r\n\r\n        function _thisLayerFunction(name){\r\n            switch(name){\r\n                case \"ADBE Root Vectors Group\":\r\n                case \"Contents\":\r\n                case 2:\r\n                    return _thisLayerFunction.shapeInterface;\r\n                case 1:\r\n                case 6:\r\n                case \"Transform\":\r\n                case \"transform\":\r\n                case \"ADBE Transform Group\":\r\n                    return transformInterface;\r\n                case 4:\r\n                case \"ADBE Effect Parade\":\r\n                    return _thisLayerFunction.effect;\r\n            }\r\n        }\r\n        _thisLayerFunction.toWorld = toWorld;\r\n        _thisLayerFunction.fromWorld = fromWorld;\r\n        _thisLayerFunction.toComp = toWorld;\r\n        _thisLayerFunction.fromComp = fromComp;\r\n        _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n        _thisLayerFunction._elem = elem;\r\n        Object.defineProperty(_thisLayerFunction, 'hasParent', {\r\n            get: function(){\r\n                return !!elem.hierarchy;\r\n            }\r\n        });\r\n        Object.defineProperty(_thisLayerFunction, 'parent', {\r\n            get: function(){\r\n                return elem.hierarchy[0].layerInterface;\r\n            }\r\n        });\r\n        Object.defineProperty(_thisLayerFunction, \"rotation\", {\r\n            get: function(){\r\n                return transformInterface.rotation;\r\n            }\r\n        });\r\n        Object.defineProperty(_thisLayerFunction, \"scale\", {\r\n            get: function () {\r\n                return transformInterface.scale;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"position\", {\r\n            get: function () {\r\n                return transformInterface.position;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"anchorPoint\", {\r\n            get: function () {\r\n                return transformInterface.anchorPoint;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"transform\", {\r\n            get: function () {\r\n                return transformInterface;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"width\", {\r\n            get: function () {\r\n                if(elem.data.ty === 0) {\r\n                    return elem.data.w\r\n                }\r\n                return 100;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"height\", {\r\n            get: function () {\r\n                if(elem.data.ty === 0) {\r\n                    return elem.data.h\r\n                }\r\n                return 100;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"source\", {\r\n            get: function () {\r\n                return elem.data.refId;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"index\", {\r\n            get: function () {\r\n                return elem.data.ind;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"_name\", { value:elem.data.nm });\r\n        Object.defineProperty(_thisLayerFunction, \"content\", {\r\n            get: function(){\r\n                return _thisLayerFunction.shapeInterface;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"active\", {\r\n            get: function(){\r\n                return elem.isVisible;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisLayerFunction, \"text\", {\r\n            get: function(){\r\n                return _thisLayerFunction.textInterface;\r\n            }\r\n        });\r\n\r\n        _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n        _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n        return _thisLayerFunction;\r\n    }\r\n}());\r\n\nvar CompExpressionInterface = (function (){\r\n    return function(comp){\r\n        function _thisLayerFunction(name){\r\n            var i=0, len = comp.layers.length;\r\n            while(i<len){\r\n                if(comp.layers[i].nm === name || comp.layers[i].ind === name){\r\n                    return comp.elements[i].layerInterface;\r\n                }\r\n                i += 1;\r\n            }\r\n            return {active:false}\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"_name\", { value:comp.data.nm });\r\n        _thisLayerFunction.layer = _thisLayerFunction;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.height = comp.globalData.compSize.h;\r\n        _thisLayerFunction.width = comp.globalData.compSize.w;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.frameDuration = 1/comp.globalData.frameRate;\r\n        return _thisLayerFunction;\r\n    }\r\n}());\nvar TransformExpressionInterface = (function (){\r\n    return function(transform){\r\n        function _thisFunction(name){\r\n            switch(name){\r\n                case \"scale\":\r\n                case \"Scale\":\r\n                case \"ADBE Scale\":\r\n                case 6:\r\n                    return _thisFunction.scale;\r\n                case \"rotation\":\r\n                case \"Rotation\":\r\n                case \"ADBE Rotation\":\r\n                case \"ADBE Rotate Z\":\r\n                case 10:\r\n                    return _thisFunction.rotation;\r\n                case \"position\":\r\n                case \"Position\":\r\n                case \"ADBE Position\":\r\n                case 2:\r\n                    return transform.position;\r\n                case \"anchorPoint\":\r\n                case \"AnchorPoint\":\r\n                case \"Anchor Point\":\r\n                case \"ADBE AnchorPoint\":\r\n                case 1:\r\n                    return _thisFunction.anchorPoint;\r\n                case \"opacity\":\r\n                case \"Opacity\":\r\n                case 11:\r\n                    return _thisFunction.opacity;\r\n            }\r\n        }\r\n\r\n        Object.defineProperty(_thisFunction, \"rotation\", {\r\n            get: function(){\r\n                return transform.rotation;\r\n            }\r\n        });\r\n        Object.defineProperty(_thisFunction, \"scale\", {\r\n            get: function () {\r\n                return transform.scale;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"position\", {\r\n            get: function () {\r\n                return transform.position;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xPosition\", {\r\n            get: function () {\r\n                return transform.xPosition;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yPosition\", {\r\n            get: function () {\r\n                return transform.yPosition;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"anchorPoint\", {\r\n            get: function () {\r\n                return transform.anchorPoint;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"opacity\", {\r\n            get: function () {\r\n                return transform.opacity;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skew\", {\r\n            get: function () {\r\n                return transform.skew;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skewAxis\", {\r\n            get: function () {\r\n                return transform.skewAxis;\r\n            }\r\n        });\r\n\r\n        return _thisFunction;\r\n    }\r\n}());\nvar ProjectInterface = (function (){\r\n\r\n    function registerComposition(comp){\r\n        this.compositions.push(comp);\r\n    }\r\n\r\n    return function(){\r\n        function _thisProjectFunction(name){\r\n            var i = 0, len = this.compositions.length;\r\n            while(i<len){\r\n                if(this.compositions[i].data && this.compositions[i].data.nm === name){\r\n                    if(this.compositions[i].prepareFrame) {\r\n                        this.compositions[i].prepareFrame(this.currentFrame);\r\n                    }\r\n                    return this.compositions[i].compInterface;\r\n                }\r\n                i+=1;\r\n            }\r\n        }\r\n\r\n        _thisProjectFunction.compositions = [];\r\n        _thisProjectFunction.currentFrame = 0;\r\n\r\n        _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n\r\n\r\n        return _thisProjectFunction;\r\n    }\r\n}());\nvar EffectsExpressionInterface = (function (){\r\n    var ob = {\r\n        createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup){\r\n        if(elem.effects){\r\n\r\n            var effectElements = [];\r\n            var effectsData = elem.data.ef;\r\n            var i, len = elem.effects.effectElements.length;\r\n            for(i=0;i<len;i+=1){\r\n                effectElements.push(createGroupInterface(effectsData[i],elem.effects.effectElements[i],propertyGroup,elem));\r\n            }\r\n\r\n            return function(name){\r\n                var effects = elem.data.ef, i = 0, len = effects.length;\r\n                while(i<len) {\r\n                    if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                        return effectElements[i];\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function createGroupInterface(data,elements, propertyGroup, elem){\r\n        var effectElements = [];\r\n        var i, len = data.ef.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(data.ef[i].ty === 5){\r\n                effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup, elem));\r\n            } else {\r\n                effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty, elem, _propertyGroup));\r\n            }\r\n        }\r\n\r\n        function _propertyGroup(val) {\r\n            if(val === 1){\r\n               return groupInterface;\r\n            } else{\r\n               return propertyGroup(val-1);\r\n            }\r\n        }\r\n\r\n        var groupInterface = function(name){\r\n            var effects = data.ef, i = 0, len = effects.length;\r\n            while(i<len) {\r\n                if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                    if(effects[i].ty === 5){\r\n                        return effectElements[i];\r\n                    } else {\r\n                        return effectElements[i]();\r\n                    }\r\n                }\r\n                i += 1;\r\n            }\r\n            return effectElements[0]();\r\n        }\r\n\r\n        groupInterface.propertyGroup = _propertyGroup;\r\n\r\n        if(data.mn === 'ADBE Color Control'){\r\n            Object.defineProperty(groupInterface, 'color', {\r\n                get: function(){\r\n                    return effectElements[0]();\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n            get: function(){\r\n                return data.np;\r\n            }\r\n        });\r\n        groupInterface.active = data.en !== 0;\r\n        return groupInterface\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup){\r\n        function interfaceFunction(){\r\n            if(type === 10){\r\n                return elem.comp.compInterface(element.p.v);\r\n            }\r\n            return ExpressionValue(element.p);\r\n        }\r\n\r\n        if(element.p.setGroupProperty) {\r\n            element.p.setGroupProperty(propertyGroup);\r\n        }\r\n\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n\r\n}());\nvar MaskManagerInterface = (function(){\r\n\r\n\tfunction MaskInterface(mask, data){\r\n\t\tthis._mask = mask;\r\n\t\tthis._data = data;\r\n\t}\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n        get: function(){\r\n                if(this._mask.prop.k){\r\n                    this._mask.prop.getValue();\r\n                }\r\n                return this._mask.prop;\r\n            }\r\n        });\r\n\r\n\tvar MaskManager = function(maskManager, elem){\r\n\t\tvar _maskManager = maskManager;\r\n\t\tvar _elem = elem;\r\n\t\tvar _masksInterfaces = Array.apply(null,{length: maskManager.viewData.length});\r\n\t\tvar i, len = maskManager.viewData.length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\t_masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n\t\t}\r\n\r\n\t\tvar maskFunction = function(name){\r\n\t\t\ti = 0;\r\n\t\t    while(i<len){\r\n\t\t        if(maskManager.masksProperties[i].nm === name){\r\n\t\t            return _masksInterfaces[i];\r\n\t\t        }\r\n\t\t        i += 1;\r\n\t\t    }\r\n\t\t}\r\n\t\treturn maskFunction\r\n\t}\r\n\treturn MaskManager\r\n}())\r\n\r\n\nvar ExpressionValue = (function() {\r\n\treturn function(elementProp, mult, type) {\r\n        var expressionValue, arrayValue;\r\n\r\n\t\tif (elementProp.k) {\r\n            elementProp.getValue();\r\n        }\r\n        var i, len, arrValue;\r\n        if (type) {\r\n        \tif(type === 'color') {\r\n        \t\tlen = 4;\r\n\t\t        expressionValue = Array.apply(null, {length: len});\r\n\t\t        arrValue = Array.apply(null, {length: len});\r\n\t\t        for (i = 0; i < len; i += 1) {\r\n\t\t            expressionValue[i] = arrValue[i] = (mult && i < 3) ? elementProp.v[i] * mult : 1;\r\n\t\t        }\r\n\t        \texpressionValue.value = arrValue;\r\n        \t}\r\n        } else if (typeof elementProp.v === 'number' || elementProp.v instanceof Number){\r\n            expressionValue = mult ? new Number(elementProp.v * mult) : new Number(elementProp.v);\r\n            expressionValue.value = mult ? elementProp.v * mult : elementProp.v;\r\n        } else {\r\n        \tlen = elementProp.v.length;\r\n\t        expressionValue = Array.apply(null, {length: len});\r\n\t        arrValue = Array.apply(null, {length: len});\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            expressionValue[i] = arrValue[i] = mult ? elementProp.v[i] * mult : elementProp.v[i];\r\n\t        }\r\n\t        expressionValue.value = arrValue;\r\n        }\r\n        \r\n        expressionValue.numKeys = elementProp.keyframes ? elementProp.keyframes.length : 0;\r\n        expressionValue.key = function(pos) {\r\n            if (!expressionValue.numKeys) {\r\n                return 0;\r\n            } else {\r\n                return elementProp.keyframes[pos-1].t;\r\n            }\r\n        };\r\n        expressionValue.valueAtTime = elementProp.getValueAtTime;\r\n        expressionValue.propertyGroup = elementProp.propertyGroup;\r\n        return expressionValue;\r\n\t}\r\n}())\nfunction SliderEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,dynamicProperties);\r\n}\r\nfunction AngleEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,dynamicProperties);\r\n}\r\nfunction ColorEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,dynamicProperties);\r\n}\r\nfunction PointEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,dynamicProperties);\r\n}\r\nfunction LayerIndexEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,dynamicProperties);\r\n}\r\nfunction MaskIndexEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,dynamicProperties);\r\n}\r\nfunction CheckboxEffect(data,elem, dynamicProperties){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,dynamicProperties);\r\n}\r\nfunction NoValueEffect(){\r\n    this.p = {};\r\n}\nfunction EffectsManager(data,element,dynamicProperties){\r\n    var effects = data.ef;\r\n    this.effectElements = [];\r\n    var i,len = effects.length;\r\n    var effectItem;\r\n    for(i=0;i<len;i++) {\r\n        effectItem = new GroupEffect(effects[i],element,dynamicProperties);\r\n        this.effectElements.push(effectItem);\r\n    }\r\n}\r\n\r\nfunction GroupEffect(data,element,dynamicProperties){\r\n    this.dynamicProperties = [];\r\n    this.init(data,element,this.dynamicProperties);\r\n    if(this.dynamicProperties.length){\r\n        dynamicProperties.push(this);\r\n    }\r\n}\r\n\r\nGroupEffect.prototype.getValue = function(){\r\n    this.mdf = false;\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n        this.mdf = this.dynamicProperties[i].mdf ? true : this.mdf;\r\n    }\r\n};\r\n\r\nGroupEffect.prototype.init = function(data,element,dynamicProperties){\r\n    this.data = data;\r\n    this.mdf = false;\r\n    this.effectElements = [];\r\n    var i, len = this.data.ef.length;\r\n    var eff, effects = this.data.ef;\r\n    for(i=0;i<len;i+=1){\r\n        switch(effects[i].ty){\r\n            case 0:\r\n                eff = new SliderEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 1:\r\n                eff = new AngleEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 2:\r\n                eff = new ColorEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 3:\r\n                eff = new PointEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 4:\r\n            case 7:\r\n                eff = new CheckboxEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 10:\r\n                eff = new LayerIndexEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 11:\r\n                eff = new MaskIndexEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 5:\r\n                eff = new EffectsManager(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n            case 6:\r\n                eff = new NoValueEffect(effects[i],element,dynamicProperties);\r\n                this.effectElements.push(eff);\r\n                break;\r\n        }\r\n    }\r\n};\r\n    var bodymovinjs = {};\r\n\r\n    function setLocationHref (href) {\r\n        locationHref = href;\r\n    }\r\n    function play(animation){\r\n        animationManager.play(animation);\r\n    }\r\n\r\n    function pause(animation) {\r\n        animationManager.pause(animation);\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        animationManager.togglePause(animation);\r\n    }\r\n\r\n    function setSpeed(value, animation) {\r\n        animationManager.setSpeed(value, animation);\r\n    }\r\n\r\n    function setDirection(value, animation) {\r\n        animationManager.setDirection(value, animation);\r\n    }\r\n\r\n    function stop(animation) {\r\n        animationManager.stop(animation);\r\n    }\r\n\r\n    function moveFrame(value) {\r\n        animationManager.moveFrame(value);\r\n    }\r\n\r\n    function searchAnimations() {\r\n        if (standalone === true) {\r\n            animationManager.searchAnimations(animationData, standalone, renderer);\r\n        } else {\r\n            animationManager.searchAnimations();\r\n        }\r\n    }\r\n\r\n    function registerAnimation(elem) {\r\n        return animationManager.registerAnimation(elem);\r\n    }\r\n\r\n    function resize() {\r\n        animationManager.resize();\r\n    }\r\n\r\n    function start() {\r\n        animationManager.start();\r\n    }\r\n\r\n    function goToAndStop(val, isFrame, animation) {\r\n        animationManager.goToAndStop(val, isFrame, animation);\r\n    }\r\n\r\n    function setSubframeRendering(flag) {\r\n        subframeEnabled = flag;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n        if (standalone === true) {\r\n            params.animationData = JSON.parse(animationData);\r\n        }\r\n        return animationManager.loadAnimation(params);\r\n    }\r\n\r\n    function destroy(animation) {\r\n        return animationManager.destroy(animation);\r\n    }\r\n\r\n    function setQuality(value) {\r\n        if (typeof value === 'string') {\r\n            switch (value) {\r\n                case 'high':\r\n                    defaultCurveSegments = 200;\r\n                    break;\r\n                case 'medium':\r\n                    defaultCurveSegments = 50;\r\n                    break;\r\n                case 'low':\r\n                    defaultCurveSegments = 10;\r\n                    break;\r\n            }\r\n        } else if (!isNaN(value) && value > 1) {\r\n            defaultCurveSegments = value;\r\n        }\r\n        if (defaultCurveSegments >= 50) {\r\n            roundValues(false);\r\n        } else {\r\n            roundValues(true);\r\n        }\r\n    }\r\n\r\n    function inBrowser() {\r\n        return typeof navigator !== 'undefined';\r\n    }\r\n\r\n    function installPlugin(type, plugin) {\r\n        if (type === 'expressions') {\r\n            expressionsPlugin = plugin;\r\n        }\r\n    }\r\n\r\n    function getFactory(name) {\r\n        switch (name) {\r\n            case \"propertyFactory\":\r\n                return PropertyFactory;\r\n            case \"shapePropertyFactory\":\r\n                return ShapePropertyFactory;\r\n            case \"matrix\":\r\n                return Matrix;\r\n        }\r\n    }\r\n    bodymovinjs.play = play;\r\n    bodymovinjs.pause = pause;\r\n    bodymovinjs.setLocationHref = setLocationHref;\r\n    bodymovinjs.togglePause = togglePause;\r\n    bodymovinjs.setSpeed = setSpeed;\r\n    bodymovinjs.setDirection = setDirection;\r\n    bodymovinjs.stop = stop;\r\n    bodymovinjs.moveFrame = moveFrame;\r\n    bodymovinjs.searchAnimations = searchAnimations;\r\n    bodymovinjs.registerAnimation = registerAnimation;\r\n    bodymovinjs.loadAnimation = loadAnimation;\r\n    bodymovinjs.setSubframeRendering = setSubframeRendering;\r\n    bodymovinjs.resize = resize;\r\n    bodymovinjs.start = start;\r\n    bodymovinjs.goToAndStop = goToAndStop;\r\n    bodymovinjs.destroy = destroy;\r\n    bodymovinjs.setQuality = setQuality;\r\n    bodymovinjs.inBrowser = inBrowser;\r\n    bodymovinjs.installPlugin = installPlugin;\r\n    bodymovinjs.__getFactory = getFactory;\r\n    bodymovinjs.version = '4.13.0';\r\n\r\n    function checkReady() {\r\n        if (document.readyState === \"complete\") {\r\n            clearInterval(readyStateCheckInterval);\r\n            searchAnimations();\r\n        }\r\n    }\r\n\r\n    function getQueryVariable(variable) {\r\n        var vars = queryString.split('&');\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            if (decodeURIComponent(pair[0]) == variable) {\r\n                return decodeURIComponent(pair[1]);\r\n            }\r\n        }\r\n    }\r\n    var standalone = '__[STANDALONE]__';\r\n    var animationData = '__[ANIMATIONDATA]__';\r\n    var renderer = '';\r\n    if (standalone) {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var index = scripts.length - 1;\r\n        var myScript = scripts[index] || {\r\n            src: ''\r\n        };\r\n        var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\r\n        renderer = getQueryVariable('renderer');\r\n    }\r\n    var readyStateCheckInterval = setInterval(checkReady, 100);\r\n    return bodymovinjs;\r\n}));","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id='container'></div>\n</template>\n\n<script>\n  /* eslint-disable */\n  import bodymovin from 'bodymovin';\n  export default { \n    mounted () {\n\n      var winHeight = window.innerHeight;\n      var animDuration = winHeight * 4;\n      var animationData;\n\n      animationData = (function () {\n          var json = null;\n          $.ajax({\n              'async': false,\n              'global': false,\n              'url': \"/img/sequence/robodog-md/data.json\",\n              'dataType': \"json\",\n              'success': function (data) {\n                  json = data;\n              }\n          });\n          return json;\n      })(); \n\n      var animData = {\n        container: document.getElementById('container'),\n        renderer: 'html',\n        loop: false,\n        autoplay: false,\n        animationData: animationData,\n      };\n\n      var anim = bodymovin.loadAnimation(animData);\n      window.addEventListener('scroll', function() {\n        animatebodymovin(animDuration, anim);\n      });\n\n      function animatebodymovin(duration, animObject) {\n        var scrollPosition = window.scrollY;\n        var maxFrames = animObject.totalFrames;\n        var frame = (maxFrames / 100) * (scrollPosition / (duration / 100));\n        animObject.goToAndStop(frame, true);\n      }\n\n      function loadJSON(callback) {   \n\n        var xobj = new XMLHttpRequest();\n        xobj.overrideMimeType(\"application/json\");\n        xobj.open('GET', '/img/sequence/robodog-md/data.json', true);\n        xobj.onreadystatechange = function () {\n          if (xobj.readyState == 4 && xobj.status == \"200\") {\n            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\n            callback(xobj.responseText);\n            console.log(xobj.responseText)\n          }\n        };\n        xobj.send(null);  \n      }\n\n\n    }\n\n  }\n</script>\n\n\n<style scoped>\n  body, html{\n    margin: 0;\n    width: 100%;\n    height: 500vh;\n    background-color: #e4e4e4;\n    color: #212121;\n    font-family: sans-serif;\n    scroll-behavior: smooth;\n  }\n\n  #container{\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n  }\n\n  .trigger {\n    position: fixed;\n    z-index: 30;\n    bottom: 2vh;\n    right: 20vw;\n    transform: translateX(-50%);\n    width: 90vw;\n    padding: 15px;\n    text-align: center;\n    text-transform: uppercase;\n    letter-spacing: 0.2em;\n    font-size: 0.7em;\n  }\n  p {\n    text-align: center;\n    position: fixed;\n    width: 100%;\n    bottom: 0;\n    font-size: 11px;\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Json.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Json.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Json.vue?vue&type=template&id=605fe72f&scoped=true&\"\nimport script from \"./Json.vue?vue&type=script&lang=js&\"\nexport * from \"./Json.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Json.vue?vue&type=style&index=0&id=605fe72f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"605fe72f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Json.vue?vue&type=style&index=0&id=605fe72f&scoped=true&lang=css&\""],"sourceRoot":""}